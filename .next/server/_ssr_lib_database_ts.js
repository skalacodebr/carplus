"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_lib_database_ts";
exports.ids = ["_ssr_lib_database_ts"];
exports.modules = {

/***/ "(ssr)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adicionarItemCarrinho: () => (/* binding */ adicionarItemCarrinho),\n/* harmony export */   atualizarCarrinhoUsuario: () => (/* binding */ atualizarCarrinhoUsuario),\n/* harmony export */   atualizarQuantidadeCarrinho: () => (/* binding */ atualizarQuantidadeCarrinho),\n/* harmony export */   atualizarStatusPedido: () => (/* binding */ atualizarStatusPedido),\n/* harmony export */   criarPedido: () => (/* binding */ criarPedido),\n/* harmony export */   criarPedidoNovo: () => (/* binding */ criarPedidoNovo),\n/* harmony export */   getAlturasByTamanhoId: () => (/* binding */ getAlturasByTamanhoId),\n/* harmony export */   getCalculos: () => (/* binding */ getCalculos),\n/* harmony export */   getCalculosUsuario: () => (/* binding */ getCalculosUsuario),\n/* harmony export */   getCarrinhoUsuario: () => (/* binding */ getCarrinhoUsuario),\n/* harmony export */   getLargurasByAlturaId: () => (/* binding */ getLargurasByAlturaId),\n/* harmony export */   getPacoteByLarguraId: () => (/* binding */ getPacoteByLarguraId),\n/* harmony export */   getPacoteByProdutoNome: () => (/* binding */ getPacoteByProdutoNome),\n/* harmony export */   getPacoteValido: () => (/* binding */ getPacoteValido),\n/* harmony export */   getPedidos: () => (/* binding */ getPedidos),\n/* harmony export */   getPedidosCliente: () => (/* binding */ getPedidosCliente),\n/* harmony export */   getProduto: () => (/* binding */ getProduto),\n/* harmony export */   getProdutos: () => (/* binding */ getProdutos),\n/* harmony export */   getRevendedoresComProduto: () => (/* binding */ getRevendedoresComProduto),\n/* harmony export */   getRevendedoresParaProdutos: () => (/* binding */ getRevendedoresParaProdutos),\n/* harmony export */   getTamanhos: () => (/* binding */ getTamanhos),\n/* harmony export */   getUserInfo: () => (/* binding */ getUserInfo),\n/* harmony export */   getUsuarioIdRevendedor: () => (/* binding */ getUsuarioIdRevendedor),\n/* harmony export */   limparCarrinhoUsuario: () => (/* binding */ limparCarrinhoUsuario),\n/* harmony export */   registrarMudancaStatus: () => (/* binding */ registrarMudancaStatus),\n/* harmony export */   removerItemCarrinho: () => (/* binding */ removerItemCarrinho),\n/* harmony export */   salvarCalculo: () => (/* binding */ salvarCalculo),\n/* harmony export */   salvarCalculoUsuario: () => (/* binding */ salvarCalculoUsuario)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(ssr)/./lib/supabase.ts\");\n\n// Fun√ß√µes para produtos\nasync function getProdutos() {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"produtos\").select(\"*\").order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\nasync function getProduto(id) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"produtos\").select(\"*\").eq(\"id\", id).single();\n    return {\n        data,\n        error\n    };\n}\n// Fun√ß√µes para c√°lculos\nasync function salvarCalculo(tamanhoRoda, altura, largura, resultado, cor) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculos\").insert([\n        {\n            tamanho_roda: tamanhoRoda,\n            altura: altura,\n            largura: largura,\n            resultado: resultado,\n            cor: cor\n        }\n    ]).select();\n    return {\n        data,\n        error\n    };\n}\n// Nova fun√ß√£o para salvar c√°lculos do usu√°rio com limite de 10\nasync function salvarCalculoUsuario(userId, tamanho, altura, largura, pacote) {\n    try {\n        // 1. Verificar quantos c√°lculos o usu√°rio j√° tem\n        const { data: calculos, error: contarError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculo_usuarios\").select(\"id, created_at\").eq(\"userid\", userId).order(\"created_at\", {\n            ascending: true\n        });\n        if (contarError) {\n            console.error(\"Erro ao contar c√°lculos do usu√°rio:\", contarError);\n            return {\n                data: null,\n                error: contarError\n            };\n        }\n        // 2. Se j√° tiver 10 ou mais, excluir o mais antigo\n        if (calculos && calculos.length >= 10) {\n            const calculoMaisAntigo = calculos[0];\n            const { error: deleteError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculo_usuarios\").delete().eq(\"id\", calculoMaisAntigo.id);\n            if (deleteError) {\n                console.error(\"Erro ao excluir c√°lculo mais antigo:\", deleteError);\n                return {\n                    data: null,\n                    error: deleteError\n                };\n            }\n        }\n        // 3. Inserir o novo c√°lculo\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculo_usuarios\").insert([\n            {\n                userid: userId,\n                tamanho: tamanho,\n                altura: altura,\n                largura: largura,\n                pacote: pacote,\n                created_at: new Date()\n            }\n        ]).select();\n        if (error) {\n            console.error(\"Erro ao salvar c√°lculo do usu√°rio:\", error);\n            return {\n                data: null,\n                error\n            };\n        }\n        return {\n            data,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao salvar c√°lculo do usu√°rio:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// Fun√ß√£o para obter os c√°lculos do usu√°rio\nasync function getCalculosUsuario(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculo_usuarios\").select(\"*\").eq(\"userid\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\nasync function getCalculos(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculos\").select(\"*\").eq(\"user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\n// Fun√ß√µes para pedidos\nasync function criarPedido(userId, items, total, tipoEntrega = \"retirada\", metodoPagamento = \"cartao\", dadosAdicionais = {}) {\n    try {\n        // Criar o pedido\n        const { data: pedido, error: pedidoError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").insert([\n            {\n                user_id: userId,\n                total: total,\n                tipo_entrega: tipoEntrega,\n                pagamento_tipo: metodoPagamento,\n                status: \"pendente\",\n                dados_adicionais: dadosAdicionais\n            }\n        ]).select().single();\n        if (pedidoError) throw pedidoError;\n        // Inserir os itens do pedido\n        const itens = items.map((item)=>({\n                pedido_id: pedido.id,\n                produto_nome: item.nome,\n                quantidade: item.quantidade,\n                preco_unitario: item.preco,\n                revendedor_id: item.revendedor_id\n            }));\n        const { error: itensError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"itens_pedido\").insert(itens);\n        if (itensError) throw itensError;\n        return {\n            data: pedido,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao criar pedido:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// Remover as fun√ß√µes getClienteByUsuarioId e garantirCliente que estavam criando uma tabela clientes desnecess√°ria\n// Fun√ß√£o para buscar pacote baseado no nome do produto\nasync function getPacoteByProdutoNome(produtoNome) {\n    try {\n        // Mapear nomes de produtos para pacotes\n        // Voc√™ pode ajustar essa l√≥gica conforme sua regra de neg√≥cio\n        const mapeamentoProdutos = {\n            \"Microesferas Azul\": 1,\n            \"Microesferas Vermelha\": 2,\n            \"Microesferas Verde\": 3,\n            \"Microesferas Amarela\": 4,\n            \"Microesferas Preta\": 5,\n            \"Microesferas Branca\": 6\n        };\n        // Se existe um mapeamento direto, usar ele\n        if (mapeamentoProdutos[produtoNome]) {\n            return {\n                data: mapeamentoProdutos[produtoNome],\n                error: null\n            };\n        }\n        // Caso contr√°rio, tentar buscar por nome similar\n        const { data: pacotes, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pacotes\").select(\"id, nome, cor\").ilike(\"nome\", `%${produtoNome}%`).limit(1);\n        if (error) {\n            console.error(\"Erro ao buscar pacote por nome:\", error);\n            return {\n                data: 1,\n                error: null\n            } // Fallback para ID 1\n            ;\n        }\n        if (pacotes && pacotes.length > 0) {\n            return {\n                data: pacotes[0].id,\n                error: null\n            };\n        }\n        // Se n√£o encontrou nada, tentar buscar por cor\n        const cores = [\n            \"azul\",\n            \"vermelha\",\n            \"verde\",\n            \"amarela\",\n            \"preta\",\n            \"branca\"\n        ];\n        for (const cor of cores){\n            if (produtoNome.toLowerCase().includes(cor)) {\n                const { data: pacotePorCor, error: errorCor } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pacotes\").select(\"id\").ilike(\"cor\", `%${cor}%`).limit(1);\n                if (!errorCor && pacotePorCor && pacotePorCor.length > 0) {\n                    return {\n                        data: pacotePorCor[0].id,\n                        error: null\n                    };\n                }\n            }\n        }\n        // Fallback final\n        return {\n            data: 1,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao buscar pacote:\", error);\n        return {\n            data: 1,\n            error: null\n        };\n    }\n}\n// Fun√ß√£o para buscar um pacote v√°lido (por enquanto retorna o primeiro dispon√≠vel)\nasync function getPacoteValido() {\n    try {\n        const { data: pacotes, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pacotes\").select(\"id\").limit(1);\n        if (error) {\n            console.error(\"Erro ao buscar pacote:\", error);\n            return 1 // Fallback para ID 1\n            ;\n        }\n        return pacotes && pacotes.length > 0 ? pacotes[0].id : 1;\n    } catch (error) {\n        console.error(\"Erro ao buscar pacote:\", error);\n        return 1 // Fallback para ID 1\n        ;\n    }\n}\n// Fun√ß√£o para registrar mudan√ßa de status no hist√≥rico\nasync function registrarMudancaStatus(pedidoId, statusAnterior, statusNovo, observacao, updatedBy) {\n    try {\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedido_historico_status\").insert([\n            {\n                pedido_id: pedidoId,\n                status_anterior: statusAnterior,\n                status_novo: statusNovo,\n                observacao: observacao,\n                updated_by: updatedBy\n            }\n        ]).select();\n        if (error) {\n            console.error(\"Erro ao registrar mudan√ßa de status:\", error);\n        }\n        return {\n            data,\n            error\n        };\n    } catch (error) {\n        console.error(\"Erro ao registrar mudan√ßa de status:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// Substituir a fun√ß√£o criarPedidoNovo por esta vers√£o corrigida:\nasync function criarPedidoNovo(userId, revendedorId, items, valorTotal, frete, tipoEntrega, metodoPagamento) {\n    try {\n        console.log(\"Iniciando cria√ß√£o do pedido para usu√°rio:\", userId);\n        // Converter userId para n√∫mero\n        const clienteId = Number.parseInt(userId);\n        // Buscar o usuario_id do revendedor baseado no revendedor_id\n        const { data: revendedorUsuarioId, error: revendedorError } = await getUsuarioIdRevendedor(revendedorId);\n        if (revendedorError || !revendedorUsuarioId) {\n            throw new Error(\"Erro ao buscar revendedor: \" + (revendedorError?.message || \"Revendedor n√£o encontrado\"));\n        }\n        console.log(\"Cliente ID:\", clienteId);\n        console.log(\"Revendedor ID:\", revendedorId);\n        console.log(\"Revendedor Usuario ID:\", revendedorUsuarioId);\n        // Gerar n√∫mero do pedido √∫nico\n        const numeroPedido = `PED-${Date.now()}-${Math.random().toString(36).substr(2, 4).toUpperCase()}`;\n        // Definir status inicial baseado no tipo de entrega\n        const statusInicial = tipoEntrega === \"retirada\" ? \"aguardando_preparacao\" : \"aguardando_aceite\";\n        // Criar o pedido usando o schema correto\n        const { data: pedido, error: pedidoError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").insert([\n            {\n                cliente_id: clienteId,\n                revendedor_id: revendedorUsuarioId,\n                numero: numeroPedido,\n                frete: frete,\n                valor_total: valorTotal,\n                pagamento_tipo: metodoPagamento,\n                tipo_entrega: tipoEntrega,\n                status: \"pago\",\n                status_detalhado: statusInicial,\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            }\n        ]).select().single();\n        if (pedidoError) {\n            console.error(\"Erro ao criar pedido:\", pedidoError);\n            throw pedidoError;\n        }\n        console.log(\"Pedido criado com sucesso:\", pedido);\n        // Registrar o status inicial no hist√≥rico\n        await registrarMudancaStatus(pedido.id, null, statusInicial, \"Pedido criado\", null);\n        // Preparar itens para inser√ß√£o com pacote_id correto para cada item\n        const itensParaInserir = await Promise.all(items.map(async (item, index)=>{\n            // Buscar o pacote_id correto baseado no nome do produto\n            const { data: pacoteId } = await getPacoteByProdutoNome(item.nome);\n            const itemParaInserir = {\n                pedido_id: pedido.id,\n                pacote_id: pacoteId,\n                qtd: Number(item.quantidade) || 0,\n                valor_unitario: Number(item.preco) || 0\n            };\n            console.log(`Item ${index + 1} preparado:`, itemParaInserir);\n            console.log(`Produto: ${item.nome} -> Pacote ID: ${pacoteId}`);\n            return itemParaInserir;\n        }));\n        console.log(\"Todos os itens preparados:\", itensParaInserir);\n        // Inserir os itens do pedido\n        const { data: itensInseridos, error: itensError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedido_itens\").insert(itensParaInserir).select();\n        if (itensError) {\n            console.error(\"Erro detalhado ao inserir itens do pedido:\", itensError);\n            console.error(\"Dados que tentamos inserir:\", itensParaInserir);\n            throw itensError;\n        }\n        console.log(\"Itens inseridos com sucesso:\", itensInseridos);\n        return {\n            data: pedido,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao criar pedido:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// Fun√ß√£o para atualizar status do pedido\nasync function atualizarStatusPedido(pedidoId, novoStatus, dataEstimada, observacoes, updatedBy) {\n    try {\n        // Primeiro, buscar o status atual\n        const { data: pedidoAtual, error: errorBusca } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").select(\"status_detalhado\").eq(\"id\", pedidoId).single();\n        if (errorBusca) {\n            throw errorBusca;\n        }\n        // Preparar dados para atualiza√ß√£o\n        const dadosAtualizacao = {\n            status_detalhado: novoStatus,\n            updated_at: new Date().toISOString()\n        };\n        if (dataEstimada) {\n            dadosAtualizacao.data_estimada_entrega = dataEstimada;\n        }\n        if (observacoes) {\n            dadosAtualizacao.observacoes_revendedor = observacoes;\n        }\n        // Se o status for \"entregue\" ou \"retirado\", definir data real\n        if (novoStatus === \"entregue\" || novoStatus === \"retirado\") {\n            dadosAtualizacao.data_entrega_real = new Date().toISOString();\n        }\n        // Atualizar o pedido\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").update(dadosAtualizacao).eq(\"id\", pedidoId).select();\n        if (error) {\n            throw error;\n        }\n        // Registrar mudan√ßa no hist√≥rico\n        await registrarMudancaStatus(pedidoId, pedidoAtual.status_detalhado, novoStatus, observacoes, updatedBy);\n        return {\n            data,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao atualizar status do pedido:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\nasync function getPedidos(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").select(`\n      *,\n      itens_pedido:itens_pedido(\n        *,\n        produto:produtos(*)\n      )\n    `).eq(\"user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\n// Substituir a fun√ß√£o getPedidosCliente por esta vers√£o corrigida:\nasync function getPedidosCliente(userId) {\n    try {\n        console.log(\"Buscando pedidos para usu√°rio:\", userId);\n        // Converter userId para n√∫mero\n        const clienteId = Number.parseInt(userId);\n        // Buscar pedidos usando o cliente_id diretamente\n        const { data: pedidos, error: pedidosError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").select(`\n        *,\n        pedido_itens:pedido_itens(\n          id,\n          pedido_id,\n          pacote_id,\n          qtd,\n          valor_unitario,\n          pacotes:pacotes(id, descricao, cor, imagem)\n        )\n      `).eq(\"cliente_id\", clienteId) // Corrigido: cliente_id em vez de client_id\n        .order(\"created_at\", {\n            ascending: false\n        });\n        console.log(\"Pedidos encontrados:\", pedidos?.length || 0);\n        if (pedidosError) {\n            console.error(\"Erro ao buscar pedidos:\", pedidosError);\n            throw pedidosError;\n        }\n        return {\n            data: pedidos || [],\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao buscar pedidos do cliente:\", error);\n        return {\n            data: [],\n            error\n        };\n    }\n}\n// Fun√ß√£o para buscar tamanhos de rodas dispon√≠veis\nasync function getTamanhos() {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"tamanhos\").select(\"id, nome\").order(\"nome\", {\n        ascending: true\n    });\n    return {\n        data,\n        error\n    };\n}\n// Fun√ß√£o para buscar alturas dispon√≠veis com base no tamanho da roda\nasync function getAlturasByTamanhoId(tamanhoId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"alturas\").select(\"id, valor\").eq(\"tamanho_id\", tamanhoId).order(\"valor\", {\n        ascending: true\n    });\n    // Remover duplicatas baseado no valor\n    if (data && data.length > 0) {\n        const uniqueAlturas = data.reduce((acc, current)=>{\n            const exists = acc.find((item)=>item.valor === current.valor);\n            if (!exists) {\n                acc.push(current);\n            }\n            return acc;\n        }, []);\n        return {\n            data: uniqueAlturas,\n            error\n        };\n    }\n    return {\n        data,\n        error\n    };\n}\n// Fun√ß√£o para buscar larguras based on altura_id\nasync function getLargurasByAlturaId(alturaId) {\n    console.log(\"üîç Buscando larguras para alturaId:\", alturaId);\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"larguras\").select(\"id, valor\").eq(\"altura_id\", alturaId).order(\"valor\", {\n        ascending: true\n    });\n    // Remover duplicatas baseado no valor\n    if (data && data.length > 0) {\n        const uniqueLarguras = data.reduce((acc, current)=>{\n            const exists = acc.find((item)=>item.valor === current.valor);\n            if (!exists) {\n                acc.push(current);\n            }\n            return acc;\n        }, []);\n        console.log(\"üìè Larguras √∫nicas encontradas:\", {\n            data: uniqueLarguras,\n            error\n        });\n        return {\n            data: uniqueLarguras,\n            error\n        };\n    }\n    console.log(\"üìè Larguras encontradas:\", {\n        data,\n        error\n    });\n    return {\n        data,\n        error\n    };\n}\n// Fun√ß√£o para buscar package details by largura_id\nasync function getPacoteByLarguraId(larguraId) {\n    try {\n        console.log(\"üîç Buscando pacote para larguraId:\", larguraId);\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pacotes\").select(\"*\").eq(\"largura_id\", larguraId).single();\n        console.log(\"üì¶ Resultado da busca:\", {\n            data,\n            error\n        });\n        if (error) {\n            console.error(\"‚ùå Erro ao buscar pacote por largura_id:\", error);\n            // Fallback: retornar um pacote padr√£o\n            return {\n                data: {\n                    id: 1,\n                    nome: \"LTP60\",\n                    cor: \"#4A4953\"\n                },\n                error: null\n            };\n        }\n        if (!data) {\n            console.log(\"Nenhum pacote encontrado para largura_id:\", larguraId);\n            // Fallback: retornar um pacote padr√£o\n            return {\n                data: {\n                    id: 1,\n                    nome: \"LTP60\",\n                    cor: \"#4A4953\"\n                },\n                error: null\n            };\n        }\n        // Ajustar dados se nome estiver null\n        const pacoteAjustado = {\n            id: data.id,\n            nome: data.nome || data.descricao || \"LTP60\",\n            cor: data.cor || \"#949698\" // Cor padr√£o baseada nos dados existentes\n        };\n        return {\n            data: pacoteAjustado,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao buscar pacote:\", error);\n        // Fallback: retornar um pacote padr√£o\n        return {\n            data: {\n                id: 1,\n                nome: \"LTP60\",\n                cor: \"#4A4953\"\n            },\n            error: null\n        };\n    }\n}\n// ==================== FUN√á√ïES DO CARRINHO ====================\n// Buscar carrinho do usu√°rio\nasync function getCarrinhoUsuario(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").select(\"*\").eq(\"user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\n// Adicionar item ao carrinho\nasync function adicionarItemCarrinho(userId, produtoNome, quantidade = 5, imagem) {\n    // Ensure quantity is a multiple of 5 and at least 5\n    const adjustedQuantity = Math.max(Math.round(quantidade / 5) * 5, 5);\n    // Verificar se o item j√° existe no carrinho\n    const { data: itemExistente, error: errorBusca } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").select(\"*\").eq(\"user_id\", userId).eq(\"produto_nome\", produtoNome).single();\n    if (errorBusca && errorBusca.code !== \"PGRST116\") {\n        // PGRST116 = No rows found (esperado se item n√£o existe)\n        return {\n            data: null,\n            error: errorBusca\n        };\n    }\n    if (itemExistente) {\n        // Item j√° existe, adicionar 5 unidades\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").update({\n            quantidade: itemExistente.quantidade + 5,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", itemExistente.id).select();\n        return {\n            data,\n            error\n        };\n    } else {\n        // Item n√£o existe, criar novo com quantidade ajustada\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").insert([\n            {\n                user_id: userId,\n                produto_nome: produtoNome,\n                quantidade: adjustedQuantity,\n                imagem: imagem\n            }\n        ]).select();\n        return {\n            data,\n            error\n        };\n    }\n}\n// Atualizar quantidade de item no carrinho\nasync function atualizarQuantidadeCarrinho(userId, produtoNome, quantidade) {\n    // Ensure quantity is a multiple of 5 and at least 5\n    const adjustedQuantity = Math.max(Math.round(quantidade / 5) * 5, 5);\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").update({\n        quantidade: adjustedQuantity,\n        updated_at: new Date().toISOString()\n    }).eq(\"user_id\", userId).eq(\"produto_nome\", produtoNome).select();\n    return {\n        data,\n        error\n    };\n}\n// Remover item do carrinho\nasync function removerItemCarrinho(userId, produtoNome) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").delete().eq(\"user_id\", userId).eq(\"produto_nome\", produtoNome);\n    return {\n        data,\n        error\n    };\n}\n// Limpar carrinho do usu√°rio\nasync function limparCarrinhoUsuario(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").delete().eq(\"user_id\", userId);\n    return {\n        data,\n        error\n    };\n}\n// Atualizar carrinho completo do usu√°rio\nasync function atualizarCarrinhoUsuario(userId, items) {\n    try {\n        // Primeiro, limpar o carrinho atual\n        await limparCarrinhoUsuario(userId);\n        // Se n√£o h√° itens, apenas retornar sucesso\n        if (!items || items.length === 0) {\n            return {\n                data: null,\n                error: null\n            };\n        }\n        // Inserir todos os novos itens\n        const itensParaInserir = items.map((item)=>({\n                user_id: userId,\n                produto_nome: item.nome,\n                quantidade: item.quantidade,\n                imagem: item.imagem,\n                created_at: new Date().toISOString()\n            }));\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").insert(itensParaInserir).select();\n        return {\n            data,\n            error\n        };\n    } catch (error) {\n        console.error(\"Erro ao atualizar carrinho:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// ==================== FUN√á√ïES DE REVENDEDORES E ESTOQUE ====================\n// Buscar revendedores que possuem um produto espec√≠fico em estoque\nasync function getRevendedoresComProduto(produtoNome) {\n    // Usando JOIN manual em vez de relacionamento\n    const { data: estoque, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedor_estoque\").select(`\n      id,\n      revendedor_id,\n      produto,\n      quantidade,\n      preco,\n      status\n    `).eq(\"produto\", produtoNome).gt(\"quantidade\", 0) // Apenas com estoque dispon√≠vel\n    ;\n    if (error) {\n        return {\n            data: null,\n            error\n        };\n    }\n    // Buscar informa√ß√µes dos revendedores\n    const revendedorIds = estoque?.map((item)=>item.revendedor_id) || [];\n    if (revendedorIds.length === 0) {\n        return {\n            data: [],\n            error: null\n        };\n    }\n    const { data: revendedores, error: revendedoresError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedores\").select(`\n      id,\n      usuario_id,\n      loja,\n      cidade,\n      uf,\n      frete,\n      vendas,\n      status\n    `).in(\"id\", revendedorIds);\n    if (revendedoresError) {\n        return {\n            data: null,\n            error: revendedoresError\n        };\n    }\n    // Combinar os dados\n    const resultado = estoque?.map((item)=>{\n        const revendedor = revendedores?.find((r)=>r.id === item.revendedor_id);\n        return {\n            ...item,\n            revendedor: revendedor || null\n        };\n    }).filter((item)=>item.revendedor !== null) || [];\n    // Ordenar por pre√ßo\n    resultado.sort((a, b)=>a.preco - b.preco);\n    return {\n        data: resultado,\n        error: null\n    };\n}\n// Buscar revendedores para m√∫ltiplos produtos\nasync function getRevendedoresParaProdutos(produtoNomes) {\n    if (!produtoNomes.length) return {\n        data: {},\n        error: null\n    };\n    // Buscar todos os produtos de uma vez\n    const { data: estoque, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedor_estoque\").select(`\n      id,\n      revendedor_id,\n      produto,\n      quantidade,\n      preco,\n      status\n    `).in(\"produto\", produtoNomes).gt(\"quantidade\", 0) // Apenas com estoque dispon√≠vel\n    ;\n    if (error) {\n        return {\n            data: {},\n            error\n        };\n    }\n    if (!estoque || estoque.length === 0) {\n        return {\n            data: {},\n            error: null\n        };\n    }\n    // Buscar informa√ß√µes dos revendedores\n    const revendedorIds = [\n        ...new Set(estoque.map((item)=>item.revendedor_id))\n    ];\n    const { data: revendedores, error: revendedoresError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedores\").select(`\n      id,\n      usuario_id,\n      loja,\n      cidade,\n      uf,\n      frete,\n      vendas,\n      status\n    `).in(\"id\", revendedorIds);\n    if (revendedoresError) {\n        return {\n            data: {},\n            error: revendedoresError\n        };\n    }\n    // Combinar os dados e agrupar por produto\n    const produtosAgrupados = {};\n    produtoNomes.forEach((produtoNome)=>{\n        const produtoEstoque = estoque.filter((item)=>item.produto === produtoNome).map((item)=>{\n            const revendedor = revendedores?.find((r)=>r.id === item.revendedor_id);\n            return revendedor ? {\n                ...item,\n                revendedor\n            } : null;\n        }).filter((item)=>item !== null);\n        // Ordenar por pre√ßo\n        produtoEstoque.sort((a, b)=>a.preco - b.preco);\n        produtosAgrupados[produtoNome] = produtoEstoque;\n    });\n    return {\n        data: produtosAgrupados,\n        error: null\n    };\n}\n// Buscar informa√ß√µes do usu√°rio\nasync function getUserInfo(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"usuarios\").select(\"id, nome, email, cidade, uf, cep, rua, bairro, complemento, numero\").eq(\"id\", userId).single();\n    return {\n        data,\n        error\n    };\n}\n// Fun√ß√£o para buscar usuario_id do revendedor baseado no revendedor_id\nasync function getUsuarioIdRevendedor(revendedorId) {\n    try {\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedores\").select(\"usuario_id\").eq(\"id\", revendedorId).single();\n        if (error) {\n            console.error(\"Erro ao buscar usuario_id do revendedor:\", error);\n            return {\n                data: null,\n                error\n            };\n        }\n        return {\n            data: data.usuario_id,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao buscar usuario_id do revendedor:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SHViL2NhcnBsdXMvbGliL2RhdGFiYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIi4vc3VwYWJhc2VcIlxuXG4vLyBGdW7Dp8O1ZXMgcGFyYSBwcm9kdXRvc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1dG9zKCkge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwicHJvZHV0b3NcIikuc2VsZWN0KFwiKlwiKS5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZHV0byhpZDogc3RyaW5nKSB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oXCJwcm9kdXRvc1wiKS5zZWxlY3QoXCIqXCIpLmVxKFwiaWRcIiwgaWQpLnNpbmdsZSgpXG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfVxufVxuXG4vLyBGdW7Dp8O1ZXMgcGFyYSBjw6FsY3Vsb3NcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWx2YXJDYWxjdWxvKFxuICB0YW1hbmhvUm9kYTogc3RyaW5nLFxuICBhbHR1cmE6IHN0cmluZyxcbiAgbGFyZ3VyYTogc3RyaW5nLFxuICByZXN1bHRhZG86IHN0cmluZyxcbiAgY29yOiBzdHJpbmcsXG4pIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcImNhbGN1bG9zXCIpXG4gICAgLmluc2VydChbXG4gICAgICB7XG4gICAgICAgIHRhbWFuaG9fcm9kYTogdGFtYW5ob1JvZGEsXG4gICAgICAgIGFsdHVyYTogYWx0dXJhLFxuICAgICAgICBsYXJndXJhOiBsYXJndXJhLFxuICAgICAgICByZXN1bHRhZG86IHJlc3VsdGFkbyxcbiAgICAgICAgY29yOiBjb3IsXG4gICAgICB9LFxuICAgIF0pXG4gICAgLnNlbGVjdCgpXG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfVxufVxuXG4vLyBOb3ZhIGZ1bsOnw6NvIHBhcmEgc2FsdmFyIGPDoWxjdWxvcyBkbyB1c3XDoXJpbyBjb20gbGltaXRlIGRlIDEwXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2FsdmFyQ2FsY3Vsb1VzdWFyaW8oXG4gIHVzZXJJZDogc3RyaW5nLFxuICB0YW1hbmhvOiBzdHJpbmcsXG4gIGFsdHVyYTogc3RyaW5nLFxuICBsYXJndXJhOiBzdHJpbmcsXG4gIHBhY290ZTogc3RyaW5nLFxuKSB7XG4gIHRyeSB7XG4gICAgLy8gMS4gVmVyaWZpY2FyIHF1YW50b3MgY8OhbGN1bG9zIG8gdXN1w6FyaW8gasOhIHRlbVxuICAgIGNvbnN0IHsgZGF0YTogY2FsY3Vsb3MsIGVycm9yOiBjb250YXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiY2FsY3Vsb191c3Vhcmlvc1wiKVxuICAgICAgLnNlbGVjdChcImlkLCBjcmVhdGVkX2F0XCIpXG4gICAgICAuZXEoXCJ1c2VyaWRcIiwgdXNlcklkKVxuICAgICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuXG4gICAgaWYgKGNvbnRhckVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBjb250YXIgY8OhbGN1bG9zIGRvIHVzdcOhcmlvOlwiLCBjb250YXJFcnJvcilcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBjb250YXJFcnJvciB9XG4gICAgfVxuXG4gICAgLy8gMi4gU2UgasOhIHRpdmVyIDEwIG91IG1haXMsIGV4Y2x1aXIgbyBtYWlzIGFudGlnb1xuICAgIGlmIChjYWxjdWxvcyAmJiBjYWxjdWxvcy5sZW5ndGggPj0gMTApIHtcbiAgICAgIGNvbnN0IGNhbGN1bG9NYWlzQW50aWdvID0gY2FsY3Vsb3NbMF1cbiAgICAgIGNvbnN0IHsgZXJyb3I6IGRlbGV0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwiY2FsY3Vsb191c3Vhcmlvc1wiKS5kZWxldGUoKS5lcShcImlkXCIsIGNhbGN1bG9NYWlzQW50aWdvLmlkKVxuXG4gICAgICBpZiAoZGVsZXRlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gZXhjbHVpciBjw6FsY3VsbyBtYWlzIGFudGlnbzpcIiwgZGVsZXRlRXJyb3IpXG4gICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBkZWxldGVFcnJvciB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMy4gSW5zZXJpciBvIG5vdm8gY8OhbGN1bG9cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjYWxjdWxvX3VzdWFyaW9zXCIpXG4gICAgICAuaW5zZXJ0KFtcbiAgICAgICAge1xuICAgICAgICAgIHVzZXJpZDogdXNlcklkLFxuICAgICAgICAgIHRhbWFuaG86IHRhbWFuaG8sXG4gICAgICAgICAgYWx0dXJhOiBhbHR1cmEsXG4gICAgICAgICAgbGFyZ3VyYTogbGFyZ3VyYSxcbiAgICAgICAgICBwYWNvdGU6IHBhY290ZSxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9LFxuICAgICAgXSlcbiAgICAgIC5zZWxlY3QoKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBzYWx2YXIgY8OhbGN1bG8gZG8gdXN1w6FyaW86XCIsIGVycm9yKVxuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBzYWx2YXIgY8OhbGN1bG8gZG8gdXN1w6FyaW86XCIsIGVycm9yKVxuICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH1cbiAgfVxufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIG9idGVyIG9zIGPDoWxjdWxvcyBkbyB1c3XDoXJpb1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhbGN1bG9zVXN1YXJpbyh1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwiY2FsY3Vsb191c3Vhcmlvc1wiKVxuICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgLmVxKFwidXNlcmlkXCIsIHVzZXJJZClcbiAgICAub3JkZXIoXCJjcmVhdGVkX2F0XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhbGN1bG9zKHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJjYWxjdWxvc1wiKVxuICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgLmVxKFwidXNlcl9pZFwiLCB1c2VySWQpXG4gICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcblxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG59XG5cbi8vIEZ1bsOnw7VlcyBwYXJhIHBlZGlkb3NcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmlhclBlZGlkbyhcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGl0ZW1zOiBhbnlbXSxcbiAgdG90YWw6IG51bWJlcixcbiAgdGlwb0VudHJlZ2EgPSBcInJldGlyYWRhXCIsXG4gIG1ldG9kb1BhZ2FtZW50byA9IFwiY2FydGFvXCIsXG4gIGRhZG9zQWRpY2lvbmFpczogYW55ID0ge30sXG4pIHtcbiAgdHJ5IHtcbiAgICAvLyBDcmlhciBvIHBlZGlkb1xuICAgIGNvbnN0IHsgZGF0YTogcGVkaWRvLCBlcnJvcjogcGVkaWRvRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInBlZGlkb3NcIilcbiAgICAgIC5pbnNlcnQoW1xuICAgICAgICB7XG4gICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICAgIHRvdGFsOiB0b3RhbCxcbiAgICAgICAgICB0aXBvX2VudHJlZ2E6IHRpcG9FbnRyZWdhLFxuICAgICAgICAgIHBhZ2FtZW50b190aXBvOiBtZXRvZG9QYWdhbWVudG8sXG4gICAgICAgICAgc3RhdHVzOiBcInBlbmRlbnRlXCIsXG4gICAgICAgICAgZGFkb3NfYWRpY2lvbmFpczogZGFkb3NBZGljaW9uYWlzLCAvLyBBcm1hemVuYSBvIGVuZGVyZcOnbyBhbHRlcm5hdGl2byBzZSBleGlzdGlyXG4gICAgICAgIH0sXG4gICAgICBdKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmIChwZWRpZG9FcnJvcikgdGhyb3cgcGVkaWRvRXJyb3JcblxuICAgIC8vIEluc2VyaXIgb3MgaXRlbnMgZG8gcGVkaWRvXG4gICAgY29uc3QgaXRlbnMgPSBpdGVtcy5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICBwZWRpZG9faWQ6IHBlZGlkby5pZCxcbiAgICAgIHByb2R1dG9fbm9tZTogaXRlbS5ub21lLFxuICAgICAgcXVhbnRpZGFkZTogaXRlbS5xdWFudGlkYWRlLFxuICAgICAgcHJlY29fdW5pdGFyaW86IGl0ZW0ucHJlY28sXG4gICAgICByZXZlbmRlZG9yX2lkOiBpdGVtLnJldmVuZGVkb3JfaWQsXG4gICAgfSkpXG5cbiAgICBjb25zdCB7IGVycm9yOiBpdGVuc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwiaXRlbnNfcGVkaWRvXCIpLmluc2VydChpdGVucylcblxuICAgIGlmIChpdGVuc0Vycm9yKSB0aHJvdyBpdGVuc0Vycm9yXG5cbiAgICByZXR1cm4geyBkYXRhOiBwZWRpZG8sIGVycm9yOiBudWxsIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBjcmlhciBwZWRpZG86XCIsIGVycm9yKVxuICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH1cbiAgfVxufVxuXG4vLyBSZW1vdmVyIGFzIGZ1bsOnw7VlcyBnZXRDbGllbnRlQnlVc3VhcmlvSWQgZSBnYXJhbnRpckNsaWVudGUgcXVlIGVzdGF2YW0gY3JpYW5kbyB1bWEgdGFiZWxhIGNsaWVudGVzIGRlc25lY2Vzc8OhcmlhXG5cbi8vIEZ1bsOnw6NvIHBhcmEgYnVzY2FyIHBhY290ZSBiYXNlYWRvIG5vIG5vbWUgZG8gcHJvZHV0b1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhY290ZUJ5UHJvZHV0b05vbWUocHJvZHV0b05vbWU6IHN0cmluZykge1xuICB0cnkge1xuICAgIC8vIE1hcGVhciBub21lcyBkZSBwcm9kdXRvcyBwYXJhIHBhY290ZXNcbiAgICAvLyBWb2PDqiBwb2RlIGFqdXN0YXIgZXNzYSBsw7NnaWNhIGNvbmZvcm1lIHN1YSByZWdyYSBkZSBuZWfDs2Npb1xuICAgIGNvbnN0IG1hcGVhbWVudG9Qcm9kdXRvczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHtcbiAgICAgIFwiTWljcm9lc2ZlcmFzIEF6dWxcIjogMSxcbiAgICAgIFwiTWljcm9lc2ZlcmFzIFZlcm1lbGhhXCI6IDIsXG4gICAgICBcIk1pY3JvZXNmZXJhcyBWZXJkZVwiOiAzLFxuICAgICAgXCJNaWNyb2VzZmVyYXMgQW1hcmVsYVwiOiA0LFxuICAgICAgXCJNaWNyb2VzZmVyYXMgUHJldGFcIjogNSxcbiAgICAgIFwiTWljcm9lc2ZlcmFzIEJyYW5jYVwiOiA2LFxuICAgIH1cblxuICAgIC8vIFNlIGV4aXN0ZSB1bSBtYXBlYW1lbnRvIGRpcmV0bywgdXNhciBlbGVcbiAgICBpZiAobWFwZWFtZW50b1Byb2R1dG9zW3Byb2R1dG9Ob21lXSkge1xuICAgICAgcmV0dXJuIHsgZGF0YTogbWFwZWFtZW50b1Byb2R1dG9zW3Byb2R1dG9Ob21lXSwgZXJyb3I6IG51bGwgfVxuICAgIH1cblxuICAgIC8vIENhc28gY29udHLDoXJpbywgdGVudGFyIGJ1c2NhciBwb3Igbm9tZSBzaW1pbGFyXG4gICAgY29uc3QgeyBkYXRhOiBwYWNvdGVzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicGFjb3Rlc1wiKVxuICAgICAgLnNlbGVjdChcImlkLCBub21lLCBjb3JcIilcbiAgICAgIC5pbGlrZShcIm5vbWVcIiwgYCUke3Byb2R1dG9Ob21lfSVgKVxuICAgICAgLmxpbWl0KDEpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGJ1c2NhciBwYWNvdGUgcG9yIG5vbWU6XCIsIGVycm9yKVxuICAgICAgcmV0dXJuIHsgZGF0YTogMSwgZXJyb3I6IG51bGwgfSAvLyBGYWxsYmFjayBwYXJhIElEIDFcbiAgICB9XG5cbiAgICBpZiAocGFjb3RlcyAmJiBwYWNvdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7IGRhdGE6IHBhY290ZXNbMF0uaWQsIGVycm9yOiBudWxsIH1cbiAgICB9XG5cbiAgICAvLyBTZSBuw6NvIGVuY29udHJvdSBuYWRhLCB0ZW50YXIgYnVzY2FyIHBvciBjb3JcbiAgICBjb25zdCBjb3JlcyA9IFtcImF6dWxcIiwgXCJ2ZXJtZWxoYVwiLCBcInZlcmRlXCIsIFwiYW1hcmVsYVwiLCBcInByZXRhXCIsIFwiYnJhbmNhXCJdXG4gICAgZm9yIChjb25zdCBjb3Igb2YgY29yZXMpIHtcbiAgICAgIGlmIChwcm9kdXRvTm9tZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGNvcikpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwYWNvdGVQb3JDb3IsIGVycm9yOiBlcnJvckNvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbShcInBhY290ZXNcIilcbiAgICAgICAgICAuc2VsZWN0KFwiaWRcIilcbiAgICAgICAgICAuaWxpa2UoXCJjb3JcIiwgYCUke2Nvcn0lYClcbiAgICAgICAgICAubGltaXQoMSlcblxuICAgICAgICBpZiAoIWVycm9yQ29yICYmIHBhY290ZVBvckNvciAmJiBwYWNvdGVQb3JDb3IubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybiB7IGRhdGE6IHBhY290ZVBvckNvclswXS5pZCwgZXJyb3I6IG51bGwgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgZmluYWxcbiAgICByZXR1cm4geyBkYXRhOiAxLCBlcnJvcjogbnVsbCB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gYnVzY2FyIHBhY290ZTpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHsgZGF0YTogMSwgZXJyb3I6IG51bGwgfVxuICB9XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgYnVzY2FyIHVtIHBhY290ZSB2w6FsaWRvIChwb3IgZW5xdWFudG8gcmV0b3JuYSBvIHByaW1laXJvIGRpc3BvbsOtdmVsKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhY290ZVZhbGlkbygpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IHBhY290ZXMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwicGFjb3Rlc1wiKS5zZWxlY3QoXCJpZFwiKS5saW1pdCgxKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgcGFjb3RlOlwiLCBlcnJvcilcbiAgICAgIHJldHVybiAxIC8vIEZhbGxiYWNrIHBhcmEgSUQgMVxuICAgIH1cblxuICAgIHJldHVybiBwYWNvdGVzICYmIHBhY290ZXMubGVuZ3RoID4gMCA/IHBhY290ZXNbMF0uaWQgOiAxXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gYnVzY2FyIHBhY290ZTpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIDEgLy8gRmFsbGJhY2sgcGFyYSBJRCAxXG4gIH1cbn1cblxuLy8gRnVuw6fDo28gcGFyYSByZWdpc3RyYXIgbXVkYW7Dp2EgZGUgc3RhdHVzIG5vIGhpc3TDs3JpY29cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RyYXJNdWRhbmNhU3RhdHVzKFxuICBwZWRpZG9JZDogbnVtYmVyLFxuICBzdGF0dXNBbnRlcmlvcjogc3RyaW5nIHwgbnVsbCxcbiAgc3RhdHVzTm92bzogc3RyaW5nLFxuICBvYnNlcnZhY2FvPzogc3RyaW5nLFxuICB1cGRhdGVkQnk/OiBudW1iZXIsXG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwZWRpZG9faGlzdG9yaWNvX3N0YXR1c1wiKVxuICAgICAgLmluc2VydChbXG4gICAgICAgIHtcbiAgICAgICAgICBwZWRpZG9faWQ6IHBlZGlkb0lkLFxuICAgICAgICAgIHN0YXR1c19hbnRlcmlvcjogc3RhdHVzQW50ZXJpb3IsXG4gICAgICAgICAgc3RhdHVzX25vdm86IHN0YXR1c05vdm8sXG4gICAgICAgICAgb2JzZXJ2YWNhbzogb2JzZXJ2YWNhbyxcbiAgICAgICAgICB1cGRhdGVkX2J5OiB1cGRhdGVkQnksXG4gICAgICAgIH0sXG4gICAgICBdKVxuICAgICAgLnNlbGVjdCgpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIHJlZ2lzdHJhciBtdWRhbsOnYSBkZSBzdGF0dXM6XCIsIGVycm9yKVxuICAgIH1cblxuICAgIHJldHVybiB7IGRhdGEsIGVycm9yIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyByZWdpc3RyYXIgbXVkYW7Dp2EgZGUgc3RhdHVzOlwiLCBlcnJvcilcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9XG4gIH1cbn1cblxuLy8gU3Vic3RpdHVpciBhIGZ1bsOnw6NvIGNyaWFyUGVkaWRvTm92byBwb3IgZXN0YSB2ZXJzw6NvIGNvcnJpZ2lkYTpcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmlhclBlZGlkb05vdm8oXG4gIHVzZXJJZDogc3RyaW5nLFxuICByZXZlbmRlZG9ySWQ6IG51bWJlcixcbiAgaXRlbXM6IGFueVtdLFxuICB2YWxvclRvdGFsOiBudW1iZXIsXG4gIGZyZXRlOiBudW1iZXIsXG4gIHRpcG9FbnRyZWdhOiBzdHJpbmcsXG4gIG1ldG9kb1BhZ2FtZW50bzogc3RyaW5nLFxuKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJJbmljaWFuZG8gY3JpYcOnw6NvIGRvIHBlZGlkbyBwYXJhIHVzdcOhcmlvOlwiLCB1c2VySWQpXG5cbiAgICAvLyBDb252ZXJ0ZXIgdXNlcklkIHBhcmEgbsO6bWVyb1xuICAgIGNvbnN0IGNsaWVudGVJZCA9IE51bWJlci5wYXJzZUludCh1c2VySWQpXG5cbiAgICAvLyBCdXNjYXIgbyB1c3VhcmlvX2lkIGRvIHJldmVuZGVkb3IgYmFzZWFkbyBubyByZXZlbmRlZG9yX2lkXG4gICAgY29uc3QgeyBkYXRhOiByZXZlbmRlZG9yVXN1YXJpb0lkLCBlcnJvcjogcmV2ZW5kZWRvckVycm9yIH0gPSBhd2FpdCBnZXRVc3VhcmlvSWRSZXZlbmRlZG9yKHJldmVuZGVkb3JJZClcblxuICAgIGlmIChyZXZlbmRlZG9yRXJyb3IgfHwgIXJldmVuZGVkb3JVc3VhcmlvSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm8gYW8gYnVzY2FyIHJldmVuZGVkb3I6IFwiICsgKHJldmVuZGVkb3JFcnJvcj8ubWVzc2FnZSB8fCBcIlJldmVuZGVkb3IgbsOjbyBlbmNvbnRyYWRvXCIpKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiQ2xpZW50ZSBJRDpcIiwgY2xpZW50ZUlkKVxuICAgIGNvbnNvbGUubG9nKFwiUmV2ZW5kZWRvciBJRDpcIiwgcmV2ZW5kZWRvcklkKVxuICAgIGNvbnNvbGUubG9nKFwiUmV2ZW5kZWRvciBVc3VhcmlvIElEOlwiLCByZXZlbmRlZG9yVXN1YXJpb0lkKVxuXG4gICAgLy8gR2VyYXIgbsO6bWVybyBkbyBwZWRpZG8gw7puaWNvXG4gICAgY29uc3QgbnVtZXJvUGVkaWRvID0gYFBFRC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDQpLnRvVXBwZXJDYXNlKCl9YFxuXG4gICAgLy8gRGVmaW5pciBzdGF0dXMgaW5pY2lhbCBiYXNlYWRvIG5vIHRpcG8gZGUgZW50cmVnYVxuICAgIGNvbnN0IHN0YXR1c0luaWNpYWwgPSB0aXBvRW50cmVnYSA9PT0gXCJyZXRpcmFkYVwiID8gXCJhZ3VhcmRhbmRvX3ByZXBhcmFjYW9cIiA6IFwiYWd1YXJkYW5kb19hY2VpdGVcIlxuXG4gICAgLy8gQ3JpYXIgbyBwZWRpZG8gdXNhbmRvIG8gc2NoZW1hIGNvcnJldG9cbiAgICBjb25zdCB7IGRhdGE6IHBlZGlkbywgZXJyb3I6IHBlZGlkb0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwZWRpZG9zXCIpXG4gICAgICAuaW5zZXJ0KFtcbiAgICAgICAge1xuICAgICAgICAgIGNsaWVudGVfaWQ6IGNsaWVudGVJZCwgLy8gSUQgZG8gdXN1w6FyaW8gcXVlIGZleiBhIGNvbXByYVxuICAgICAgICAgIHJldmVuZGVkb3JfaWQ6IHJldmVuZGVkb3JVc3VhcmlvSWQsIC8vIElEIGRvIHVzdcOhcmlvIHJldmVuZGVkb3IgKGRhIHRhYmVsYSB1c3VhcmlvcylcbiAgICAgICAgICBudW1lcm86IG51bWVyb1BlZGlkbyxcbiAgICAgICAgICBmcmV0ZTogZnJldGUsXG4gICAgICAgICAgdmFsb3JfdG90YWw6IHZhbG9yVG90YWwsXG4gICAgICAgICAgcGFnYW1lbnRvX3RpcG86IG1ldG9kb1BhZ2FtZW50byxcbiAgICAgICAgICB0aXBvX2VudHJlZ2E6IHRpcG9FbnRyZWdhLFxuICAgICAgICAgIHN0YXR1czogXCJwYWdvXCIsIC8vIFN0YXR1cyBkZSBwYWdhbWVudG9cbiAgICAgICAgICBzdGF0dXNfZGV0YWxoYWRvOiBzdGF0dXNJbmljaWFsLCAvLyBTdGF0dXMgZGV0YWxoYWRvIGJhc2VhZG8gbm8gdGlwbyBkZSBlbnRyZWdhXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgaWYgKHBlZGlkb0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBjcmlhciBwZWRpZG86XCIsIHBlZGlkb0Vycm9yKVxuICAgICAgdGhyb3cgcGVkaWRvRXJyb3JcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIlBlZGlkbyBjcmlhZG8gY29tIHN1Y2Vzc286XCIsIHBlZGlkbylcblxuICAgIC8vIFJlZ2lzdHJhciBvIHN0YXR1cyBpbmljaWFsIG5vIGhpc3TDs3JpY29cbiAgICBhd2FpdCByZWdpc3RyYXJNdWRhbmNhU3RhdHVzKHBlZGlkby5pZCwgbnVsbCwgc3RhdHVzSW5pY2lhbCwgXCJQZWRpZG8gY3JpYWRvXCIsIG51bGwpXG5cbiAgICAvLyBQcmVwYXJhciBpdGVucyBwYXJhIGluc2Vyw6fDo28gY29tIHBhY290ZV9pZCBjb3JyZXRvIHBhcmEgY2FkYSBpdGVtXG4gICAgY29uc3QgaXRlbnNQYXJhSW5zZXJpciA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgaXRlbXMubWFwKGFzeW5jIChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAvLyBCdXNjYXIgbyBwYWNvdGVfaWQgY29ycmV0byBiYXNlYWRvIG5vIG5vbWUgZG8gcHJvZHV0b1xuICAgICAgICBjb25zdCB7IGRhdGE6IHBhY290ZUlkIH0gPSBhd2FpdCBnZXRQYWNvdGVCeVByb2R1dG9Ob21lKGl0ZW0ubm9tZSlcblxuICAgICAgICBjb25zdCBpdGVtUGFyYUluc2VyaXIgPSB7XG4gICAgICAgICAgcGVkaWRvX2lkOiBwZWRpZG8uaWQsXG4gICAgICAgICAgcGFjb3RlX2lkOiBwYWNvdGVJZCxcbiAgICAgICAgICBxdGQ6IE51bWJlcihpdGVtLnF1YW50aWRhZGUpIHx8IDAsXG4gICAgICAgICAgdmFsb3JfdW5pdGFyaW86IE51bWJlcihpdGVtLnByZWNvKSB8fCAwLFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coYEl0ZW0gJHtpbmRleCArIDF9IHByZXBhcmFkbzpgLCBpdGVtUGFyYUluc2VyaXIpXG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9kdXRvOiAke2l0ZW0ubm9tZX0gLT4gUGFjb3RlIElEOiAke3BhY290ZUlkfWApXG4gICAgICAgIHJldHVybiBpdGVtUGFyYUluc2VyaXJcbiAgICAgIH0pLFxuICAgIClcblxuICAgIGNvbnNvbGUubG9nKFwiVG9kb3Mgb3MgaXRlbnMgcHJlcGFyYWRvczpcIiwgaXRlbnNQYXJhSW5zZXJpcilcblxuICAgIC8vIEluc2VyaXIgb3MgaXRlbnMgZG8gcGVkaWRvXG4gICAgY29uc3QgeyBkYXRhOiBpdGVuc0luc2VyaWRvcywgZXJyb3I6IGl0ZW5zRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInBlZGlkb19pdGVuc1wiKVxuICAgICAgLmluc2VydChpdGVuc1BhcmFJbnNlcmlyKVxuICAgICAgLnNlbGVjdCgpXG5cbiAgICBpZiAoaXRlbnNFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gZGV0YWxoYWRvIGFvIGluc2VyaXIgaXRlbnMgZG8gcGVkaWRvOlwiLCBpdGVuc0Vycm9yKVxuICAgICAgY29uc29sZS5lcnJvcihcIkRhZG9zIHF1ZSB0ZW50YW1vcyBpbnNlcmlyOlwiLCBpdGVuc1BhcmFJbnNlcmlyKVxuICAgICAgdGhyb3cgaXRlbnNFcnJvclxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiSXRlbnMgaW5zZXJpZG9zIGNvbSBzdWNlc3NvOlwiLCBpdGVuc0luc2VyaWRvcylcblxuICAgIHJldHVybiB7IGRhdGE6IHBlZGlkbywgZXJyb3I6IG51bGwgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGNyaWFyIHBlZGlkbzpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfVxuICB9XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgYXR1YWxpemFyIHN0YXR1cyBkbyBwZWRpZG9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdHVhbGl6YXJTdGF0dXNQZWRpZG8oXG4gIHBlZGlkb0lkOiBudW1iZXIsXG4gIG5vdm9TdGF0dXM6IHN0cmluZyxcbiAgZGF0YUVzdGltYWRhPzogc3RyaW5nLFxuICBvYnNlcnZhY29lcz86IHN0cmluZyxcbiAgdXBkYXRlZEJ5PzogbnVtYmVyLFxuKSB7XG4gIHRyeSB7XG4gICAgLy8gUHJpbWVpcm8sIGJ1c2NhciBvIHN0YXR1cyBhdHVhbFxuICAgIGNvbnN0IHsgZGF0YTogcGVkaWRvQXR1YWwsIGVycm9yOiBlcnJvckJ1c2NhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwZWRpZG9zXCIpXG4gICAgICAuc2VsZWN0KFwic3RhdHVzX2RldGFsaGFkb1wiKVxuICAgICAgLmVxKFwiaWRcIiwgcGVkaWRvSWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmIChlcnJvckJ1c2NhKSB7XG4gICAgICB0aHJvdyBlcnJvckJ1c2NhXG4gICAgfVxuXG4gICAgLy8gUHJlcGFyYXIgZGFkb3MgcGFyYSBhdHVhbGl6YcOnw6NvXG4gICAgY29uc3QgZGFkb3NBdHVhbGl6YWNhbzogYW55ID0ge1xuICAgICAgc3RhdHVzX2RldGFsaGFkbzogbm92b1N0YXR1cyxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9XG5cbiAgICBpZiAoZGF0YUVzdGltYWRhKSB7XG4gICAgICBkYWRvc0F0dWFsaXphY2FvLmRhdGFfZXN0aW1hZGFfZW50cmVnYSA9IGRhdGFFc3RpbWFkYVxuICAgIH1cblxuICAgIGlmIChvYnNlcnZhY29lcykge1xuICAgICAgZGFkb3NBdHVhbGl6YWNhby5vYnNlcnZhY29lc19yZXZlbmRlZG9yID0gb2JzZXJ2YWNvZXNcbiAgICB9XG5cbiAgICAvLyBTZSBvIHN0YXR1cyBmb3IgXCJlbnRyZWd1ZVwiIG91IFwicmV0aXJhZG9cIiwgZGVmaW5pciBkYXRhIHJlYWxcbiAgICBpZiAobm92b1N0YXR1cyA9PT0gXCJlbnRyZWd1ZVwiIHx8IG5vdm9TdGF0dXMgPT09IFwicmV0aXJhZG9cIikge1xuICAgICAgZGFkb3NBdHVhbGl6YWNhby5kYXRhX2VudHJlZ2FfcmVhbCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH1cblxuICAgIC8vIEF0dWFsaXphciBvIHBlZGlkb1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oXCJwZWRpZG9zXCIpLnVwZGF0ZShkYWRvc0F0dWFsaXphY2FvKS5lcShcImlkXCIsIHBlZGlkb0lkKS5zZWxlY3QoKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIC8vIFJlZ2lzdHJhciBtdWRhbsOnYSBubyBoaXN0w7NyaWNvXG4gICAgYXdhaXQgcmVnaXN0cmFyTXVkYW5jYVN0YXR1cyhwZWRpZG9JZCwgcGVkaWRvQXR1YWwuc3RhdHVzX2RldGFsaGFkbywgbm92b1N0YXR1cywgb2JzZXJ2YWNvZXMsIHVwZGF0ZWRCeSlcblxuICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBhdHVhbGl6YXIgc3RhdHVzIGRvIHBlZGlkbzpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQZWRpZG9zKHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJwZWRpZG9zXCIpXG4gICAgLnNlbGVjdChgXG4gICAgICAqLFxuICAgICAgaXRlbnNfcGVkaWRvOml0ZW5zX3BlZGlkbyhcbiAgICAgICAgKixcbiAgICAgICAgcHJvZHV0bzpwcm9kdXRvcygqKVxuICAgICAgKVxuICAgIGApXG4gICAgLmVxKFwidXNlcl9pZFwiLCB1c2VySWQpXG4gICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcblxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG59XG5cbi8vIFN1YnN0aXR1aXIgYSBmdW7Dp8OjbyBnZXRQZWRpZG9zQ2xpZW50ZSBwb3IgZXN0YSB2ZXJzw6NvIGNvcnJpZ2lkYTpcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQZWRpZG9zQ2xpZW50ZSh1c2VySWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiQnVzY2FuZG8gcGVkaWRvcyBwYXJhIHVzdcOhcmlvOlwiLCB1c2VySWQpXG5cbiAgICAvLyBDb252ZXJ0ZXIgdXNlcklkIHBhcmEgbsO6bWVyb1xuICAgIGNvbnN0IGNsaWVudGVJZCA9IE51bWJlci5wYXJzZUludCh1c2VySWQpXG5cbiAgICAvLyBCdXNjYXIgcGVkaWRvcyB1c2FuZG8gbyBjbGllbnRlX2lkIGRpcmV0YW1lbnRlXG4gICAgY29uc3QgeyBkYXRhOiBwZWRpZG9zLCBlcnJvcjogcGVkaWRvc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwZWRpZG9zXCIpXG4gICAgICAuc2VsZWN0KGBcbiAgICAgICAgKixcbiAgICAgICAgcGVkaWRvX2l0ZW5zOnBlZGlkb19pdGVucyhcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwZWRpZG9faWQsXG4gICAgICAgICAgcGFjb3RlX2lkLFxuICAgICAgICAgIHF0ZCxcbiAgICAgICAgICB2YWxvcl91bml0YXJpbyxcbiAgICAgICAgICBwYWNvdGVzOnBhY290ZXMoaWQsIGRlc2NyaWNhbywgY29yLCBpbWFnZW0pXG4gICAgICAgIClcbiAgICAgIGApXG4gICAgICAuZXEoXCJjbGllbnRlX2lkXCIsIGNsaWVudGVJZCkgLy8gQ29ycmlnaWRvOiBjbGllbnRlX2lkIGVtIHZleiBkZSBjbGllbnRfaWRcbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICBjb25zb2xlLmxvZyhcIlBlZGlkb3MgZW5jb250cmFkb3M6XCIsIHBlZGlkb3M/Lmxlbmd0aCB8fCAwKVxuXG4gICAgaWYgKHBlZGlkb3NFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gYnVzY2FyIHBlZGlkb3M6XCIsIHBlZGlkb3NFcnJvcilcbiAgICAgIHRocm93IHBlZGlkb3NFcnJvclxuICAgIH1cblxuICAgIHJldHVybiB7IGRhdGE6IHBlZGlkb3MgfHwgW10sIGVycm9yOiBudWxsIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgcGVkaWRvcyBkbyBjbGllbnRlOlwiLCBlcnJvcilcbiAgICByZXR1cm4geyBkYXRhOiBbXSwgZXJyb3IgfVxuICB9XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgYnVzY2FyIHRhbWFuaG9zIGRlIHJvZGFzIGRpc3BvbsOtdmVpc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRhbWFuaG9zKCkge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwidGFtYW5ob3NcIikuc2VsZWN0KFwiaWQsIG5vbWVcIikub3JkZXIoXCJub21lXCIsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfVxufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIGJ1c2NhciBhbHR1cmFzIGRpc3BvbsOtdmVpcyBjb20gYmFzZSBubyB0YW1hbmhvIGRhIHJvZGFcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbHR1cmFzQnlUYW1hbmhvSWQodGFtYW5ob0lkOiBzdHJpbmcpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcImFsdHVyYXNcIilcbiAgICAuc2VsZWN0KFwiaWQsIHZhbG9yXCIpXG4gICAgLmVxKFwidGFtYW5ob19pZFwiLCB0YW1hbmhvSWQpXG4gICAgLm9yZGVyKFwidmFsb3JcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSlcblxuICAvLyBSZW1vdmVyIGR1cGxpY2F0YXMgYmFzZWFkbyBubyB2YWxvclxuICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCB1bmlxdWVBbHR1cmFzID0gZGF0YS5yZWR1Y2UoKGFjYzogYW55W10sIGN1cnJlbnQpID0+IHtcbiAgICAgIGNvbnN0IGV4aXN0cyA9IGFjYy5maW5kKGl0ZW0gPT4gaXRlbS52YWxvciA9PT0gY3VycmVudC52YWxvcilcbiAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgIGFjYy5wdXNoKGN1cnJlbnQpXG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjXG4gICAgfSwgW10pXG4gICAgXG4gICAgcmV0dXJuIHsgZGF0YTogdW5pcXVlQWx0dXJhcywgZXJyb3IgfVxuICB9XG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfVxufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIGJ1c2NhciBsYXJndXJhcyBiYXNlZCBvbiBhbHR1cmFfaWRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMYXJndXJhc0J5QWx0dXJhSWQoYWx0dXJhSWQ6IHN0cmluZykge1xuICBjb25zb2xlLmxvZyhcIvCflI0gQnVzY2FuZG8gbGFyZ3VyYXMgcGFyYSBhbHR1cmFJZDpcIiwgYWx0dXJhSWQpXG4gIFxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwibGFyZ3VyYXNcIilcbiAgICAuc2VsZWN0KFwiaWQsIHZhbG9yXCIpXG4gICAgLmVxKFwiYWx0dXJhX2lkXCIsIGFsdHVyYUlkKVxuICAgIC5vcmRlcihcInZhbG9yXCIsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG5cbiAgLy8gUmVtb3ZlciBkdXBsaWNhdGFzIGJhc2VhZG8gbm8gdmFsb3JcbiAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgdW5pcXVlTGFyZ3VyYXMgPSBkYXRhLnJlZHVjZSgoYWNjOiBhbnlbXSwgY3VycmVudCkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RzID0gYWNjLmZpbmQoaXRlbSA9PiBpdGVtLnZhbG9yID09PSBjdXJyZW50LnZhbG9yKVxuICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgYWNjLnB1c2goY3VycmVudClcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCBbXSlcbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIvCfk48gTGFyZ3VyYXMgw7puaWNhcyBlbmNvbnRyYWRhczpcIiwgeyBkYXRhOiB1bmlxdWVMYXJndXJhcywgZXJyb3IgfSlcbiAgICByZXR1cm4geyBkYXRhOiB1bmlxdWVMYXJndXJhcywgZXJyb3IgfVxuICB9XG5cbiAgY29uc29sZS5sb2coXCLwn5OPIExhcmd1cmFzIGVuY29udHJhZGFzOlwiLCB7IGRhdGEsIGVycm9yIH0pXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH1cbn1cblxuLy8gRnVuw6fDo28gcGFyYSBidXNjYXIgcGFja2FnZSBkZXRhaWxzIGJ5IGxhcmd1cmFfaWRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYWNvdGVCeUxhcmd1cmFJZChsYXJndXJhSWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBCdXNjYW5kbyBwYWNvdGUgcGFyYSBsYXJndXJhSWQ6XCIsIGxhcmd1cmFJZClcbiAgICBcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwicGFjb3Rlc1wiKS5zZWxlY3QoXCIqXCIpLmVxKFwibGFyZ3VyYV9pZFwiLCBsYXJndXJhSWQpLnNpbmdsZSgpXG5cbiAgICBjb25zb2xlLmxvZyhcIvCfk6YgUmVzdWx0YWRvIGRhIGJ1c2NhOlwiLCB7IGRhdGEsIGVycm9yIH0pXG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm8gYW8gYnVzY2FyIHBhY290ZSBwb3IgbGFyZ3VyYV9pZDpcIiwgZXJyb3IpXG4gICAgICAvLyBGYWxsYmFjazogcmV0b3JuYXIgdW0gcGFjb3RlIHBhZHLDo29cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogMSxcbiAgICAgICAgICBub21lOiBcIkxUUDYwXCIsXG4gICAgICAgICAgY29yOiBcIiM0QTQ5NTNcIixcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk5lbmh1bSBwYWNvdGUgZW5jb250cmFkbyBwYXJhIGxhcmd1cmFfaWQ6XCIsIGxhcmd1cmFJZClcbiAgICAgIC8vIEZhbGxiYWNrOiByZXRvcm5hciB1bSBwYWNvdGUgcGFkcsOjb1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgIG5vbWU6IFwiTFRQNjBcIixcbiAgICAgICAgICBjb3I6IFwiIzRBNDk1M1wiLFxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBanVzdGFyIGRhZG9zIHNlIG5vbWUgZXN0aXZlciBudWxsXG4gICAgY29uc3QgcGFjb3RlQWp1c3RhZG8gPSB7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIG5vbWU6IGRhdGEubm9tZSB8fCBkYXRhLmRlc2NyaWNhbyB8fCBcIkxUUDYwXCIsXG4gICAgICBjb3I6IGRhdGEuY29yIHx8IFwiIzk0OTY5OFwiIC8vIENvciBwYWRyw6NvIGJhc2VhZGEgbm9zIGRhZG9zIGV4aXN0ZW50ZXNcbiAgICB9XG5cbiAgICByZXR1cm4geyBkYXRhOiBwYWNvdGVBanVzdGFkbywgZXJyb3I6IG51bGwgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGJ1c2NhciBwYWNvdGU6XCIsIGVycm9yKVxuICAgIC8vIEZhbGxiYWNrOiByZXRvcm5hciB1bSBwYWNvdGUgcGFkcsOjb1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICBub21lOiBcIkxUUDYwXCIsXG4gICAgICAgIGNvcjogXCIjNEE0OTUzXCIsXG4gICAgICB9LFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09IEZVTsOHw5VFUyBETyBDQVJSSU5ITyA9PT09PT09PT09PT09PT09PT09PVxuXG4vLyBCdXNjYXIgY2FycmluaG8gZG8gdXN1w6FyaW9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXJyaW5ob1VzdWFyaW8odXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcImNhcnJpbmhvX3VzdWFyaW9zXCIpXG4gICAgLnNlbGVjdChcIipcIilcbiAgICAuZXEoXCJ1c2VyX2lkXCIsIHVzZXJJZClcbiAgICAub3JkZXIoXCJjcmVhdGVkX2F0XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH1cbn1cblxuLy8gQWRpY2lvbmFyIGl0ZW0gYW8gY2FycmluaG9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGljaW9uYXJJdGVtQ2FycmluaG8odXNlcklkOiBzdHJpbmcsIHByb2R1dG9Ob21lOiBzdHJpbmcsIHF1YW50aWRhZGUgPSA1LCBpbWFnZW0/OiBzdHJpbmcpIHtcbiAgLy8gRW5zdXJlIHF1YW50aXR5IGlzIGEgbXVsdGlwbGUgb2YgNSBhbmQgYXQgbGVhc3QgNVxuICBjb25zdCBhZGp1c3RlZFF1YW50aXR5ID0gTWF0aC5tYXgoTWF0aC5yb3VuZChxdWFudGlkYWRlIC8gNSkgKiA1LCA1KVxuXG4gIC8vIFZlcmlmaWNhciBzZSBvIGl0ZW0gasOhIGV4aXN0ZSBubyBjYXJyaW5ob1xuICBjb25zdCB7IGRhdGE6IGl0ZW1FeGlzdGVudGUsIGVycm9yOiBlcnJvckJ1c2NhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwiY2FycmluaG9fdXN1YXJpb3NcIilcbiAgICAuc2VsZWN0KFwiKlwiKVxuICAgIC5lcShcInVzZXJfaWRcIiwgdXNlcklkKVxuICAgIC5lcShcInByb2R1dG9fbm9tZVwiLCBwcm9kdXRvTm9tZSlcbiAgICAuc2luZ2xlKClcblxuICBpZiAoZXJyb3JCdXNjYSAmJiBlcnJvckJ1c2NhLmNvZGUgIT09IFwiUEdSU1QxMTZcIikge1xuICAgIC8vIFBHUlNUMTE2ID0gTm8gcm93cyBmb3VuZCAoZXNwZXJhZG8gc2UgaXRlbSBuw6NvIGV4aXN0ZSlcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogZXJyb3JCdXNjYSB9XG4gIH1cblxuICBpZiAoaXRlbUV4aXN0ZW50ZSkge1xuICAgIC8vIEl0ZW0gasOhIGV4aXN0ZSwgYWRpY2lvbmFyIDUgdW5pZGFkZXNcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjYXJyaW5ob191c3Vhcmlvc1wiKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIHF1YW50aWRhZGU6IGl0ZW1FeGlzdGVudGUucXVhbnRpZGFkZSArIDUsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH0pXG4gICAgICAuZXEoXCJpZFwiLCBpdGVtRXhpc3RlbnRlLmlkKVxuICAgICAgLnNlbGVjdCgpXG5cbiAgICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlbSBuw6NvIGV4aXN0ZSwgY3JpYXIgbm92byBjb20gcXVhbnRpZGFkZSBhanVzdGFkYVxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNhcnJpbmhvX3VzdWFyaW9zXCIpXG4gICAgICAuaW5zZXJ0KFtcbiAgICAgICAge1xuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICBwcm9kdXRvX25vbWU6IHByb2R1dG9Ob21lLFxuICAgICAgICAgIHF1YW50aWRhZGU6IGFkanVzdGVkUXVhbnRpdHksXG4gICAgICAgICAgaW1hZ2VtOiBpbWFnZW0sXG4gICAgICAgIH0sXG4gICAgICBdKVxuICAgICAgLnNlbGVjdCgpXG5cbiAgICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG4gIH1cbn1cblxuLy8gQXR1YWxpemFyIHF1YW50aWRhZGUgZGUgaXRlbSBubyBjYXJyaW5ob1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF0dWFsaXphclF1YW50aWRhZGVDYXJyaW5obyh1c2VySWQ6IHN0cmluZywgcHJvZHV0b05vbWU6IHN0cmluZywgcXVhbnRpZGFkZTogbnVtYmVyKSB7XG4gIC8vIEVuc3VyZSBxdWFudGl0eSBpcyBhIG11bHRpcGxlIG9mIDUgYW5kIGF0IGxlYXN0IDVcbiAgY29uc3QgYWRqdXN0ZWRRdWFudGl0eSA9IE1hdGgubWF4KE1hdGgucm91bmQocXVhbnRpZGFkZSAvIDUpICogNSwgNSlcblxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwiY2FycmluaG9fdXN1YXJpb3NcIilcbiAgICAudXBkYXRlKHtcbiAgICAgIHF1YW50aWRhZGU6IGFkanVzdGVkUXVhbnRpdHksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSlcbiAgICAuZXEoXCJ1c2VyX2lkXCIsIHVzZXJJZClcbiAgICAuZXEoXCJwcm9kdXRvX25vbWVcIiwgcHJvZHV0b05vbWUpXG4gICAgLnNlbGVjdCgpXG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfVxufVxuXG4vLyBSZW1vdmVyIGl0ZW0gZG8gY2FycmluaG9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVySXRlbUNhcnJpbmhvKHVzZXJJZDogc3RyaW5nLCBwcm9kdXRvTm9tZTogc3RyaW5nKSB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJjYXJyaW5ob191c3Vhcmlvc1wiKVxuICAgIC5kZWxldGUoKVxuICAgIC5lcShcInVzZXJfaWRcIiwgdXNlcklkKVxuICAgIC5lcShcInByb2R1dG9fbm9tZVwiLCBwcm9kdXRvTm9tZSlcblxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG59XG5cbi8vIExpbXBhciBjYXJyaW5obyBkbyB1c3XDoXJpb1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpbXBhckNhcnJpbmhvVXN1YXJpbyh1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwiY2FycmluaG9fdXN1YXJpb3NcIikuZGVsZXRlKCkuZXEoXCJ1c2VyX2lkXCIsIHVzZXJJZClcblxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG59XG5cbi8vIEF0dWFsaXphciBjYXJyaW5obyBjb21wbGV0byBkbyB1c3XDoXJpb1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF0dWFsaXphckNhcnJpbmhvVXN1YXJpbyh1c2VySWQ6IHN0cmluZywgaXRlbXM6IGFueVtdKSB7XG4gIHRyeSB7XG4gICAgLy8gUHJpbWVpcm8sIGxpbXBhciBvIGNhcnJpbmhvIGF0dWFsXG4gICAgYXdhaXQgbGltcGFyQ2FycmluaG9Vc3VhcmlvKHVzZXJJZClcbiAgICBcbiAgICAvLyBTZSBuw6NvIGjDoSBpdGVucywgYXBlbmFzIHJldG9ybmFyIHN1Y2Vzc29cbiAgICBpZiAoIWl0ZW1zIHx8IGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJbnNlcmlyIHRvZG9zIG9zIG5vdm9zIGl0ZW5zXG4gICAgY29uc3QgaXRlbnNQYXJhSW5zZXJpciA9IGl0ZW1zLm1hcChpdGVtID0+ICh7XG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICBwcm9kdXRvX25vbWU6IGl0ZW0ubm9tZSxcbiAgICAgIHF1YW50aWRhZGU6IGl0ZW0ucXVhbnRpZGFkZSxcbiAgICAgIGltYWdlbTogaXRlbS5pbWFnZW0sXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KSlcbiAgICBcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjYXJyaW5ob191c3Vhcmlvc1wiKVxuICAgICAgLmluc2VydChpdGVuc1BhcmFJbnNlcmlyKVxuICAgICAgLnNlbGVjdCgpXG4gICAgXG4gICAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGF0dWFsaXphciBjYXJyaW5obzpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09IEZVTsOHw5VFUyBERSBSRVZFTkRFRE9SRVMgRSBFU1RPUVVFID09PT09PT09PT09PT09PT09PT09XG5cbi8vIEJ1c2NhciByZXZlbmRlZG9yZXMgcXVlIHBvc3N1ZW0gdW0gcHJvZHV0byBlc3BlY8OtZmljbyBlbSBlc3RvcXVlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmV2ZW5kZWRvcmVzQ29tUHJvZHV0byhwcm9kdXRvTm9tZTogc3RyaW5nKSB7XG4gIC8vIFVzYW5kbyBKT0lOIG1hbnVhbCBlbSB2ZXogZGUgcmVsYWNpb25hbWVudG9cbiAgY29uc3QgeyBkYXRhOiBlc3RvcXVlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcInJldmVuZGVkb3JfZXN0b3F1ZVwiKVxuICAgIC5zZWxlY3QoYFxuICAgICAgaWQsXG4gICAgICByZXZlbmRlZG9yX2lkLFxuICAgICAgcHJvZHV0byxcbiAgICAgIHF1YW50aWRhZGUsXG4gICAgICBwcmVjbyxcbiAgICAgIHN0YXR1c1xuICAgIGApXG4gICAgLmVxKFwicHJvZHV0b1wiLCBwcm9kdXRvTm9tZSlcbiAgICAuZ3QoXCJxdWFudGlkYWRlXCIsIDApIC8vIEFwZW5hcyBjb20gZXN0b3F1ZSBkaXNwb27DrXZlbFxuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH1cbiAgfVxuXG4gIC8vIEJ1c2NhciBpbmZvcm1hw6fDtWVzIGRvcyByZXZlbmRlZG9yZXNcbiAgY29uc3QgcmV2ZW5kZWRvcklkcyA9IGVzdG9xdWU/Lm1hcCgoaXRlbSkgPT4gaXRlbS5yZXZlbmRlZG9yX2lkKSB8fCBbXVxuXG4gIGlmIChyZXZlbmRlZG9ySWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7IGRhdGE6IFtdLCBlcnJvcjogbnVsbCB9XG4gIH1cblxuICBjb25zdCB7IGRhdGE6IHJldmVuZGVkb3JlcywgZXJyb3I6IHJldmVuZGVkb3Jlc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwicmV2ZW5kZWRvcmVzXCIpXG4gICAgLnNlbGVjdChgXG4gICAgICBpZCxcbiAgICAgIHVzdWFyaW9faWQsXG4gICAgICBsb2phLFxuICAgICAgY2lkYWRlLFxuICAgICAgdWYsXG4gICAgICBmcmV0ZSxcbiAgICAgIHZlbmRhcyxcbiAgICAgIHN0YXR1c1xuICAgIGApXG4gICAgLmluKFwiaWRcIiwgcmV2ZW5kZWRvcklkcylcblxuICBpZiAocmV2ZW5kZWRvcmVzRXJyb3IpIHtcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogcmV2ZW5kZWRvcmVzRXJyb3IgfVxuICB9XG5cbiAgLy8gQ29tYmluYXIgb3MgZGFkb3NcbiAgY29uc3QgcmVzdWx0YWRvID1cbiAgICBlc3RvcXVlXG4gICAgICA/Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCByZXZlbmRlZG9yID0gcmV2ZW5kZWRvcmVzPy5maW5kKChyKSA9PiByLmlkID09PSBpdGVtLnJldmVuZGVkb3JfaWQpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICByZXZlbmRlZG9yOiByZXZlbmRlZG9yIHx8IG51bGwsXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnJldmVuZGVkb3IgIT09IG51bGwpIHx8IFtdXG5cbiAgLy8gT3JkZW5hciBwb3IgcHJlw6dvXG4gIHJlc3VsdGFkby5zb3J0KChhLCBiKSA9PiBhLnByZWNvIC0gYi5wcmVjbylcblxuICByZXR1cm4geyBkYXRhOiByZXN1bHRhZG8sIGVycm9yOiBudWxsIH1cbn1cblxuLy8gQnVzY2FyIHJldmVuZGVkb3JlcyBwYXJhIG3Dumx0aXBsb3MgcHJvZHV0b3NcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZXZlbmRlZG9yZXNQYXJhUHJvZHV0b3MocHJvZHV0b05vbWVzOiBzdHJpbmdbXSkge1xuICBpZiAoIXByb2R1dG9Ob21lcy5sZW5ndGgpIHJldHVybiB7IGRhdGE6IHt9LCBlcnJvcjogbnVsbCB9XG5cbiAgLy8gQnVzY2FyIHRvZG9zIG9zIHByb2R1dG9zIGRlIHVtYSB2ZXpcbiAgY29uc3QgeyBkYXRhOiBlc3RvcXVlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcInJldmVuZGVkb3JfZXN0b3F1ZVwiKVxuICAgIC5zZWxlY3QoYFxuICAgICAgaWQsXG4gICAgICByZXZlbmRlZG9yX2lkLFxuICAgICAgcHJvZHV0byxcbiAgICAgIHF1YW50aWRhZGUsXG4gICAgICBwcmVjbyxcbiAgICAgIHN0YXR1c1xuICAgIGApXG4gICAgLmluKFwicHJvZHV0b1wiLCBwcm9kdXRvTm9tZXMpXG4gICAgLmd0KFwicXVhbnRpZGFkZVwiLCAwKSAvLyBBcGVuYXMgY29tIGVzdG9xdWUgZGlzcG9uw612ZWxcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBkYXRhOiB7fSwgZXJyb3IgfVxuICB9XG5cbiAgaWYgKCFlc3RvcXVlIHx8IGVzdG9xdWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgZGF0YToge30sIGVycm9yOiBudWxsIH1cbiAgfVxuXG4gIC8vIEJ1c2NhciBpbmZvcm1hw6fDtWVzIGRvcyByZXZlbmRlZG9yZXNcbiAgY29uc3QgcmV2ZW5kZWRvcklkcyA9IFsuLi5uZXcgU2V0KGVzdG9xdWUubWFwKChpdGVtKSA9PiBpdGVtLnJldmVuZGVkb3JfaWQpKV1cblxuICBjb25zdCB7IGRhdGE6IHJldmVuZGVkb3JlcywgZXJyb3I6IHJldmVuZGVkb3Jlc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwicmV2ZW5kZWRvcmVzXCIpXG4gICAgLnNlbGVjdChgXG4gICAgICBpZCxcbiAgICAgIHVzdWFyaW9faWQsXG4gICAgICBsb2phLFxuICAgICAgY2lkYWRlLFxuICAgICAgdWYsXG4gICAgICBmcmV0ZSxcbiAgICAgIHZlbmRhcyxcbiAgICAgIHN0YXR1c1xuICAgIGApXG4gICAgLmluKFwiaWRcIiwgcmV2ZW5kZWRvcklkcylcblxuICBpZiAocmV2ZW5kZWRvcmVzRXJyb3IpIHtcbiAgICByZXR1cm4geyBkYXRhOiB7fSwgZXJyb3I6IHJldmVuZGVkb3Jlc0Vycm9yIH1cbiAgfVxuXG4gIC8vIENvbWJpbmFyIG9zIGRhZG9zIGUgYWdydXBhciBwb3IgcHJvZHV0b1xuICBjb25zdCBwcm9kdXRvc0FncnVwYWRvczogUmVjb3JkPHN0cmluZywgYW55W10+ID0ge31cblxuICBwcm9kdXRvTm9tZXMuZm9yRWFjaCgocHJvZHV0b05vbWUpID0+IHtcbiAgICBjb25zdCBwcm9kdXRvRXN0b3F1ZSA9IGVzdG9xdWVcbiAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0ucHJvZHV0byA9PT0gcHJvZHV0b05vbWUpXG4gICAgICAubWFwKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IHJldmVuZGVkb3IgPSByZXZlbmRlZG9yZXM/LmZpbmQoKHIpID0+IHIuaWQgPT09IGl0ZW0ucmV2ZW5kZWRvcl9pZClcbiAgICAgICAgcmV0dXJuIHJldmVuZGVkb3IgPyB7IC4uLml0ZW0sIHJldmVuZGVkb3IgfSA6IG51bGxcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtICE9PSBudWxsKVxuXG4gICAgLy8gT3JkZW5hciBwb3IgcHJlw6dvXG4gICAgcHJvZHV0b0VzdG9xdWUuc29ydCgoYSwgYikgPT4gYS5wcmVjbyAtIGIucHJlY28pXG5cbiAgICBwcm9kdXRvc0FncnVwYWRvc1twcm9kdXRvTm9tZV0gPSBwcm9kdXRvRXN0b3F1ZVxuICB9KVxuXG4gIHJldHVybiB7IGRhdGE6IHByb2R1dG9zQWdydXBhZG9zLCBlcnJvcjogbnVsbCB9XG59XG5cbi8vIEJ1c2NhciBpbmZvcm1hw6fDtWVzIGRvIHVzdcOhcmlvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8odXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcInVzdWFyaW9zXCIpXG4gICAgLnNlbGVjdChcImlkLCBub21lLCBlbWFpbCwgY2lkYWRlLCB1ZiwgY2VwLCBydWEsIGJhaXJybywgY29tcGxlbWVudG8sIG51bWVyb1wiKVxuICAgIC5lcShcImlkXCIsIHVzZXJJZClcbiAgICAuc2luZ2xlKClcblxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgYnVzY2FyIHVzdWFyaW9faWQgZG8gcmV2ZW5kZWRvciBiYXNlYWRvIG5vIHJldmVuZGVkb3JfaWRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc3VhcmlvSWRSZXZlbmRlZG9yKHJldmVuZGVkb3JJZDogbnVtYmVyKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbShcInJldmVuZGVkb3Jlc1wiKS5zZWxlY3QoXCJ1c3VhcmlvX2lkXCIpLmVxKFwiaWRcIiwgcmV2ZW5kZWRvcklkKS5zaW5nbGUoKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgdXN1YXJpb19pZCBkbyByZXZlbmRlZG9yOlwiLCBlcnJvcilcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBkYXRhOiBkYXRhLnVzdWFyaW9faWQsIGVycm9yOiBudWxsIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgdXN1YXJpb19pZCBkbyByZXZlbmRlZG9yOlwiLCBlcnJvcilcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJzdXBhYmFzZSIsImdldFByb2R1dG9zIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiZ2V0UHJvZHV0byIsImlkIiwiZXEiLCJzaW5nbGUiLCJzYWx2YXJDYWxjdWxvIiwidGFtYW5ob1JvZGEiLCJhbHR1cmEiLCJsYXJndXJhIiwicmVzdWx0YWRvIiwiY29yIiwiaW5zZXJ0IiwidGFtYW5ob19yb2RhIiwic2FsdmFyQ2FsY3Vsb1VzdWFyaW8iLCJ1c2VySWQiLCJ0YW1hbmhvIiwicGFjb3RlIiwiY2FsY3Vsb3MiLCJjb250YXJFcnJvciIsImNvbnNvbGUiLCJsZW5ndGgiLCJjYWxjdWxvTWFpc0FudGlnbyIsImRlbGV0ZUVycm9yIiwiZGVsZXRlIiwidXNlcmlkIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJnZXRDYWxjdWxvc1VzdWFyaW8iLCJnZXRDYWxjdWxvcyIsImNyaWFyUGVkaWRvIiwiaXRlbXMiLCJ0b3RhbCIsInRpcG9FbnRyZWdhIiwibWV0b2RvUGFnYW1lbnRvIiwiZGFkb3NBZGljaW9uYWlzIiwicGVkaWRvIiwicGVkaWRvRXJyb3IiLCJ1c2VyX2lkIiwidGlwb19lbnRyZWdhIiwicGFnYW1lbnRvX3RpcG8iLCJzdGF0dXMiLCJkYWRvc19hZGljaW9uYWlzIiwiaXRlbnMiLCJtYXAiLCJpdGVtIiwicGVkaWRvX2lkIiwicHJvZHV0b19ub21lIiwibm9tZSIsInF1YW50aWRhZGUiLCJwcmVjb191bml0YXJpbyIsInByZWNvIiwicmV2ZW5kZWRvcl9pZCIsIml0ZW5zRXJyb3IiLCJnZXRQYWNvdGVCeVByb2R1dG9Ob21lIiwicHJvZHV0b05vbWUiLCJtYXBlYW1lbnRvUHJvZHV0b3MiLCJwYWNvdGVzIiwiaWxpa2UiLCJsaW1pdCIsImNvcmVzIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInBhY290ZVBvckNvciIsImVycm9yQ29yIiwiZ2V0UGFjb3RlVmFsaWRvIiwicmVnaXN0cmFyTXVkYW5jYVN0YXR1cyIsInBlZGlkb0lkIiwic3RhdHVzQW50ZXJpb3IiLCJzdGF0dXNOb3ZvIiwib2JzZXJ2YWNhbyIsInVwZGF0ZWRCeSIsInN0YXR1c19hbnRlcmlvciIsInN0YXR1c19ub3ZvIiwidXBkYXRlZF9ieSIsImNyaWFyUGVkaWRvTm92byIsInJldmVuZGVkb3JJZCIsInZhbG9yVG90YWwiLCJmcmV0ZSIsImxvZyIsImNsaWVudGVJZCIsIk51bWJlciIsInBhcnNlSW50IiwicmV2ZW5kZWRvclVzdWFyaW9JZCIsInJldmVuZGVkb3JFcnJvciIsImdldFVzdWFyaW9JZFJldmVuZGVkb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJudW1lcm9QZWRpZG8iLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJ0b1VwcGVyQ2FzZSIsInN0YXR1c0luaWNpYWwiLCJjbGllbnRlX2lkIiwibnVtZXJvIiwidmFsb3JfdG90YWwiLCJzdGF0dXNfZGV0YWxoYWRvIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwiaXRlbnNQYXJhSW5zZXJpciIsIlByb21pc2UiLCJhbGwiLCJpbmRleCIsInBhY290ZUlkIiwiaXRlbVBhcmFJbnNlcmlyIiwicGFjb3RlX2lkIiwicXRkIiwidmFsb3JfdW5pdGFyaW8iLCJpdGVuc0luc2VyaWRvcyIsImF0dWFsaXphclN0YXR1c1BlZGlkbyIsIm5vdm9TdGF0dXMiLCJkYXRhRXN0aW1hZGEiLCJvYnNlcnZhY29lcyIsInBlZGlkb0F0dWFsIiwiZXJyb3JCdXNjYSIsImRhZG9zQXR1YWxpemFjYW8iLCJkYXRhX2VzdGltYWRhX2VudHJlZ2EiLCJvYnNlcnZhY29lc19yZXZlbmRlZG9yIiwiZGF0YV9lbnRyZWdhX3JlYWwiLCJ1cGRhdGUiLCJnZXRQZWRpZG9zIiwiZ2V0UGVkaWRvc0NsaWVudGUiLCJwZWRpZG9zIiwicGVkaWRvc0Vycm9yIiwiZ2V0VGFtYW5ob3MiLCJnZXRBbHR1cmFzQnlUYW1hbmhvSWQiLCJ0YW1hbmhvSWQiLCJ1bmlxdWVBbHR1cmFzIiwicmVkdWNlIiwiYWNjIiwiY3VycmVudCIsImV4aXN0cyIsImZpbmQiLCJ2YWxvciIsInB1c2giLCJnZXRMYXJndXJhc0J5QWx0dXJhSWQiLCJhbHR1cmFJZCIsInVuaXF1ZUxhcmd1cmFzIiwiZ2V0UGFjb3RlQnlMYXJndXJhSWQiLCJsYXJndXJhSWQiLCJwYWNvdGVBanVzdGFkbyIsImRlc2NyaWNhbyIsImdldENhcnJpbmhvVXN1YXJpbyIsImFkaWNpb25hckl0ZW1DYXJyaW5obyIsImltYWdlbSIsImFkanVzdGVkUXVhbnRpdHkiLCJtYXgiLCJyb3VuZCIsIml0ZW1FeGlzdGVudGUiLCJjb2RlIiwiYXR1YWxpemFyUXVhbnRpZGFkZUNhcnJpbmhvIiwicmVtb3Zlckl0ZW1DYXJyaW5obyIsImxpbXBhckNhcnJpbmhvVXN1YXJpbyIsImF0dWFsaXphckNhcnJpbmhvVXN1YXJpbyIsImdldFJldmVuZGVkb3Jlc0NvbVByb2R1dG8iLCJlc3RvcXVlIiwiZ3QiLCJyZXZlbmRlZG9ySWRzIiwicmV2ZW5kZWRvcmVzIiwicmV2ZW5kZWRvcmVzRXJyb3IiLCJpbiIsInJldmVuZGVkb3IiLCJyIiwiZmlsdGVyIiwic29ydCIsImEiLCJiIiwiZ2V0UmV2ZW5kZWRvcmVzUGFyYVByb2R1dG9zIiwicHJvZHV0b05vbWVzIiwiU2V0IiwicHJvZHV0b3NBZ3J1cGFkb3MiLCJmb3JFYWNoIiwicHJvZHV0b0VzdG9xdWUiLCJwcm9kdXRvIiwiZ2V0VXNlckluZm8iLCJ1c3VhcmlvX2lkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./lib/database.ts\n");

/***/ }),

/***/ "(ssr)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(ssr)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://djqueobbsqebtfnqysmt.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqcXVlb2Jic3FlYnRmbnF5c210Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MjIyNzQsImV4cCI6MjA2OTE5ODI3NH0.8bUtQl__vruvkxUFcMEWB9IGNU8eZmDQEnDOs9J8i30\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error('Missing Supabase credentials. Please check your .env.local file.');\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBRWpFLElBQUksQ0FBQ0QsZUFBZSxDQUFDSSxpQkFBaUI7SUFDcEMsTUFBTSxJQUFJRSxNQUFNO0FBQ2xCO0FBRU8sTUFBTUMsV0FBV1IsbUVBQVlBLENBQUNDLGFBQWFJLGlCQUFnQiIsInNvdXJjZXMiOlsiL1VzZXJzL2d1aWJhZGVybWFubi9Eb2N1bWVudHMvR2l0SHViL2NhcnBsdXMvbGliL3N1cGFiYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3VwYWJhc2UtanNcIlxuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTFxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVlcblxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBjcmVkZW50aWFscy4gUGxlYXNlIGNoZWNrIHlvdXIgLmVudi5sb2NhbCBmaWxlLicpXG59XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxuXG4vLyBUaXBvcyBwYXJhIG9zIGRhZG9zIGRvIFN1cGFiYXNlXG5leHBvcnQgdHlwZSBVc2VyID0ge1xuICBpZDogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgbm9tZTogc3RyaW5nXG4gIHNvYnJlbm9tZTogc3RyaW5nXG4gIHRlbGVmb25lOiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIFByb2R1dG8gPSB7XG4gIGlkOiBzdHJpbmdcbiAgbm9tZTogc3RyaW5nXG4gIGNhdGVnb3JpYTogc3RyaW5nXG4gIHByZWNvOiBudW1iZXJcbiAgZGVzY3JpY2FvOiBzdHJpbmdcbiAgaW1hZ2VtX3ByaW5jaXBhbDogc3RyaW5nXG4gIGltYWdlbnM6IHN0cmluZ1tdXG4gIGVzdG9xdWU6IG51bWJlclxuICBjcmVhdGVkX2F0OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgUGVkaWRvID0ge1xuICBpZDogc3RyaW5nXG4gIHVzZXJfaWQ6IHN0cmluZ1xuICBzdGF0dXM6IHN0cmluZ1xuICB0b3RhbDogbnVtYmVyXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBJdGVtUGVkaWRvID0ge1xuICBpZDogc3RyaW5nXG4gIHBlZGlkb19pZDogc3RyaW5nXG4gIHByb2R1dG9faWQ6IHN0cmluZ1xuICBxdWFudGlkYWRlOiBudW1iZXJcbiAgcHJlY29fdW5pdGFyaW86IG51bWJlclxuICBjcmVhdGVkX2F0OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgQ2FsY3Vsb1Jlc3VsdGFkbyA9IHtcbiAgaWQ6IHN0cmluZ1xuICB0YW1hbmhvX3JvZGE6IHN0cmluZ1xuICBhbHR1cmE6IHN0cmluZ1xuICBsYXJndXJhOiBzdHJpbmdcbiAgcmVzdWx0YWRvOiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJFcnJvciIsInN1cGFiYXNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./lib/supabase.ts\n");

/***/ })

};
;