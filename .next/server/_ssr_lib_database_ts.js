"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_lib_database_ts";
exports.ids = ["_ssr_lib_database_ts"];
exports.modules = {

/***/ "(ssr)/./lib/asaas.ts":
/*!**********************!*\
  !*** ./lib/asaas.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cancelPayment: () => (/* binding */ cancelPayment),\n/* harmony export */   checkPaymentStatus: () => (/* binding */ checkPaymentStatus),\n/* harmony export */   createOrUpdateCustomer: () => (/* binding */ createOrUpdateCustomer),\n/* harmony export */   createPayment: () => (/* binding */ createPayment),\n/* harmony export */   formatCep: () => (/* binding */ formatCep),\n/* harmony export */   formatCpfCnpj: () => (/* binding */ formatCpfCnpj),\n/* harmony export */   formatPhone: () => (/* binding */ formatPhone),\n/* harmony export */   getPaymentLink: () => (/* binding */ getPaymentLink),\n/* harmony export */   getPixQrCode: () => (/* binding */ getPixQrCode)\n/* harmony export */ });\n// Biblioteca para integração com o Asaas\n// Tipos para a API do Asaas\n// Função para fazer requisições à API do Asaas\nasync function asaasRequest(endpoint, method = \"POST\", data) {\n    try {\n        const response = await fetch(\"/api/asaas/proxy\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                endpoint,\n                method,\n                data\n            })\n        });\n        const responseData = await response.json();\n        return responseData;\n    } catch (error) {\n        console.error(\"Erro na requisição Asaas:\", error);\n        return {\n            error: true,\n            message: error.message\n        };\n    }\n}\n// Funções para interagir com a API do Asaas\n// Criar ou atualizar cliente\nasync function createOrUpdateCustomer(customerData) {\n    // Verificar se o cliente já existe pelo CPF/CNPJ\n    try {\n        console.log(\"Verificando cliente no Asaas:\", customerData);\n        const searchResult = await asaasRequest(`/customers?cpfCnpj=${customerData.cpfCnpj}`);\n        if (searchResult.data && searchResult.data.length > 0) {\n            // Cliente já existe, atualizar\n            const existingCustomer = searchResult.data[0];\n            console.log(\"Cliente encontrado:\", existingCustomer);\n            return await asaasRequest(`/customers/${existingCustomer.id}`, \"PUT\", customerData);\n        } else {\n            // Cliente não existe, criar\n            console.log(\"Cliente não encontrado, criando...\");\n            return await asaasRequest(\"/customers\", \"POST\", customerData);\n        }\n    } catch (error) {\n        console.error(\"Erro ao criar/atualizar cliente no Asaas:\", error);\n        throw error;\n    }\n}\n// Criar cobrança\nasync function createPayment(paymentData) {\n    try {\n        return await asaasRequest(\"/payments\", \"POST\", paymentData);\n    } catch (error) {\n        console.error(\"Erro ao criar cobrança no Asaas:\", error);\n        throw error;\n    }\n}\n// Obter QR Code PIX\nasync function getPixQrCode(paymentId) {\n    try {\n        return await asaasRequest(`/payments/${paymentId}/billingInfo`, \"GET\", null);\n    } catch (error) {\n        console.error(\"Erro ao obter QR Code PIX:\", error);\n        throw error;\n    }\n}\n// Obter link de pagamento\nasync function getPaymentLink(paymentId) {\n    try {\n        const payment = await asaasRequest(`/payments/${paymentId}`);\n        return payment.invoiceUrl;\n    } catch (error) {\n        console.error(\"Erro ao obter link de pagamento:\", error);\n        throw error;\n    }\n}\n// Verificar status de pagamento\nasync function checkPaymentStatus(paymentId) {\n    try {\n        const payment = await asaasRequest(`/payments/${paymentId}/status`, \"GET\", null);\n        return payment.status;\n    } catch (error) {\n        console.error(\"Erro ao verificar status do pagamento:\", error);\n        throw error;\n    }\n}\n// Cancelar cobrança\nasync function cancelPayment(paymentId) {\n    try {\n        return await asaasRequest(`/payments/${paymentId}/cancel`, \"POST\");\n    } catch (error) {\n        console.error(\"Erro ao cancelar cobrança:\", error);\n        throw error;\n    }\n}\n// Função para formatar CPF/CNPJ (remover caracteres especiais)\nfunction formatCpfCnpj(cpfCnpj) {\n    return cpfCnpj.replace(/[^\\d]/g, \"\");\n}\n// Função para formatar telefone (remover caracteres especiais)\nfunction formatPhone(phone) {\n    return phone.replace(/[^\\d]/g, \"\");\n}\n// Função para formatar CEP (remover caracteres especiais)\nfunction formatCep(cep) {\n    return cep.replace(/[^\\d]/g, \"\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJO1FBQ0YsT0FBTyxNQUFNMUIsYUFBYSxDQUFDLFVBQVUsRUFBRTBCLFVBQVUsT0FBTyxDQUFDLEVBQUU7SUFDN0QsRUFBRSxPQUFPZCxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE1BQU1BO0lBQ1I7QUFDRjtBQUVBLCtEQUErRDtBQUN4RCxTQUFTcUIsY0FBY2QsT0FBZTtJQUMzQyxPQUFPQSxRQUFRZSxPQUFPLENBQUMsVUFBVTtBQUNuQztBQUVBLCtEQUErRDtBQUN4RCxTQUFTQyxZQUFZQyxLQUFhO0lBQ3ZDLE9BQU9BLE1BQU1GLE9BQU8sQ0FBQyxVQUFVO0FBQ2pDO0FBRUEsMERBQTBEO0FBQ25ELFNBQVNHLFVBQVVDLEdBQVc7SUFDbkMsT0FBT0EsSUFBSUosT0FBTyxDQUFDLFVBQVU7QUFDL0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9ndWliYWRlcm1hbm4vRG9jdW1lbnRzL0dpdEh1Yi9jYXJwbHVzL2xpYi9hc2Fhcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCaWJsaW90ZWNhIHBhcmEgaW50ZWdyYcOnw6NvIGNvbSBvIEFzYWFzXG5cbi8vIFRpcG9zIHBhcmEgYSBBUEkgZG8gQXNhYXNcbmV4cG9ydCBpbnRlcmZhY2UgQXNhYXNDdXN0b21lciB7XG4gIGlkPzogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIHBob25lOiBzdHJpbmdcbiAgbW9iaWxlUGhvbmU/OiBzdHJpbmdcbiAgY3BmQ25wajogc3RyaW5nXG4gIHBvc3RhbENvZGU6IHN0cmluZ1xuICBhZGRyZXNzOiBzdHJpbmdcbiAgYWRkcmVzc051bWJlcjogc3RyaW5nXG4gIGNvbXBsZW1lbnQ/OiBzdHJpbmdcbiAgcHJvdmluY2U6IHN0cmluZyAvLyBiYWlycm9cbiAgY2l0eTogc3RyaW5nXG4gIHN0YXRlOiBzdHJpbmdcbiAgZXh0ZXJuYWxSZWZlcmVuY2U/OiBzdHJpbmdcbiAgbm90aWZpY2F0aW9uRGlzYWJsZWQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNhYXNQYXltZW50IHtcbiAgaWQ/OiBzdHJpbmdcbiAgY3VzdG9tZXI6IHN0cmluZyAvLyBJRCBkbyBjbGllbnRlIG5vIEFzYWFzXG4gIGJpbGxpbmdUeXBlOiBcIkJPTEVUT1wiIHwgXCJDUkVESVRfQ0FSRFwiIHwgXCJQSVhcIiB8IFwiVU5ERUZJTkVEXCJcbiAgdmFsdWU6IG51bWJlclxuICBkdWVEYXRlOiBzdHJpbmcgLy8gRm9ybWF0bzogWVlZWS1NTS1ERFxuICBkZXNjcmlwdGlvbj86IHN0cmluZ1xuICBleHRlcm5hbFJlZmVyZW5jZT86IHN0cmluZ1xuICBpbnN0YWxsbWVudENvdW50PzogbnVtYmVyXG4gIHRvdGFsVmFsdWU/OiBudW1iZXJcbiAgaW5zdGFsbG1lbnRWYWx1ZT86IG51bWJlclxuICBkaXNjb3VudD86IHtcbiAgICB2YWx1ZT86IG51bWJlclxuICAgIGR1ZURhdGVMaW1pdERheXM/OiBudW1iZXJcbiAgICB0eXBlPzogXCJGSVhFRFwiIHwgXCJQRVJDRU5UQUdFXCJcbiAgfVxuICBpbnRlcmVzdD86IHtcbiAgICB2YWx1ZTogbnVtYmVyXG4gIH1cbiAgZmluZT86IHtcbiAgICB2YWx1ZTogbnVtYmVyXG4gIH1cbiAgcG9zdGFsU2VydmljZT86IGJvb2xlYW5cbiAgY3JlZGl0Q2FyZD86IHtcbiAgICBob2xkZXJOYW1lOiBzdHJpbmdcbiAgICBudW1iZXI6IHN0cmluZ1xuICAgIGV4cGlyeU1vbnRoOiBzdHJpbmdcbiAgICBleHBpcnlZZWFyOiBzdHJpbmdcbiAgICBjY3Y6IHN0cmluZ1xuICB9XG4gIGNyZWRpdENhcmRIb2xkZXJJbmZvPzoge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIGVtYWlsOiBzdHJpbmdcbiAgICBjcGZDbnBqOiBzdHJpbmdcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmdcbiAgICBhZGRyZXNzTnVtYmVyOiBzdHJpbmdcbiAgICBhZGRyZXNzQ29tcGxlbWVudD86IHN0cmluZ1xuICAgIHBob25lOiBzdHJpbmdcbiAgICBtb2JpbGVQaG9uZT86IHN0cmluZ1xuICB9XG4gIHJlbW90ZUlwPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNhYXNQaXhRckNvZGUge1xuICBlbmNvZGVkSW1hZ2U6IHN0cmluZ1xuICBwYXlsb2FkOiBzdHJpbmdcbiAgZXhwaXJhdGlvbkRhdGU6IHN0cmluZ1xufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIGZhemVyIHJlcXVpc2nDp8O1ZXMgw6AgQVBJIGRvIEFzYWFzXG5hc3luYyBmdW5jdGlvbiBhc2Fhc1JlcXVlc3QoZW5kcG9pbnQ6IHN0cmluZywgbWV0aG9kID0gXCJQT1NUXCIsIGRhdGE/OiBhbnkpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2FwaS9hc2Fhcy9wcm94eVwiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlbmRwb2ludCwgbWV0aG9kLCBkYXRhIH0pLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXNwb25zZURhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm8gbmEgcmVxdWlzacOnw6NvIEFzYWFzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfTtcbiAgfVxufVxuXG5cbi8vIEZ1bsOnw7VlcyBwYXJhIGludGVyYWdpciBjb20gYSBBUEkgZG8gQXNhYXNcblxuLy8gQ3JpYXIgb3UgYXR1YWxpemFyIGNsaWVudGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUN1c3RvbWVyKGN1c3RvbWVyRGF0YTogQXNhYXNDdXN0b21lcik6IFByb21pc2U8QXNhYXNDdXN0b21lcj4ge1xuICAvLyBWZXJpZmljYXIgc2UgbyBjbGllbnRlIGrDoSBleGlzdGUgcGVsbyBDUEYvQ05QSlxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiVmVyaWZpY2FuZG8gY2xpZW50ZSBubyBBc2FhczpcIiwgY3VzdG9tZXJEYXRhKVxuICAgIGNvbnN0IHNlYXJjaFJlc3VsdCA9IGF3YWl0IGFzYWFzUmVxdWVzdChgL2N1c3RvbWVycz9jcGZDbnBqPSR7Y3VzdG9tZXJEYXRhLmNwZkNucGp9YClcblxuICAgIGlmIChzZWFyY2hSZXN1bHQuZGF0YSAmJiBzZWFyY2hSZXN1bHQuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBDbGllbnRlIGrDoSBleGlzdGUsIGF0dWFsaXphclxuICAgICAgY29uc3QgZXhpc3RpbmdDdXN0b21lciA9IHNlYXJjaFJlc3VsdC5kYXRhWzBdXG4gICAgICBjb25zb2xlLmxvZyhcIkNsaWVudGUgZW5jb250cmFkbzpcIiwgZXhpc3RpbmdDdXN0b21lcilcbiAgICAgIHJldHVybiBhd2FpdCBhc2Fhc1JlcXVlc3QoYC9jdXN0b21lcnMvJHtleGlzdGluZ0N1c3RvbWVyLmlkfWAsIFwiUFVUXCIsIGN1c3RvbWVyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2xpZW50ZSBuw6NvIGV4aXN0ZSwgY3JpYXJcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2xpZW50ZSBuw6NvIGVuY29udHJhZG8sIGNyaWFuZG8uLi5cIilcbiAgICAgIHJldHVybiBhd2FpdCBhc2Fhc1JlcXVlc3QoXCIvY3VzdG9tZXJzXCIsIFwiUE9TVFwiLCBjdXN0b21lckRhdGEpXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGNyaWFyL2F0dWFsaXphciBjbGllbnRlIG5vIEFzYWFzOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIENyaWFyIGNvYnJhbsOnYVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVBheW1lbnQocGF5bWVudERhdGE6IEFzYWFzUGF5bWVudCk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGFzYWFzUmVxdWVzdChcIi9wYXltZW50c1wiLCBcIlBPU1RcIiwgcGF5bWVudERhdGEpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gY3JpYXIgY29icmFuw6dhIG5vIEFzYWFzOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIE9idGVyIFFSIENvZGUgUElYXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGl4UXJDb2RlKHBheW1lbnRJZDogc3RyaW5nKTogUHJvbWlzZTxBc2Fhc1BpeFFyQ29kZT4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBhc2Fhc1JlcXVlc3QoYC9wYXltZW50cy8ke3BheW1lbnRJZH0vYmlsbGluZ0luZm9gLCBcIkdFVFwiLCBudWxsKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIG9idGVyIFFSIENvZGUgUElYOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIE9idGVyIGxpbmsgZGUgcGFnYW1lbnRvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGF5bWVudExpbmsocGF5bWVudElkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIGNvbnN0IHBheW1lbnQgPSBhd2FpdCBhc2Fhc1JlcXVlc3QoYC9wYXltZW50cy8ke3BheW1lbnRJZH1gKVxuICAgIHJldHVybiBwYXltZW50Lmludm9pY2VVcmxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBvYnRlciBsaW5rIGRlIHBhZ2FtZW50bzpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vLyBWZXJpZmljYXIgc3RhdHVzIGRlIHBhZ2FtZW50b1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrUGF5bWVudFN0YXR1cyhwYXltZW50SWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGF5bWVudCA9IGF3YWl0IGFzYWFzUmVxdWVzdChgL3BheW1lbnRzLyR7cGF5bWVudElkfS9zdGF0dXNgLCBcIkdFVFwiLCBudWxsKVxuICAgIHJldHVybiBwYXltZW50LnN0YXR1c1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIHZlcmlmaWNhciBzdGF0dXMgZG8gcGFnYW1lbnRvOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIENhbmNlbGFyIGNvYnJhbsOnYVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbmNlbFBheW1lbnQocGF5bWVudElkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBhc2Fhc1JlcXVlc3QoYC9wYXltZW50cy8ke3BheW1lbnRJZH0vY2FuY2VsYCwgXCJQT1NUXCIpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gY2FuY2VsYXIgY29icmFuw6dhOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgZm9ybWF0YXIgQ1BGL0NOUEogKHJlbW92ZXIgY2FyYWN0ZXJlcyBlc3BlY2lhaXMpXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0Q3BmQ25waihjcGZDbnBqOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gY3BmQ25wai5yZXBsYWNlKC9bXlxcZF0vZywgXCJcIilcbn1cblxuLy8gRnVuw6fDo28gcGFyYSBmb3JtYXRhciB0ZWxlZm9uZSAocmVtb3ZlciBjYXJhY3RlcmVzIGVzcGVjaWFpcylcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRQaG9uZShwaG9uZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHBob25lLnJlcGxhY2UoL1teXFxkXS9nLCBcIlwiKVxufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIGZvcm1hdGFyIENFUCAocmVtb3ZlciBjYXJhY3RlcmVzIGVzcGVjaWFpcylcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRDZXAoY2VwOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gY2VwLnJlcGxhY2UoL1teXFxkXS9nLCBcIlwiKVxufVxuIl0sIm5hbWVzIjpbImFzYWFzUmVxdWVzdCIsImVuZHBvaW50IiwibWV0aG9kIiwiZGF0YSIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNwb25zZURhdGEiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImNyZWF0ZU9yVXBkYXRlQ3VzdG9tZXIiLCJjdXN0b21lckRhdGEiLCJsb2ciLCJzZWFyY2hSZXN1bHQiLCJjcGZDbnBqIiwibGVuZ3RoIiwiZXhpc3RpbmdDdXN0b21lciIsImlkIiwiY3JlYXRlUGF5bWVudCIsInBheW1lbnREYXRhIiwiZ2V0UGl4UXJDb2RlIiwicGF5bWVudElkIiwiZ2V0UGF5bWVudExpbmsiLCJwYXltZW50IiwiaW52b2ljZVVybCIsImNoZWNrUGF5bWVudFN0YXR1cyIsInN0YXR1cyIsImNhbmNlbFBheW1lbnQiLCJmb3JtYXRDcGZDbnBqIiwicmVwbGFjZSIsImZvcm1hdFBob25lIiwicGhvbmUiLCJmb3JtYXRDZXAiLCJjZXAiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./lib/asaas.ts\n");

/***/ }),

/***/ "(ssr)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adicionarItemCarrinho: () => (/* binding */ adicionarItemCarrinho),\n/* harmony export */   atualizarCarrinhoUsuario: () => (/* binding */ atualizarCarrinhoUsuario),\n/* harmony export */   atualizarQuantidadeCarrinho: () => (/* binding */ atualizarQuantidadeCarrinho),\n/* harmony export */   atualizarStatusPedido: () => (/* binding */ atualizarStatusPedido),\n/* harmony export */   checkStatusPedido: () => (/* binding */ checkStatusPedido),\n/* harmony export */   criarPedido: () => (/* binding */ criarPedido),\n/* harmony export */   criarPedidoNovo: () => (/* binding */ criarPedidoNovo),\n/* harmony export */   getAlturasByTamanhoId: () => (/* binding */ getAlturasByTamanhoId),\n/* harmony export */   getCalculos: () => (/* binding */ getCalculos),\n/* harmony export */   getCalculosUsuario: () => (/* binding */ getCalculosUsuario),\n/* harmony export */   getCarrinhoUsuario: () => (/* binding */ getCarrinhoUsuario),\n/* harmony export */   getLargurasByAlturaId: () => (/* binding */ getLargurasByAlturaId),\n/* harmony export */   getPacoteByLarguraId: () => (/* binding */ getPacoteByLarguraId),\n/* harmony export */   getPacoteByProdutoNome: () => (/* binding */ getPacoteByProdutoNome),\n/* harmony export */   getPacoteValido: () => (/* binding */ getPacoteValido),\n/* harmony export */   getPedidos: () => (/* binding */ getPedidos),\n/* harmony export */   getPedidosCliente: () => (/* binding */ getPedidosCliente),\n/* harmony export */   getProduto: () => (/* binding */ getProduto),\n/* harmony export */   getProdutos: () => (/* binding */ getProdutos),\n/* harmony export */   getRevendedoresComProduto: () => (/* binding */ getRevendedoresComProduto),\n/* harmony export */   getRevendedoresParaProdutos: () => (/* binding */ getRevendedoresParaProdutos),\n/* harmony export */   getTamanhos: () => (/* binding */ getTamanhos),\n/* harmony export */   getUserInfo: () => (/* binding */ getUserInfo),\n/* harmony export */   getUsuarioIdRevendedor: () => (/* binding */ getUsuarioIdRevendedor),\n/* harmony export */   limparCarrinhoUsuario: () => (/* binding */ limparCarrinhoUsuario),\n/* harmony export */   registrarMudancaStatus: () => (/* binding */ registrarMudancaStatus),\n/* harmony export */   removerItemCarrinho: () => (/* binding */ removerItemCarrinho),\n/* harmony export */   salvarCalculo: () => (/* binding */ salvarCalculo),\n/* harmony export */   salvarCalculoUsuario: () => (/* binding */ salvarCalculoUsuario)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(ssr)/./lib/supabase.ts\");\n/* harmony import */ var _lib_asaas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/asaas */ \"(ssr)/./lib/asaas.ts\");\n\n\n// Funções para produtos\nasync function getProdutos() {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"produtos\").select(\"*\").order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\nasync function getProduto(id) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"produtos\").select(\"*\").eq(\"id\", id).single();\n    return {\n        data,\n        error\n    };\n}\n// Funções para cálculos\nasync function salvarCalculo(tamanhoRoda, altura, largura, resultado, cor) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculos\").insert([\n        {\n            tamanho_roda: tamanhoRoda,\n            altura: altura,\n            largura: largura,\n            resultado: resultado,\n            cor: cor\n        }\n    ]).select();\n    return {\n        data,\n        error\n    };\n}\n// Nova função para salvar cálculos do usuário com limite de 10\nasync function salvarCalculoUsuario(userId, tamanho, altura, largura, pacote) {\n    try {\n        // 1. Verificar quantos cálculos o usuário já tem\n        const { data: calculos, error: contarError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculo_usuarios\").select(\"id, created_at\").eq(\"userid\", userId).order(\"created_at\", {\n            ascending: true\n        });\n        if (contarError) {\n            console.error(\"Erro ao contar cálculos do usuário:\", contarError);\n            return {\n                data: null,\n                error: contarError\n            };\n        }\n        // 2. Se já tiver 10 ou mais, excluir o mais antigo\n        if (calculos && calculos.length >= 10) {\n            const calculoMaisAntigo = calculos[0];\n            const { error: deleteError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculo_usuarios\").delete().eq(\"id\", calculoMaisAntigo.id);\n            if (deleteError) {\n                console.error(\"Erro ao excluir cálculo mais antigo:\", deleteError);\n                return {\n                    data: null,\n                    error: deleteError\n                };\n            }\n        }\n        // 3. Inserir o novo cálculo\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculo_usuarios\").insert([\n            {\n                userid: userId,\n                tamanho: tamanho,\n                altura: altura,\n                largura: largura,\n                pacote: pacote,\n                created_at: new Date()\n            }\n        ]).select();\n        if (error) {\n            console.error(\"Erro ao salvar cálculo do usuário:\", error);\n            return {\n                data: null,\n                error\n            };\n        }\n        return {\n            data,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao salvar cálculo do usuário:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// Função para obter os cálculos do usuário\nasync function getCalculosUsuario(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculo_usuarios\").select(\"*\").eq(\"userid\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\nasync function getCalculos(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"calculos\").select(\"*\").eq(\"user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\n// Funções para pedidos\nasync function criarPedido(userId, items, total, tipoEntrega = \"retirada\", metodoPagamento = \"cartao\", dadosAdicionais = {}) {\n    try {\n        // Criar o pedido\n        const { data: pedido, error: pedidoError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").insert([\n            {\n                user_id: userId,\n                total: total,\n                tipo_entrega: tipoEntrega,\n                pagamento_tipo: metodoPagamento,\n                status: \"pendente\",\n                dados_adicionais: dadosAdicionais\n            }\n        ]).select().single();\n        if (pedidoError) throw pedidoError;\n        // Inserir os itens do pedido\n        const itens = items.map((item)=>({\n                pedido_id: pedido.id,\n                produto_nome: item.nome,\n                quantidade: item.quantidade,\n                preco_unitario: item.preco,\n                revendedor_id: item.revendedor_id\n            }));\n        const { error: itensError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"itens_pedido\").insert(itens);\n        if (itensError) throw itensError;\n        return {\n            data: pedido,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao criar pedido:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// Remover as funções getClienteByUsuarioId e garantirCliente que estavam criando uma tabela clientes desnecessária\n// Função para buscar pacote baseado no nome do produto\nasync function getPacoteByProdutoNome(produtoNome) {\n    try {\n        // Mapear nomes de produtos para pacotes\n        // Você pode ajustar essa lógica conforme sua regra de negócio\n        const mapeamentoProdutos = {\n            \"Microesferas Azul\": 1,\n            \"Microesferas Vermelha\": 2,\n            \"Microesferas Verde\": 3,\n            \"Microesferas Amarela\": 4,\n            \"Microesferas Preta\": 5,\n            \"Microesferas Branca\": 6\n        };\n        // Se existe um mapeamento direto, usar ele\n        if (mapeamentoProdutos[produtoNome]) {\n            return {\n                data: mapeamentoProdutos[produtoNome],\n                error: null\n            };\n        }\n        // Caso contrário, tentar buscar por nome similar\n        const { data: pacotes, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pacotes\").select(\"id, nome, cor\").ilike(\"nome\", `%${produtoNome}%`).limit(1);\n        if (error) {\n            console.error(\"Erro ao buscar pacote por nome:\", error);\n            return {\n                data: 1,\n                error: null\n            }; // Fallback para ID 1\n        }\n        if (pacotes && pacotes.length > 0) {\n            return {\n                data: pacotes[0].id,\n                error: null\n            };\n        }\n        // Se não encontrou nada, tentar buscar por cor\n        const cores = [\n            \"azul\",\n            \"vermelha\",\n            \"verde\",\n            \"amarela\",\n            \"preta\",\n            \"branca\"\n        ];\n        for (const cor of cores){\n            if (produtoNome.toLowerCase().includes(cor)) {\n                const { data: pacotePorCor, error: errorCor } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pacotes\").select(\"id\").ilike(\"cor\", `%${cor}%`).limit(1);\n                if (!errorCor && pacotePorCor && pacotePorCor.length > 0) {\n                    return {\n                        data: pacotePorCor[0].id,\n                        error: null\n                    };\n                }\n            }\n        }\n        // Fallback final\n        return {\n            data: 1,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao buscar pacote:\", error);\n        return {\n            data: 1,\n            error: null\n        };\n    }\n}\n// Função para buscar um pacote válido (por enquanto retorna o primeiro disponível)\nasync function getPacoteValido() {\n    try {\n        const { data: pacotes, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pacotes\").select(\"id\").limit(1);\n        if (error) {\n            console.error(\"Erro ao buscar pacote:\", error);\n            return 1; // Fallback para ID 1\n        }\n        return pacotes && pacotes.length > 0 ? pacotes[0].id : 1;\n    } catch (error) {\n        console.error(\"Erro ao buscar pacote:\", error);\n        return 1; // Fallback para ID 1\n    }\n}\n// Função para registrar mudança de status no histórico\nasync function registrarMudancaStatus(pedidoId, statusAnterior, statusNovo, observacao, updatedBy) {\n    try {\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedido_historico_status\").insert([\n            {\n                pedido_id: pedidoId,\n                status_anterior: statusAnterior,\n                status_novo: statusNovo,\n                observacao: observacao,\n                updated_by: updatedBy\n            }\n        ]).select();\n        if (error) {\n            console.error(\"Erro ao registrar mudança de status:\", error);\n        }\n        return {\n            data,\n            error\n        };\n    } catch (error) {\n        console.error(\"Erro ao registrar mudança de status:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// Substituir a função criarPedidoNovo por esta versão corrigida:\nasync function criarPedidoNovo(userId, revendedorId, items, valorTotal, frete, tipoEntrega, metodoPagamento) {\n    try {\n        console.log(\"Iniciando criação do pedido para usuário:\", userId);\n        console.log(\"Revendedor ID:\", revendedorId);\n        console.log(\"Items:\", items);\n        console.log(\"Valor Total:\", valorTotal);\n        console.log(\"Frete:\", frete);\n        console.log(\"Tipo de Entrega:\", tipoEntrega);\n        console.log(\"Método de Pagamento:\", metodoPagamento);\n        // Converter userId para número\n        const clienteId = Number.parseInt(userId);\n        // Buscar o usuario_id do revendedor baseado no revendedor_id\n        const { data: revendedorUsuarioId, error: revendedorError } = await getUsuarioIdRevendedor(revendedorId);\n        if (revendedorError || !revendedorUsuarioId) {\n            throw new Error(\"Erro ao buscar revendedor: \" + (revendedorError?.message || \"Revendedor não encontrado\"));\n        }\n        console.log(\"Cliente ID:\", clienteId);\n        console.log(\"Revendedor ID:\", revendedorId);\n        console.log(\"Revendedor Usuario ID:\", revendedorUsuarioId);\n        // Gerar número do pedido único\n        const numeroPedido = `PED-${Date.now()}-${Math.random().toString(36).substr(2, 4).toUpperCase()}`;\n        // Definir status inicial baseado no tipo de entrega\n        const statusInicial = tipoEntrega === \"retirada\" ? \"aguardando_preparacao\" : \"aguardando_aceite\";\n        // Criar o pedido usando o schema correto\n        const { data: pedido, error: pedidoError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").insert([\n            {\n                cliente_id: clienteId,\n                revendedor_id: revendedorUsuarioId,\n                numero: numeroPedido,\n                frete: frete,\n                valor_total: valorTotal,\n                pagamento_tipo: metodoPagamento,\n                tipo_entrega: tipoEntrega,\n                status: \"pago\",\n                status_detalhado: statusInicial,\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            }\n        ]).select().single();\n        if (pedidoError) {\n            console.error(\"Erro ao criar pedido:\", pedidoError);\n            throw pedidoError;\n        }\n        const user = await getUserInfo(clienteId.toString());\n        console.log(\"User:\", user);\n        if (!user.data) {\n            throw new Error(\"Usuário não encontrado\");\n        }\n        if (!user.data?.nome || !user.data?.email || !user.data?.telefone || !user.data?.cpf) {\n            throw new Error(\"Dados do usuário incompletos\");\n        }\n        const cliente = await (0,_lib_asaas__WEBPACK_IMPORTED_MODULE_1__.createOrUpdateCustomer)({\n            name: user.data?.nome + \" \" + user.data?.sobrenome,\n            email: user.data?.email,\n            phone: user.data?.telefone,\n            mobilePhone: user.data?.telefone,\n            cpfCnpj: user.data?.cpf,\n            postalCode: user.data?.cep,\n            address: user.data?.rua,\n            addressNumber: user.data?.numero,\n            complement: user.data?.complemento,\n            province: user.data?.bairro,\n            city: user.data?.cidade,\n            state: user.data?.uf,\n            externalReference: user.data?.id.toString()\n        });\n        console.log(\"Cliente criado:\", cliente);\n        const pagamentoData = {\n            billingType: metodoPagamento,\n            customer: cliente.id,\n            value: Number(valorTotal) + Number(frete),\n            dueDate: \"2025-07-29\",\n            externalReference: pedido.id.toString(),\n            description: `#${numeroPedido}`\n        };\n        if (metodoPagamento === \"CREDIT_CARD\") {\n            pagamentoData.creditCard = {\n                holderName: user.data.nome + \" \" + user.data.sobrenome,\n                number: \"4111111111111111\",\n                expiryMonth: \"12\",\n                expiryYear: \"2025\",\n                ccv: \"123\"\n            };\n            pagamentoData.installmentCount = 1;\n            pagamentoData.totalValue = Number(valorTotal) + Number(frete);\n            pagamentoData.installmentValue = Number(valorTotal) + Number(frete);\n            pagamentoData.discount = {\n                value: 0,\n                dueDateLimitDays: 0,\n                type: \"FIXED\"\n            };\n            pagamentoData.interest = {\n                value: 0\n            };\n            pagamentoData.fine = {\n                value: 0\n            };\n            pagamentoData.creditCardHolderInfo = {\n                name: user.data.nome + \" \" + user.data.sobrenome,\n                email: user.data.email,\n                cpfCnpj: user.data.cpf,\n                postalCode: user.data.cep,\n                addressNumber: user.data.numero,\n                addressComplement: user.data.complemento || \"\",\n                phone: user.data.telefone,\n                mobilePhone: user.data.telefone\n            };\n            pagamentoData.remoteIp = \"127.0.0.1\";\n        }\n        const pagamento = await (0,_lib_asaas__WEBPACK_IMPORTED_MODULE_1__.createPayment)(pagamentoData);\n        console.log(\"Pagamento criado:\", pagamento);\n        if (!pagamento.id) {\n            throw new Error(\"Erro ao criar pagamento no Asaas\");\n        }\n        let dadosPagamento = null;\n        if (metodoPagamento === \"PIX\" || metodoPagamento === \"BOLETO\") {\n            dadosPagamento = await (0,_lib_asaas__WEBPACK_IMPORTED_MODULE_1__.getPixQrCode)(pagamento.id);\n            console.log(\"QR Code PIX:\", dadosPagamento);\n        }\n        let pix = null;\n        let boleto = null;\n        if (dadosPagamento) {\n            pix = dadosPagamento.pix;\n            boleto = dadosPagamento.bankSlip;\n        }\n        // Registrar o status inicial no histórico\n        await registrarMudancaStatus(pedido.id, null, statusInicial, \"Pedido criado\", null);\n        // Preparar itens para inserção com pacote_id correto para cada item\n        const itensParaInserir = await Promise.all(items.map(async (item, index)=>{\n            // Buscar o pacote_id correto baseado no nome do produto\n            const { data: pacoteId } = await getPacoteByProdutoNome(item.nome);\n            const itemParaInserir = {\n                pedido_id: pedido.id,\n                pacote_id: pacoteId,\n                qtd: Number(item.quantidade) || 0,\n                valor_unitario: Number(item.preco) || 0\n            };\n            console.log(`Item ${index + 1} preparado:`, itemParaInserir);\n            console.log(`Produto: ${item.nome} -> Pacote ID: ${pacoteId}`);\n            return itemParaInserir;\n        }));\n        console.log(\"Todos os itens preparados:\", itensParaInserir);\n        // Inserir os itens do pedido\n        const { data: itensInseridos, error: itensError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedido_itens\").insert(itensParaInserir).select();\n        if (itensError) {\n            console.error(\"Erro detalhado ao inserir itens do pedido:\", itensError);\n            console.error(\"Dados que tentamos inserir:\", itensParaInserir);\n            throw itensError;\n        }\n        console.log(\"Itens inseridos com sucesso:\", itensInseridos);\n        console.log(\"Pagamento criado com sucesso:\", pix);\n        console.log(\"Pagamento criado com sucesso:\", boleto);\n        console.log(\"Pagamento criado com sucesso:\", pagamento.id);\n        return {\n            data: pedido,\n            pix,\n            boleto,\n            pagamentoId: pagamento.id,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao criar pedido:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// Função para atualizar status do pedido\nasync function atualizarStatusPedido(pedidoId, novoStatus, dataEstimada, observacoes, updatedBy) {\n    try {\n        // Primeiro, buscar o status atual\n        const { data: pedidoAtual, error: errorBusca } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").select(\"status_detalhado\").eq(\"id\", pedidoId).single();\n        if (errorBusca) {\n            throw errorBusca;\n        }\n        // Preparar dados para atualização\n        const dadosAtualizacao = {\n            status_detalhado: novoStatus,\n            updated_at: new Date().toISOString()\n        };\n        if (dataEstimada) {\n            dadosAtualizacao.data_estimada_entrega = dataEstimada;\n        }\n        if (observacoes) {\n            dadosAtualizacao.observacoes_revendedor = observacoes;\n        }\n        // Se o status for \"entregue\" ou \"retirado\", definir data real\n        if (novoStatus === \"entregue\" || novoStatus === \"retirado\") {\n            dadosAtualizacao.data_entrega_real = new Date().toISOString();\n        }\n        // Atualizar o pedido\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").update(dadosAtualizacao).eq(\"id\", pedidoId).select();\n        if (error) {\n            throw error;\n        }\n        // Registrar mudança no histórico\n        await registrarMudancaStatus(pedidoId, pedidoAtual.status_detalhado, novoStatus, observacoes, updatedBy);\n        return {\n            data,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao atualizar status do pedido:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\nasync function getPedidos(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").select(`\n      *,\n      itens_pedido:itens_pedido(\n        *,\n        produto:produtos(*)\n      )\n    `).eq(\"user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\n// Substituir a função getPedidosCliente por esta versão corrigida:\nasync function getPedidosCliente(userId) {\n    try {\n        console.log(\"Buscando pedidos para usuário:\", userId);\n        // Converter userId para número\n        const clienteId = Number.parseInt(userId);\n        // Buscar pedidos usando o cliente_id diretamente\n        const { data: pedidos, error: pedidosError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pedidos\").select(`\n        *,\n        pedido_itens:pedido_itens(\n          id,\n          pedido_id,\n          pacote_id,\n          qtd,\n          valor_unitario,\n          pacotes:pacotes(id, descricao, cor, imagem)\n        )\n      `).eq(\"cliente_id\", clienteId) // Corrigido: cliente_id em vez de client_id\n        .order(\"created_at\", {\n            ascending: false\n        });\n        console.log(\"Pedidos encontrados:\", pedidos?.length || 0);\n        if (pedidosError) {\n            console.error(\"Erro ao buscar pedidos:\", pedidosError);\n            throw pedidosError;\n        }\n        return {\n            data: pedidos || [],\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao buscar pedidos do cliente:\", error);\n        return {\n            data: [],\n            error\n        };\n    }\n}\n// Função para buscar tamanhos de rodas disponíveis\nasync function getTamanhos() {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"tamanhos\").select(\"id, nome\").order(\"nome\", {\n        ascending: true\n    });\n    return {\n        data,\n        error\n    };\n}\n// Função para buscar alturas disponíveis com base no tamanho da roda\nasync function getAlturasByTamanhoId(tamanhoId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"alturas\").select(\"id, valor\").eq(\"tamanho_id\", tamanhoId).order(\"valor\", {\n        ascending: true\n    });\n    // Remover duplicatas baseado no valor\n    if (data && data.length > 0) {\n        const uniqueAlturas = data.reduce((acc, current)=>{\n            const exists = acc.find((item)=>item.valor === current.valor);\n            if (!exists) {\n                acc.push(current);\n            }\n            return acc;\n        }, []);\n        return {\n            data: uniqueAlturas,\n            error\n        };\n    }\n    return {\n        data,\n        error\n    };\n}\n// Função para buscar larguras based on altura_id\nasync function getLargurasByAlturaId(alturaId) {\n    console.log(\"🔍 Buscando larguras para alturaId:\", alturaId);\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"larguras\").select(\"id, valor\").eq(\"altura_id\", alturaId).order(\"valor\", {\n        ascending: true\n    });\n    // Remover duplicatas baseado no valor\n    if (data && data.length > 0) {\n        const uniqueLarguras = data.reduce((acc, current)=>{\n            const exists = acc.find((item)=>item.valor === current.valor);\n            if (!exists) {\n                acc.push(current);\n            }\n            return acc;\n        }, []);\n        console.log(\"📏 Larguras únicas encontradas:\", {\n            data: uniqueLarguras,\n            error\n        });\n        return {\n            data: uniqueLarguras,\n            error\n        };\n    }\n    console.log(\"📏 Larguras encontradas:\", {\n        data,\n        error\n    });\n    return {\n        data,\n        error\n    };\n}\n// Função para buscar package details by largura_id\nasync function getPacoteByLarguraId(larguraId) {\n    try {\n        console.log(\"🔍 Buscando pacote para larguraId:\", larguraId);\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"pacotes\").select(\"*\").eq(\"largura_id\", larguraId).single();\n        console.log(\"📦 Resultado da busca:\", {\n            data,\n            error\n        });\n        if (error) {\n            console.error(\"❌ Erro ao buscar pacote por largura_id:\", error);\n            // Fallback: retornar um pacote padrão\n            return {\n                data: {\n                    id: 1,\n                    nome: \"LTP60\",\n                    cor: \"#4A4953\"\n                },\n                error: null\n            };\n        }\n        if (!data) {\n            console.log(\"Nenhum pacote encontrado para largura_id:\", larguraId);\n            // Fallback: retornar um pacote padrão\n            return {\n                data: {\n                    id: 1,\n                    nome: \"LTP60\",\n                    cor: \"#4A4953\"\n                },\n                error: null\n            };\n        }\n        // Ajustar dados se nome estiver null\n        const pacoteAjustado = {\n            id: data.id,\n            nome: data.nome || data.descricao || \"LTP60\",\n            cor: data.cor || \"#949698\"\n        };\n        return {\n            data: pacoteAjustado,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao buscar pacote:\", error);\n        // Fallback: retornar um pacote padrão\n        return {\n            data: {\n                id: 1,\n                nome: \"LTP60\",\n                cor: \"#4A4953\"\n            },\n            error: null\n        };\n    }\n}\n// ==================== FUNÇÕES DO CARRINHO ====================\n// Buscar carrinho do usuário\nasync function getCarrinhoUsuario(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").select(\"*\").eq(\"user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    return {\n        data,\n        error\n    };\n}\n// Adicionar item ao carrinho\nasync function adicionarItemCarrinho(userId, produtoNome, quantidade = 5, imagem) {\n    // Ensure quantity is a multiple of 5 and at least 5\n    const adjustedQuantity = Math.max(Math.round(quantidade / 5) * 5, 5);\n    // Verificar se o item já existe no carrinho\n    const { data: itemExistente, error: errorBusca } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").select(\"*\").eq(\"user_id\", userId).eq(\"produto_nome\", produtoNome).single();\n    if (errorBusca && errorBusca.code !== \"PGRST116\") {\n        // PGRST116 = No rows found (esperado se item não existe)\n        return {\n            data: null,\n            error: errorBusca\n        };\n    }\n    if (itemExistente) {\n        // Item já existe, adicionar 5 unidades\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").update({\n            quantidade: itemExistente.quantidade + 5,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", itemExistente.id).select();\n        return {\n            data,\n            error\n        };\n    } else {\n        // Item não existe, criar novo com quantidade ajustada\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").insert([\n            {\n                user_id: userId,\n                produto_nome: produtoNome,\n                quantidade: adjustedQuantity,\n                imagem: imagem\n            }\n        ]).select();\n        return {\n            data,\n            error\n        };\n    }\n}\n// Atualizar quantidade de item no carrinho\nasync function atualizarQuantidadeCarrinho(userId, produtoNome, quantidade) {\n    // Ensure quantity is a multiple of 5 and at least 5\n    const adjustedQuantity = Math.max(Math.round(quantidade / 5) * 5, 5);\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").update({\n        quantidade: adjustedQuantity,\n        updated_at: new Date().toISOString()\n    }).eq(\"user_id\", userId).eq(\"produto_nome\", produtoNome).select();\n    return {\n        data,\n        error\n    };\n}\n// Remover item do carrinho\nasync function removerItemCarrinho(userId, produtoNome) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").delete().eq(\"user_id\", userId).eq(\"produto_nome\", produtoNome);\n    return {\n        data,\n        error\n    };\n}\n// Limpar carrinho do usuário\nasync function limparCarrinhoUsuario(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").delete().eq(\"user_id\", userId);\n    return {\n        data,\n        error\n    };\n}\n// Atualizar carrinho completo do usuário\nasync function atualizarCarrinhoUsuario(userId, items) {\n    try {\n        // Primeiro, limpar o carrinho atual\n        await limparCarrinhoUsuario(userId);\n        // Se não há itens, apenas retornar sucesso\n        if (!items || items.length === 0) {\n            return {\n                data: null,\n                error: null\n            };\n        }\n        // Inserir todos os novos itens\n        const itensParaInserir = items.map((item)=>({\n                user_id: userId,\n                produto_nome: item.nome,\n                quantidade: item.quantidade,\n                imagem: item.imagem,\n                created_at: new Date().toISOString()\n            }));\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"carrinho_usuarios\").insert(itensParaInserir).select();\n        return {\n            data,\n            error\n        };\n    } catch (error) {\n        console.error(\"Erro ao atualizar carrinho:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// ==================== FUNÇÕES DE REVENDEDORES E ESTOQUE ====================\n// Buscar revendedores que possuem um produto específico em estoque\nasync function getRevendedoresComProduto(produtoNome) {\n    // Usando JOIN manual em vez de relacionamento\n    const { data: estoque, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedor_estoque\").select(`\n      id,\n      revendedor_id,\n      produto,\n      quantidade,\n      preco,\n      status\n    `).eq(\"produto\", produtoNome).gt(\"quantidade\", 0); // Apenas com estoque disponível\n    if (error) {\n        return {\n            data: null,\n            error\n        };\n    }\n    // Buscar informações dos revendedores\n    const revendedorIds = estoque?.map((item)=>item.revendedor_id) || [];\n    if (revendedorIds.length === 0) {\n        return {\n            data: [],\n            error: null\n        };\n    }\n    const { data: revendedores, error: revendedoresError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedores\").select(`\n      id,\n      usuario_id,\n      loja,\n      cidade,\n      uf,\n      frete,\n      vendas,\n      status\n    `).in(\"id\", revendedorIds);\n    if (revendedoresError) {\n        return {\n            data: null,\n            error: revendedoresError\n        };\n    }\n    // Combinar os dados\n    const resultado = estoque?.map((item)=>{\n        const revendedor = revendedores?.find((r)=>r.id === item.revendedor_id);\n        return {\n            ...item,\n            revendedor: revendedor || null\n        };\n    }).filter((item)=>item.revendedor !== null) || [];\n    // Ordenar por preço\n    resultado.sort((a, b)=>a.preco - b.preco);\n    return {\n        data: resultado,\n        error: null\n    };\n}\n// Buscar revendedores para múltiplos produtos\nasync function getRevendedoresParaProdutos(produtoNomes) {\n    if (!produtoNomes.length) return {\n        data: {},\n        error: null\n    };\n    // Buscar todos os produtos de uma vez\n    const { data: estoque, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedor_estoque\").select(`\n      id,\n      revendedor_id,\n      produto,\n      quantidade,\n      preco,\n      status\n    `).in(\"produto\", produtoNomes).gt(\"quantidade\", 0); // Apenas com estoque disponível\n    if (error) {\n        return {\n            data: {},\n            error\n        };\n    }\n    if (!estoque || estoque.length === 0) {\n        return {\n            data: {},\n            error: null\n        };\n    }\n    // Buscar informações dos revendedores\n    const revendedorIds = [\n        ...new Set(estoque.map((item)=>item.revendedor_id))\n    ];\n    const { data: revendedores, error: revendedoresError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedores\").select(`\n      id,\n      usuario_id,\n      loja,\n      cidade,\n      uf,\n      frete,\n      vendas,\n      status\n    `).in(\"id\", revendedorIds);\n    if (revendedoresError) {\n        return {\n            data: {},\n            error: revendedoresError\n        };\n    }\n    // Combinar os dados e agrupar por produto\n    const produtosAgrupados = {};\n    produtoNomes.forEach((produtoNome)=>{\n        const produtoEstoque = estoque.filter((item)=>item.produto === produtoNome).map((item)=>{\n            const revendedor = revendedores?.find((r)=>r.id === item.revendedor_id);\n            return revendedor ? {\n                ...item,\n                revendedor\n            } : null;\n        }).filter((item)=>item !== null);\n        // Ordenar por preço\n        produtoEstoque.sort((a, b)=>a.preco - b.preco);\n        produtosAgrupados[produtoNome] = produtoEstoque;\n    });\n    return {\n        data: produtosAgrupados,\n        error: null\n    };\n}\n// Buscar informações do usuário\nasync function getUserInfo(userId) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"usuarios\").select(\"id, nome, sobrenome, email, cpf, telefone, cidade, uf, cep, rua, bairro, complemento, numero\").eq(\"id\", userId).single();\n    return {\n        data,\n        error\n    };\n}\n// Função para buscar usuario_id do revendedor baseado no revendedor_id\nasync function getUsuarioIdRevendedor(revendedorId) {\n    try {\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"revendedores\").select(\"usuario_id\").eq(\"id\", revendedorId).single();\n        if (error) {\n            console.error(\"Erro ao buscar usuario_id do revendedor:\", error);\n            return {\n                data: null,\n                error\n            };\n        }\n        return {\n            data: data.usuario_id,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao buscar usuario_id do revendedor:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\nasync function checkStatusPedido(id) {\n    try {\n        console.log(\"Iniciando criação do pedido para usuário:\", id);\n        if (!id) {\n            throw new Error(\"ID do pagamento não encontrado\");\n        }\n        const status = await (0,_lib_asaas__WEBPACK_IMPORTED_MODULE_1__.checkPaymentStatus)(id);\n        console.log(\"Status do pagamento:\", status);\n        return {\n            data: status,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"Erro ao verificar status do pagamento:\", error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFFcEMsT0FBTztZQUFFN0MsTUFBTTZDO1lBQVE1QyxPQUFPO1FBQUs7SUFDckMsRUFBRSxPQUFPQSxPQUFPO1FBQ2R1QixRQUFRdkIsS0FBSyxDQUFDLDBDQUEwQ0E7UUFDeEQsT0FBTztZQUFFRCxNQUFNO1lBQU1DO1FBQU07SUFDN0I7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2d1aWJhZGVybWFubi9Eb2N1bWVudHMvR2l0SHViL2NhcnBsdXMvbGliL2RhdGFiYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIi4vc3VwYWJhc2VcIjtcbmltcG9ydCB7IGNyZWF0ZVBheW1lbnQsIGNyZWF0ZU9yVXBkYXRlQ3VzdG9tZXIsIGdldFBpeFFyQ29kZSwgY2hlY2tQYXltZW50U3RhdHVzIH0gZnJvbSBcIkAvbGliL2FzYWFzXCI7XG5cbi8vIEZ1bsOnw7VlcyBwYXJhIHByb2R1dG9zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZHV0b3MoKSB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJwcm9kdXRvc1wiKVxuICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1dG8oaWQ6IHN0cmluZykge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwicHJvZHV0b3NcIilcbiAgICAuc2VsZWN0KFwiKlwiKVxuICAgIC5lcShcImlkXCIsIGlkKVxuICAgIC5zaW5nbGUoKTtcblxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9O1xufVxuXG4vLyBGdW7Dp8O1ZXMgcGFyYSBjw6FsY3Vsb3NcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWx2YXJDYWxjdWxvKFxuICB0YW1hbmhvUm9kYTogc3RyaW5nLFxuICBhbHR1cmE6IHN0cmluZyxcbiAgbGFyZ3VyYTogc3RyaW5nLFxuICByZXN1bHRhZG86IHN0cmluZyxcbiAgY29yOiBzdHJpbmdcbikge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwiY2FsY3Vsb3NcIilcbiAgICAuaW5zZXJ0KFtcbiAgICAgIHtcbiAgICAgICAgdGFtYW5ob19yb2RhOiB0YW1hbmhvUm9kYSxcbiAgICAgICAgYWx0dXJhOiBhbHR1cmEsXG4gICAgICAgIGxhcmd1cmE6IGxhcmd1cmEsXG4gICAgICAgIHJlc3VsdGFkbzogcmVzdWx0YWRvLFxuICAgICAgICBjb3I6IGNvcixcbiAgICAgIH0sXG4gICAgXSlcbiAgICAuc2VsZWN0KCk7XG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbn1cblxuLy8gTm92YSBmdW7Dp8OjbyBwYXJhIHNhbHZhciBjw6FsY3Vsb3MgZG8gdXN1w6FyaW8gY29tIGxpbWl0ZSBkZSAxMFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhbHZhckNhbGN1bG9Vc3VhcmlvKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgdGFtYW5obzogc3RyaW5nLFxuICBhbHR1cmE6IHN0cmluZyxcbiAgbGFyZ3VyYTogc3RyaW5nLFxuICBwYWNvdGU6IHN0cmluZ1xuKSB7XG4gIHRyeSB7XG4gICAgLy8gMS4gVmVyaWZpY2FyIHF1YW50b3MgY8OhbGN1bG9zIG8gdXN1w6FyaW8gasOhIHRlbVxuICAgIGNvbnN0IHsgZGF0YTogY2FsY3Vsb3MsIGVycm9yOiBjb250YXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiY2FsY3Vsb191c3Vhcmlvc1wiKVxuICAgICAgLnNlbGVjdChcImlkLCBjcmVhdGVkX2F0XCIpXG4gICAgICAuZXEoXCJ1c2VyaWRcIiwgdXNlcklkKVxuICAgICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcblxuICAgIGlmIChjb250YXJFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gY29udGFyIGPDoWxjdWxvcyBkbyB1c3XDoXJpbzpcIiwgY29udGFyRXJyb3IpO1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGNvbnRhckVycm9yIH07XG4gICAgfVxuXG4gICAgLy8gMi4gU2UgasOhIHRpdmVyIDEwIG91IG1haXMsIGV4Y2x1aXIgbyBtYWlzIGFudGlnb1xuICAgIGlmIChjYWxjdWxvcyAmJiBjYWxjdWxvcy5sZW5ndGggPj0gMTApIHtcbiAgICAgIGNvbnN0IGNhbGN1bG9NYWlzQW50aWdvID0gY2FsY3Vsb3NbMF07XG4gICAgICBjb25zdCB7IGVycm9yOiBkZWxldGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJjYWxjdWxvX3VzdWFyaW9zXCIpXG4gICAgICAgIC5kZWxldGUoKVxuICAgICAgICAuZXEoXCJpZFwiLCBjYWxjdWxvTWFpc0FudGlnby5pZCk7XG5cbiAgICAgIGlmIChkZWxldGVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBleGNsdWlyIGPDoWxjdWxvIG1haXMgYW50aWdvOlwiLCBkZWxldGVFcnJvcik7XG4gICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBkZWxldGVFcnJvciB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDMuIEluc2VyaXIgbyBub3ZvIGPDoWxjdWxvXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiY2FsY3Vsb191c3Vhcmlvc1wiKVxuICAgICAgLmluc2VydChbXG4gICAgICAgIHtcbiAgICAgICAgICB1c2VyaWQ6IHVzZXJJZCxcbiAgICAgICAgICB0YW1hbmhvOiB0YW1hbmhvLFxuICAgICAgICAgIGFsdHVyYTogYWx0dXJhLFxuICAgICAgICAgIGxhcmd1cmE6IGxhcmd1cmEsXG4gICAgICAgICAgcGFjb3RlOiBwYWNvdGUsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pXG4gICAgICAuc2VsZWN0KCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIHNhbHZhciBjw6FsY3VsbyBkbyB1c3XDoXJpbzpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIHNhbHZhciBjw6FsY3VsbyBkbyB1c3XDoXJpbzpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gIH1cbn1cblxuLy8gRnVuw6fDo28gcGFyYSBvYnRlciBvcyBjw6FsY3Vsb3MgZG8gdXN1w6FyaW9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYWxjdWxvc1VzdWFyaW8odXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcImNhbGN1bG9fdXN1YXJpb3NcIilcbiAgICAuc2VsZWN0KFwiKlwiKVxuICAgIC5lcShcInVzZXJpZFwiLCB1c2VySWQpXG4gICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhbGN1bG9zKHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJjYWxjdWxvc1wiKVxuICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgLmVxKFwidXNlcl9pZFwiLCB1c2VySWQpXG4gICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbn1cblxuLy8gRnVuw6fDtWVzIHBhcmEgcGVkaWRvc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyaWFyUGVkaWRvKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgaXRlbXM6IGFueVtdLFxuICB0b3RhbDogbnVtYmVyLFxuICB0aXBvRW50cmVnYSA9IFwicmV0aXJhZGFcIixcbiAgbWV0b2RvUGFnYW1lbnRvID0gXCJjYXJ0YW9cIixcbiAgZGFkb3NBZGljaW9uYWlzOiBhbnkgPSB7fVxuKSB7XG4gIHRyeSB7XG4gICAgLy8gQ3JpYXIgbyBwZWRpZG9cbiAgICBjb25zdCB7IGRhdGE6IHBlZGlkbywgZXJyb3I6IHBlZGlkb0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwZWRpZG9zXCIpXG4gICAgICAuaW5zZXJ0KFtcbiAgICAgICAge1xuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICB0b3RhbDogdG90YWwsXG4gICAgICAgICAgdGlwb19lbnRyZWdhOiB0aXBvRW50cmVnYSxcbiAgICAgICAgICBwYWdhbWVudG9fdGlwbzogbWV0b2RvUGFnYW1lbnRvLFxuICAgICAgICAgIHN0YXR1czogXCJwZW5kZW50ZVwiLFxuICAgICAgICAgIGRhZG9zX2FkaWNpb25haXM6IGRhZG9zQWRpY2lvbmFpcywgLy8gQXJtYXplbmEgbyBlbmRlcmXDp28gYWx0ZXJuYXRpdm8gc2UgZXhpc3RpclxuICAgICAgICB9LFxuICAgICAgXSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKHBlZGlkb0Vycm9yKSB0aHJvdyBwZWRpZG9FcnJvcjtcblxuICAgIC8vIEluc2VyaXIgb3MgaXRlbnMgZG8gcGVkaWRvXG4gICAgY29uc3QgaXRlbnMgPSBpdGVtcy5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICBwZWRpZG9faWQ6IHBlZGlkby5pZCxcbiAgICAgIHByb2R1dG9fbm9tZTogaXRlbS5ub21lLFxuICAgICAgcXVhbnRpZGFkZTogaXRlbS5xdWFudGlkYWRlLFxuICAgICAgcHJlY29fdW5pdGFyaW86IGl0ZW0ucHJlY28sXG4gICAgICByZXZlbmRlZG9yX2lkOiBpdGVtLnJldmVuZGVkb3JfaWQsXG4gICAgfSkpO1xuXG4gICAgY29uc3QgeyBlcnJvcjogaXRlbnNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiaXRlbnNfcGVkaWRvXCIpXG4gICAgICAuaW5zZXJ0KGl0ZW5zKTtcblxuICAgIGlmIChpdGVuc0Vycm9yKSB0aHJvdyBpdGVuc0Vycm9yO1xuXG4gICAgcmV0dXJuIHsgZGF0YTogcGVkaWRvLCBlcnJvcjogbnVsbCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGNyaWFyIHBlZGlkbzpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gIH1cbn1cblxuLy8gUmVtb3ZlciBhcyBmdW7Dp8O1ZXMgZ2V0Q2xpZW50ZUJ5VXN1YXJpb0lkIGUgZ2FyYW50aXJDbGllbnRlIHF1ZSBlc3RhdmFtIGNyaWFuZG8gdW1hIHRhYmVsYSBjbGllbnRlcyBkZXNuZWNlc3PDoXJpYVxuXG4vLyBGdW7Dp8OjbyBwYXJhIGJ1c2NhciBwYWNvdGUgYmFzZWFkbyBubyBub21lIGRvIHByb2R1dG9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYWNvdGVCeVByb2R1dG9Ob21lKHByb2R1dG9Ob21lOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICAvLyBNYXBlYXIgbm9tZXMgZGUgcHJvZHV0b3MgcGFyYSBwYWNvdGVzXG4gICAgLy8gVm9jw6ogcG9kZSBhanVzdGFyIGVzc2EgbMOzZ2ljYSBjb25mb3JtZSBzdWEgcmVncmEgZGUgbmVnw7NjaW9cbiAgICBjb25zdCBtYXBlYW1lbnRvUHJvZHV0b3M6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgICBcIk1pY3JvZXNmZXJhcyBBenVsXCI6IDEsXG4gICAgICBcIk1pY3JvZXNmZXJhcyBWZXJtZWxoYVwiOiAyLFxuICAgICAgXCJNaWNyb2VzZmVyYXMgVmVyZGVcIjogMyxcbiAgICAgIFwiTWljcm9lc2ZlcmFzIEFtYXJlbGFcIjogNCxcbiAgICAgIFwiTWljcm9lc2ZlcmFzIFByZXRhXCI6IDUsXG4gICAgICBcIk1pY3JvZXNmZXJhcyBCcmFuY2FcIjogNixcbiAgICB9O1xuXG4gICAgLy8gU2UgZXhpc3RlIHVtIG1hcGVhbWVudG8gZGlyZXRvLCB1c2FyIGVsZVxuICAgIGlmIChtYXBlYW1lbnRvUHJvZHV0b3NbcHJvZHV0b05vbWVdKSB7XG4gICAgICByZXR1cm4geyBkYXRhOiBtYXBlYW1lbnRvUHJvZHV0b3NbcHJvZHV0b05vbWVdLCBlcnJvcjogbnVsbCB9O1xuICAgIH1cblxuICAgIC8vIENhc28gY29udHLDoXJpbywgdGVudGFyIGJ1c2NhciBwb3Igbm9tZSBzaW1pbGFyXG4gICAgY29uc3QgeyBkYXRhOiBwYWNvdGVzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicGFjb3Rlc1wiKVxuICAgICAgLnNlbGVjdChcImlkLCBub21lLCBjb3JcIilcbiAgICAgIC5pbGlrZShcIm5vbWVcIiwgYCUke3Byb2R1dG9Ob21lfSVgKVxuICAgICAgLmxpbWl0KDEpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgcGFjb3RlIHBvciBub21lOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBkYXRhOiAxLCBlcnJvcjogbnVsbCB9OyAvLyBGYWxsYmFjayBwYXJhIElEIDFcbiAgICB9XG5cbiAgICBpZiAocGFjb3RlcyAmJiBwYWNvdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7IGRhdGE6IHBhY290ZXNbMF0uaWQsIGVycm9yOiBudWxsIH07XG4gICAgfVxuXG4gICAgLy8gU2UgbsOjbyBlbmNvbnRyb3UgbmFkYSwgdGVudGFyIGJ1c2NhciBwb3IgY29yXG4gICAgY29uc3QgY29yZXMgPSBbXCJhenVsXCIsIFwidmVybWVsaGFcIiwgXCJ2ZXJkZVwiLCBcImFtYXJlbGFcIiwgXCJwcmV0YVwiLCBcImJyYW5jYVwiXTtcbiAgICBmb3IgKGNvbnN0IGNvciBvZiBjb3Jlcykge1xuICAgICAgaWYgKHByb2R1dG9Ob21lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoY29yKSkge1xuICAgICAgICBjb25zdCB7IGRhdGE6IHBhY290ZVBvckNvciwgZXJyb3I6IGVycm9yQ29yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKFwicGFjb3Rlc1wiKVxuICAgICAgICAgIC5zZWxlY3QoXCJpZFwiKVxuICAgICAgICAgIC5pbGlrZShcImNvclwiLCBgJSR7Y29yfSVgKVxuICAgICAgICAgIC5saW1pdCgxKTtcblxuICAgICAgICBpZiAoIWVycm9yQ29yICYmIHBhY290ZVBvckNvciAmJiBwYWNvdGVQb3JDb3IubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybiB7IGRhdGE6IHBhY290ZVBvckNvclswXS5pZCwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIGZpbmFsXG4gICAgcmV0dXJuIHsgZGF0YTogMSwgZXJyb3I6IG51bGwgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgcGFjb3RlOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZGF0YTogMSwgZXJyb3I6IG51bGwgfTtcbiAgfVxufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIGJ1c2NhciB1bSBwYWNvdGUgdsOhbGlkbyAocG9yIGVucXVhbnRvIHJldG9ybmEgbyBwcmltZWlybyBkaXNwb27DrXZlbClcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYWNvdGVWYWxpZG8oKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhOiBwYWNvdGVzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicGFjb3Rlc1wiKVxuICAgICAgLnNlbGVjdChcImlkXCIpXG4gICAgICAubGltaXQoMSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGJ1c2NhciBwYWNvdGU6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiAxOyAvLyBGYWxsYmFjayBwYXJhIElEIDFcbiAgICB9XG5cbiAgICByZXR1cm4gcGFjb3RlcyAmJiBwYWNvdGVzLmxlbmd0aCA+IDAgPyBwYWNvdGVzWzBdLmlkIDogMTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgcGFjb3RlOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIDE7IC8vIEZhbGxiYWNrIHBhcmEgSUQgMVxuICB9XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgcmVnaXN0cmFyIG11ZGFuw6dhIGRlIHN0YXR1cyBubyBoaXN0w7NyaWNvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0cmFyTXVkYW5jYVN0YXR1cyhcbiAgcGVkaWRvSWQ6IG51bWJlcixcbiAgc3RhdHVzQW50ZXJpb3I6IHN0cmluZyB8IG51bGwsXG4gIHN0YXR1c05vdm86IHN0cmluZyxcbiAgb2JzZXJ2YWNhbz86IHN0cmluZyxcbiAgdXBkYXRlZEJ5PzogbnVtYmVyXG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwZWRpZG9faGlzdG9yaWNvX3N0YXR1c1wiKVxuICAgICAgLmluc2VydChbXG4gICAgICAgIHtcbiAgICAgICAgICBwZWRpZG9faWQ6IHBlZGlkb0lkLFxuICAgICAgICAgIHN0YXR1c19hbnRlcmlvcjogc3RhdHVzQW50ZXJpb3IsXG4gICAgICAgICAgc3RhdHVzX25vdm86IHN0YXR1c05vdm8sXG4gICAgICAgICAgb2JzZXJ2YWNhbzogb2JzZXJ2YWNhbyxcbiAgICAgICAgICB1cGRhdGVkX2J5OiB1cGRhdGVkQnksXG4gICAgICAgIH0sXG4gICAgICBdKVxuICAgICAgLnNlbGVjdCgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyByZWdpc3RyYXIgbXVkYW7Dp2EgZGUgc3RhdHVzOlwiLCBlcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyByZWdpc3RyYXIgbXVkYW7Dp2EgZGUgc3RhdHVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBTdWJzdGl0dWlyIGEgZnVuw6fDo28gY3JpYXJQZWRpZG9Ob3ZvIHBvciBlc3RhIHZlcnPDo28gY29ycmlnaWRhOlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyaWFyUGVkaWRvTm92byhcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHJldmVuZGVkb3JJZDogbnVtYmVyLFxuICBpdGVtczogYW55W10sXG4gIHZhbG9yVG90YWw6IG51bWJlcixcbiAgZnJldGU6IG51bWJlcixcbiAgdGlwb0VudHJlZ2E6IHN0cmluZyxcbiAgbWV0b2RvUGFnYW1lbnRvOiBzdHJpbmcsXG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIkluaWNpYW5kbyBjcmlhw6fDo28gZG8gcGVkaWRvIHBhcmEgdXN1w6FyaW86XCIsIHVzZXJJZCk7XG4gICAgY29uc29sZS5sb2coXCJSZXZlbmRlZG9yIElEOlwiLCByZXZlbmRlZG9ySWQpO1xuICAgIGNvbnNvbGUubG9nKFwiSXRlbXM6XCIsIGl0ZW1zKTtcbiAgICBjb25zb2xlLmxvZyhcIlZhbG9yIFRvdGFsOlwiLCB2YWxvclRvdGFsKTtcbiAgICBjb25zb2xlLmxvZyhcIkZyZXRlOlwiLCBmcmV0ZSk7XG4gICAgY29uc29sZS5sb2coXCJUaXBvIGRlIEVudHJlZ2E6XCIsIHRpcG9FbnRyZWdhKTtcbiAgICBjb25zb2xlLmxvZyhcIk3DqXRvZG8gZGUgUGFnYW1lbnRvOlwiLCBtZXRvZG9QYWdhbWVudG8pO1xuXG4gICAgLy8gQ29udmVydGVyIHVzZXJJZCBwYXJhIG7Dum1lcm9cbiAgICBjb25zdCBjbGllbnRlSWQgPSBOdW1iZXIucGFyc2VJbnQodXNlcklkKTtcblxuICAgIC8vIEJ1c2NhciBvIHVzdWFyaW9faWQgZG8gcmV2ZW5kZWRvciBiYXNlYWRvIG5vIHJldmVuZGVkb3JfaWRcbiAgICBjb25zdCB7IGRhdGE6IHJldmVuZGVkb3JVc3VhcmlvSWQsIGVycm9yOiByZXZlbmRlZG9yRXJyb3IgfSA9XG4gICAgICBhd2FpdCBnZXRVc3VhcmlvSWRSZXZlbmRlZG9yKHJldmVuZGVkb3JJZCk7XG5cbiAgICBpZiAocmV2ZW5kZWRvckVycm9yIHx8ICFyZXZlbmRlZG9yVXN1YXJpb0lkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiRXJybyBhbyBidXNjYXIgcmV2ZW5kZWRvcjogXCIgK1xuICAgICAgICAgIChyZXZlbmRlZG9yRXJyb3I/Lm1lc3NhZ2UgfHwgXCJSZXZlbmRlZG9yIG7Do28gZW5jb250cmFkb1wiKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkNsaWVudGUgSUQ6XCIsIGNsaWVudGVJZCk7XG4gICAgY29uc29sZS5sb2coXCJSZXZlbmRlZG9yIElEOlwiLCByZXZlbmRlZG9ySWQpO1xuICAgIGNvbnNvbGUubG9nKFwiUmV2ZW5kZWRvciBVc3VhcmlvIElEOlwiLCByZXZlbmRlZG9yVXN1YXJpb0lkKTtcblxuICAgIC8vIEdlcmFyIG7Dum1lcm8gZG8gcGVkaWRvIMO6bmljb1xuICAgIGNvbnN0IG51bWVyb1BlZGlkbyA9IGBQRUQtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKClcbiAgICAgIC50b1N0cmluZygzNilcbiAgICAgIC5zdWJzdHIoMiwgNClcbiAgICAgIC50b1VwcGVyQ2FzZSgpfWA7XG5cbiAgICAvLyBEZWZpbmlyIHN0YXR1cyBpbmljaWFsIGJhc2VhZG8gbm8gdGlwbyBkZSBlbnRyZWdhXG4gICAgY29uc3Qgc3RhdHVzSW5pY2lhbCA9XG4gICAgICB0aXBvRW50cmVnYSA9PT0gXCJyZXRpcmFkYVwiXG4gICAgICAgID8gXCJhZ3VhcmRhbmRvX3ByZXBhcmFjYW9cIlxuICAgICAgICA6IFwiYWd1YXJkYW5kb19hY2VpdGVcIjtcblxuICAgIC8vIENyaWFyIG8gcGVkaWRvIHVzYW5kbyBvIHNjaGVtYSBjb3JyZXRvXG4gICAgY29uc3QgeyBkYXRhOiBwZWRpZG8sIGVycm9yOiBwZWRpZG9FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicGVkaWRvc1wiKVxuICAgICAgLmluc2VydChbXG4gICAgICAgIHtcbiAgICAgICAgICBjbGllbnRlX2lkOiBjbGllbnRlSWQsIC8vIElEIGRvIHVzdcOhcmlvIHF1ZSBmZXogYSBjb21wcmFcbiAgICAgICAgICByZXZlbmRlZG9yX2lkOiByZXZlbmRlZG9yVXN1YXJpb0lkLCAvLyBJRCBkbyB1c3XDoXJpbyByZXZlbmRlZG9yIChkYSB0YWJlbGEgdXN1YXJpb3MpXG4gICAgICAgICAgbnVtZXJvOiBudW1lcm9QZWRpZG8sXG4gICAgICAgICAgZnJldGU6IGZyZXRlLFxuICAgICAgICAgIHZhbG9yX3RvdGFsOiB2YWxvclRvdGFsLFxuICAgICAgICAgIHBhZ2FtZW50b190aXBvOiBtZXRvZG9QYWdhbWVudG8sXG4gICAgICAgICAgdGlwb19lbnRyZWdhOiB0aXBvRW50cmVnYSxcbiAgICAgICAgICBzdGF0dXM6IFwicGFnb1wiLCAvLyBTdGF0dXMgZGUgcGFnYW1lbnRvXG4gICAgICAgICAgc3RhdHVzX2RldGFsaGFkbzogc3RhdHVzSW5pY2lhbCwgLy8gU3RhdHVzIGRldGFsaGFkbyBiYXNlYWRvIG5vIHRpcG8gZGUgZW50cmVnYVxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0sXG4gICAgICBdKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAocGVkaWRvRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGNyaWFyIHBlZGlkbzpcIiwgcGVkaWRvRXJyb3IpO1xuICAgICAgdGhyb3cgcGVkaWRvRXJyb3I7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJJbmZvKGNsaWVudGVJZC50b1N0cmluZygpKTtcbiAgICBjb25zb2xlLmxvZyhcIlVzZXI6XCIsIHVzZXIpO1xuXG4gICAgaWYgKCF1c2VyLmRhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzdcOhcmlvIG7Do28gZW5jb250cmFkb1wiKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhdXNlci5kYXRhPy5ub21lIHx8XG4gICAgICAhdXNlci5kYXRhPy5lbWFpbCB8fFxuICAgICAgIXVzZXIuZGF0YT8udGVsZWZvbmUgfHxcbiAgICAgICF1c2VyLmRhdGE/LmNwZlxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGFkb3MgZG8gdXN1w6FyaW8gaW5jb21wbGV0b3NcIik7XG4gICAgfVxuXG4gICAgY29uc3QgY2xpZW50ZSA9IGF3YWl0IGNyZWF0ZU9yVXBkYXRlQ3VzdG9tZXIoe1xuICAgICAgbmFtZTogdXNlci5kYXRhPy5ub21lICsgXCIgXCIgKyB1c2VyLmRhdGE/LnNvYnJlbm9tZSxcbiAgICAgIGVtYWlsOiB1c2VyLmRhdGE/LmVtYWlsLFxuICAgICAgcGhvbmU6IHVzZXIuZGF0YT8udGVsZWZvbmUsXG4gICAgICBtb2JpbGVQaG9uZTogdXNlci5kYXRhPy50ZWxlZm9uZSxcbiAgICAgIGNwZkNucGo6IHVzZXIuZGF0YT8uY3BmLFxuICAgICAgcG9zdGFsQ29kZTogdXNlci5kYXRhPy5jZXAsXG4gICAgICBhZGRyZXNzOiB1c2VyLmRhdGE/LnJ1YSxcbiAgICAgIGFkZHJlc3NOdW1iZXI6IHVzZXIuZGF0YT8ubnVtZXJvLFxuICAgICAgY29tcGxlbWVudDogdXNlci5kYXRhPy5jb21wbGVtZW50byxcbiAgICAgIHByb3ZpbmNlOiB1c2VyLmRhdGE/LmJhaXJybyxcbiAgICAgIGNpdHk6IHVzZXIuZGF0YT8uY2lkYWRlLFxuICAgICAgc3RhdGU6IHVzZXIuZGF0YT8udWYsXG4gICAgICBleHRlcm5hbFJlZmVyZW5jZTogdXNlci5kYXRhPy5pZC50b1N0cmluZygpLFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJDbGllbnRlIGNyaWFkbzpcIiwgY2xpZW50ZSk7XG5cbiAgICBjb25zdCBwYWdhbWVudG9EYXRhOiBBc2Fhc1BheW1lbnQgPSB7XG4gICAgICBiaWxsaW5nVHlwZTogbWV0b2RvUGFnYW1lbnRvIGFzXG4gICAgICAgIHwgXCJCT0xFVE9cIlxuICAgICAgICB8IFwiQ1JFRElUX0NBUkRcIlxuICAgICAgICB8IFwiUElYXCJcbiAgICAgICAgfCBcIlVOREVGSU5FRFwiLFxuICAgICAgY3VzdG9tZXI6IGNsaWVudGUuaWQsXG4gICAgICB2YWx1ZTogTnVtYmVyKHZhbG9yVG90YWwpICsgTnVtYmVyKGZyZXRlKSxcbiAgICAgIGR1ZURhdGU6IFwiMjAyNS0wNy0yOVwiLFxuICAgICAgZXh0ZXJuYWxSZWZlcmVuY2U6IHBlZGlkby5pZC50b1N0cmluZygpLFxuICAgICAgZGVzY3JpcHRpb246IGAjJHtudW1lcm9QZWRpZG99YCxcbiAgICB9O1xuXG4gICAgaWYgKG1ldG9kb1BhZ2FtZW50byA9PT0gXCJDUkVESVRfQ0FSRFwiKSB7XG4gICAgICBwYWdhbWVudG9EYXRhLmNyZWRpdENhcmQgPSB7XG4gICAgICAgIGhvbGRlck5hbWU6IHVzZXIuZGF0YS5ub21lICsgXCIgXCIgKyB1c2VyLmRhdGEuc29icmVub21lLFxuICAgICAgICBudW1iZXI6IFwiNDExMTExMTExMTExMTExMVwiLFxuICAgICAgICBleHBpcnlNb250aDogXCIxMlwiLFxuICAgICAgICBleHBpcnlZZWFyOiBcIjIwMjVcIixcbiAgICAgICAgY2N2OiBcIjEyM1wiLFxuICAgICAgfTtcbiAgICAgIHBhZ2FtZW50b0RhdGEuaW5zdGFsbG1lbnRDb3VudCA9IDE7XG4gICAgICBwYWdhbWVudG9EYXRhLnRvdGFsVmFsdWUgPSBOdW1iZXIodmFsb3JUb3RhbCkgKyBOdW1iZXIoZnJldGUpO1xuICAgICAgcGFnYW1lbnRvRGF0YS5pbnN0YWxsbWVudFZhbHVlID0gTnVtYmVyKHZhbG9yVG90YWwpICsgTnVtYmVyKGZyZXRlKTtcbiAgICAgIHBhZ2FtZW50b0RhdGEuZGlzY291bnQgPSB7XG4gICAgICAgIHZhbHVlOiAwLFxuICAgICAgICBkdWVEYXRlTGltaXREYXlzOiAwLFxuICAgICAgICB0eXBlOiBcIkZJWEVEXCIsXG4gICAgICB9O1xuICAgICAgcGFnYW1lbnRvRGF0YS5pbnRlcmVzdCA9IHtcbiAgICAgICAgdmFsdWU6IDAsXG4gICAgICB9O1xuICAgICAgcGFnYW1lbnRvRGF0YS5maW5lID0ge1xuICAgICAgICB2YWx1ZTogMCxcbiAgICAgIH07XG4gICAgICBwYWdhbWVudG9EYXRhLmNyZWRpdENhcmRIb2xkZXJJbmZvID0ge1xuICAgICAgICBuYW1lOiB1c2VyLmRhdGEubm9tZSArIFwiIFwiICsgdXNlci5kYXRhLnNvYnJlbm9tZSxcbiAgICAgICAgZW1haWw6IHVzZXIuZGF0YS5lbWFpbCxcbiAgICAgICAgY3BmQ25wajogdXNlci5kYXRhLmNwZixcbiAgICAgICAgcG9zdGFsQ29kZTogdXNlci5kYXRhLmNlcCxcbiAgICAgICAgYWRkcmVzc051bWJlcjogdXNlci5kYXRhLm51bWVybyxcbiAgICAgICAgYWRkcmVzc0NvbXBsZW1lbnQ6IHVzZXIuZGF0YS5jb21wbGVtZW50byB8fCBcIlwiLFxuICAgICAgICBwaG9uZTogdXNlci5kYXRhLnRlbGVmb25lLFxuICAgICAgICBtb2JpbGVQaG9uZTogdXNlci5kYXRhLnRlbGVmb25lLFxuICAgICAgfTtcbiAgICAgIHBhZ2FtZW50b0RhdGEucmVtb3RlSXAgPSBcIjEyNy4wLjAuMVwiO1xuICAgIH1cblxuICAgIGNvbnN0IHBhZ2FtZW50byA9IGF3YWl0IGNyZWF0ZVBheW1lbnQocGFnYW1lbnRvRGF0YSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIlBhZ2FtZW50byBjcmlhZG86XCIsIHBhZ2FtZW50byk7XG5cbiAgICBpZiAoIXBhZ2FtZW50by5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJybyBhbyBjcmlhciBwYWdhbWVudG8gbm8gQXNhYXNcIik7XG4gICAgfVxuXG4gICAgbGV0IGRhZG9zUGFnYW1lbnRvID0gbnVsbDtcbiAgICBpZihtZXRvZG9QYWdhbWVudG8gPT09IFwiUElYXCIgfHwgbWV0b2RvUGFnYW1lbnRvID09PSBcIkJPTEVUT1wiKSB7XG4gICAgICBkYWRvc1BhZ2FtZW50byA9IGF3YWl0IGdldFBpeFFyQ29kZShwYWdhbWVudG8uaWQpO1xuICAgICAgY29uc29sZS5sb2coXCJRUiBDb2RlIFBJWDpcIiwgZGFkb3NQYWdhbWVudG8pO1xuICAgICAgXG4gICAgfVxuXG4gICAgbGV0IHBpeCA9IG51bGw7XG4gICAgbGV0IGJvbGV0byA9IG51bGw7XG5cbiAgICBpZihkYWRvc1BhZ2FtZW50bykge1xuICAgICAgcGl4ID0gZGFkb3NQYWdhbWVudG8ucGl4O1xuICAgICAgYm9sZXRvID0gZGFkb3NQYWdhbWVudG8uYmFua1NsaXA7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0cmFyIG8gc3RhdHVzIGluaWNpYWwgbm8gaGlzdMOzcmljb1xuICAgIGF3YWl0IHJlZ2lzdHJhck11ZGFuY2FTdGF0dXMoXG4gICAgICBwZWRpZG8uaWQsXG4gICAgICBudWxsLFxuICAgICAgc3RhdHVzSW5pY2lhbCxcbiAgICAgIFwiUGVkaWRvIGNyaWFkb1wiLFxuICAgICAgbnVsbFxuICAgICk7XG5cbiAgICAvLyBQcmVwYXJhciBpdGVucyBwYXJhIGluc2Vyw6fDo28gY29tIHBhY290ZV9pZCBjb3JyZXRvIHBhcmEgY2FkYSBpdGVtXG4gICAgY29uc3QgaXRlbnNQYXJhSW5zZXJpciA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgaXRlbXMubWFwKGFzeW5jIChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAvLyBCdXNjYXIgbyBwYWNvdGVfaWQgY29ycmV0byBiYXNlYWRvIG5vIG5vbWUgZG8gcHJvZHV0b1xuICAgICAgICBjb25zdCB7IGRhdGE6IHBhY290ZUlkIH0gPSBhd2FpdCBnZXRQYWNvdGVCeVByb2R1dG9Ob21lKGl0ZW0ubm9tZSk7XG5cbiAgICAgICAgY29uc3QgaXRlbVBhcmFJbnNlcmlyID0ge1xuICAgICAgICAgIHBlZGlkb19pZDogcGVkaWRvLmlkLFxuICAgICAgICAgIHBhY290ZV9pZDogcGFjb3RlSWQsXG4gICAgICAgICAgcXRkOiBOdW1iZXIoaXRlbS5xdWFudGlkYWRlKSB8fCAwLFxuICAgICAgICAgIHZhbG9yX3VuaXRhcmlvOiBOdW1iZXIoaXRlbS5wcmVjbykgfHwgMCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zb2xlLmxvZyhgSXRlbSAke2luZGV4ICsgMX0gcHJlcGFyYWRvOmAsIGl0ZW1QYXJhSW5zZXJpcik7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9kdXRvOiAke2l0ZW0ubm9tZX0gLT4gUGFjb3RlIElEOiAke3BhY290ZUlkfWApO1xuICAgICAgICByZXR1cm4gaXRlbVBhcmFJbnNlcmlyO1xuICAgICAgfSlcbiAgICApO1xuXG4gICAgY29uc29sZS5sb2coXCJUb2RvcyBvcyBpdGVucyBwcmVwYXJhZG9zOlwiLCBpdGVuc1BhcmFJbnNlcmlyKTtcblxuICAgIC8vIEluc2VyaXIgb3MgaXRlbnMgZG8gcGVkaWRvXG4gICAgY29uc3QgeyBkYXRhOiBpdGVuc0luc2VyaWRvcywgZXJyb3I6IGl0ZW5zRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInBlZGlkb19pdGVuc1wiKVxuICAgICAgLmluc2VydChpdGVuc1BhcmFJbnNlcmlyKVxuICAgICAgLnNlbGVjdCgpO1xuXG4gICAgaWYgKGl0ZW5zRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGRldGFsaGFkbyBhbyBpbnNlcmlyIGl0ZW5zIGRvIHBlZGlkbzpcIiwgaXRlbnNFcnJvcik7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRGFkb3MgcXVlIHRlbnRhbW9zIGluc2VyaXI6XCIsIGl0ZW5zUGFyYUluc2VyaXIpO1xuICAgICAgdGhyb3cgaXRlbnNFcnJvcjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkl0ZW5zIGluc2VyaWRvcyBjb20gc3VjZXNzbzpcIiwgaXRlbnNJbnNlcmlkb3MpO1xuICAgIGNvbnNvbGUubG9nKFwiUGFnYW1lbnRvIGNyaWFkbyBjb20gc3VjZXNzbzpcIiwgcGl4KTtcbiAgICBjb25zb2xlLmxvZyhcIlBhZ2FtZW50byBjcmlhZG8gY29tIHN1Y2Vzc286XCIsIGJvbGV0byk7XG4gICAgY29uc29sZS5sb2coXCJQYWdhbWVudG8gY3JpYWRvIGNvbSBzdWNlc3NvOlwiLCBwYWdhbWVudG8uaWQpO1xuXG4gICAgcmV0dXJuIHsgZGF0YTogcGVkaWRvLCBwaXgsIGJvbGV0bywgcGFnYW1lbnRvSWQ6IHBhZ2FtZW50by5pZCwgZXJyb3I6IG51bGwgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBjcmlhciBwZWRpZG86XCIsIGVycm9yKTtcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICB9XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgYXR1YWxpemFyIHN0YXR1cyBkbyBwZWRpZG9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdHVhbGl6YXJTdGF0dXNQZWRpZG8oXG4gIHBlZGlkb0lkOiBudW1iZXIsXG4gIG5vdm9TdGF0dXM6IHN0cmluZyxcbiAgZGF0YUVzdGltYWRhPzogc3RyaW5nLFxuICBvYnNlcnZhY29lcz86IHN0cmluZyxcbiAgdXBkYXRlZEJ5PzogbnVtYmVyXG4pIHtcbiAgdHJ5IHtcbiAgICAvLyBQcmltZWlybywgYnVzY2FyIG8gc3RhdHVzIGF0dWFsXG4gICAgY29uc3QgeyBkYXRhOiBwZWRpZG9BdHVhbCwgZXJyb3I6IGVycm9yQnVzY2EgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInBlZGlkb3NcIilcbiAgICAgIC5zZWxlY3QoXCJzdGF0dXNfZGV0YWxoYWRvXCIpXG4gICAgICAuZXEoXCJpZFwiLCBwZWRpZG9JZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvckJ1c2NhKSB7XG4gICAgICB0aHJvdyBlcnJvckJ1c2NhO1xuICAgIH1cblxuICAgIC8vIFByZXBhcmFyIGRhZG9zIHBhcmEgYXR1YWxpemHDp8Ojb1xuICAgIGNvbnN0IGRhZG9zQXR1YWxpemFjYW86IGFueSA9IHtcbiAgICAgIHN0YXR1c19kZXRhbGhhZG86IG5vdm9TdGF0dXMsXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfTtcblxuICAgIGlmIChkYXRhRXN0aW1hZGEpIHtcbiAgICAgIGRhZG9zQXR1YWxpemFjYW8uZGF0YV9lc3RpbWFkYV9lbnRyZWdhID0gZGF0YUVzdGltYWRhO1xuICAgIH1cblxuICAgIGlmIChvYnNlcnZhY29lcykge1xuICAgICAgZGFkb3NBdHVhbGl6YWNhby5vYnNlcnZhY29lc19yZXZlbmRlZG9yID0gb2JzZXJ2YWNvZXM7XG4gICAgfVxuXG4gICAgLy8gU2UgbyBzdGF0dXMgZm9yIFwiZW50cmVndWVcIiBvdSBcInJldGlyYWRvXCIsIGRlZmluaXIgZGF0YSByZWFsXG4gICAgaWYgKG5vdm9TdGF0dXMgPT09IFwiZW50cmVndWVcIiB8fCBub3ZvU3RhdHVzID09PSBcInJldGlyYWRvXCIpIHtcbiAgICAgIGRhZG9zQXR1YWxpemFjYW8uZGF0YV9lbnRyZWdhX3JlYWwgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgLy8gQXR1YWxpemFyIG8gcGVkaWRvXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicGVkaWRvc1wiKVxuICAgICAgLnVwZGF0ZShkYWRvc0F0dWFsaXphY2FvKVxuICAgICAgLmVxKFwiaWRcIiwgcGVkaWRvSWQpXG4gICAgICAuc2VsZWN0KCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIC8vIFJlZ2lzdHJhciBtdWRhbsOnYSBubyBoaXN0w7NyaWNvXG4gICAgYXdhaXQgcmVnaXN0cmFyTXVkYW5jYVN0YXR1cyhcbiAgICAgIHBlZGlkb0lkLFxuICAgICAgcGVkaWRvQXR1YWwuc3RhdHVzX2RldGFsaGFkbyxcbiAgICAgIG5vdm9TdGF0dXMsXG4gICAgICBvYnNlcnZhY29lcyxcbiAgICAgIHVwZGF0ZWRCeVxuICAgICk7XG5cbiAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGF0dWFsaXphciBzdGF0dXMgZG8gcGVkaWRvOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGVkaWRvcyh1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwicGVkaWRvc1wiKVxuICAgIC5zZWxlY3QoXG4gICAgICBgXG4gICAgICAqLFxuICAgICAgaXRlbnNfcGVkaWRvOml0ZW5zX3BlZGlkbyhcbiAgICAgICAgKixcbiAgICAgICAgcHJvZHV0bzpwcm9kdXRvcygqKVxuICAgICAgKVxuICAgIGBcbiAgICApXG4gICAgLmVxKFwidXNlcl9pZFwiLCB1c2VySWQpXG4gICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbn1cblxuLy8gU3Vic3RpdHVpciBhIGZ1bsOnw6NvIGdldFBlZGlkb3NDbGllbnRlIHBvciBlc3RhIHZlcnPDo28gY29ycmlnaWRhOlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBlZGlkb3NDbGllbnRlKHVzZXJJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJCdXNjYW5kbyBwZWRpZG9zIHBhcmEgdXN1w6FyaW86XCIsIHVzZXJJZCk7XG5cbiAgICAvLyBDb252ZXJ0ZXIgdXNlcklkIHBhcmEgbsO6bWVyb1xuICAgIGNvbnN0IGNsaWVudGVJZCA9IE51bWJlci5wYXJzZUludCh1c2VySWQpO1xuXG4gICAgLy8gQnVzY2FyIHBlZGlkb3MgdXNhbmRvIG8gY2xpZW50ZV9pZCBkaXJldGFtZW50ZVxuICAgIGNvbnN0IHsgZGF0YTogcGVkaWRvcywgZXJyb3I6IHBlZGlkb3NFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicGVkaWRvc1wiKVxuICAgICAgLnNlbGVjdChcbiAgICAgICAgYFxuICAgICAgICAqLFxuICAgICAgICBwZWRpZG9faXRlbnM6cGVkaWRvX2l0ZW5zKFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHBlZGlkb19pZCxcbiAgICAgICAgICBwYWNvdGVfaWQsXG4gICAgICAgICAgcXRkLFxuICAgICAgICAgIHZhbG9yX3VuaXRhcmlvLFxuICAgICAgICAgIHBhY290ZXM6cGFjb3RlcyhpZCwgZGVzY3JpY2FvLCBjb3IsIGltYWdlbSlcbiAgICAgICAgKVxuICAgICAgYFxuICAgICAgKVxuICAgICAgLmVxKFwiY2xpZW50ZV9pZFwiLCBjbGllbnRlSWQpIC8vIENvcnJpZ2lkbzogY2xpZW50ZV9pZCBlbSB2ZXogZGUgY2xpZW50X2lkXG4gICAgICAub3JkZXIoXCJjcmVhdGVkX2F0XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgIGNvbnNvbGUubG9nKFwiUGVkaWRvcyBlbmNvbnRyYWRvczpcIiwgcGVkaWRvcz8ubGVuZ3RoIHx8IDApO1xuXG4gICAgaWYgKHBlZGlkb3NFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gYnVzY2FyIHBlZGlkb3M6XCIsIHBlZGlkb3NFcnJvcik7XG4gICAgICB0aHJvdyBwZWRpZG9zRXJyb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZGF0YTogcGVkaWRvcyB8fCBbXSwgZXJyb3I6IG51bGwgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgcGVkaWRvcyBkbyBjbGllbnRlOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZGF0YTogW10sIGVycm9yIH07XG4gIH1cbn1cblxuLy8gRnVuw6fDo28gcGFyYSBidXNjYXIgdGFtYW5ob3MgZGUgcm9kYXMgZGlzcG9uw612ZWlzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGFtYW5ob3MoKSB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJ0YW1hbmhvc1wiKVxuICAgIC5zZWxlY3QoXCJpZCwgbm9tZVwiKVxuICAgIC5vcmRlcihcIm5vbWVcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG5cbiAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbn1cblxuLy8gRnVuw6fDo28gcGFyYSBidXNjYXIgYWx0dXJhcyBkaXNwb27DrXZlaXMgY29tIGJhc2Ugbm8gdGFtYW5obyBkYSByb2RhXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWx0dXJhc0J5VGFtYW5ob0lkKHRhbWFuaG9JZDogc3RyaW5nKSB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJhbHR1cmFzXCIpXG4gICAgLnNlbGVjdChcImlkLCB2YWxvclwiKVxuICAgIC5lcShcInRhbWFuaG9faWRcIiwgdGFtYW5ob0lkKVxuICAgIC5vcmRlcihcInZhbG9yXCIsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xuXG4gIC8vIFJlbW92ZXIgZHVwbGljYXRhcyBiYXNlYWRvIG5vIHZhbG9yXG4gIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHVuaXF1ZUFsdHVyYXMgPSBkYXRhLnJlZHVjZSgoYWNjOiBhbnlbXSwgY3VycmVudCkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RzID0gYWNjLmZpbmQoKGl0ZW0pID0+IGl0ZW0udmFsb3IgPT09IGN1cnJlbnQudmFsb3IpO1xuICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgYWNjLnB1c2goY3VycmVudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIFtdKTtcblxuICAgIHJldHVybiB7IGRhdGE6IHVuaXF1ZUFsdHVyYXMsIGVycm9yIH07XG4gIH1cblxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9O1xufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIGJ1c2NhciBsYXJndXJhcyBiYXNlZCBvbiBhbHR1cmFfaWRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMYXJndXJhc0J5QWx0dXJhSWQoYWx0dXJhSWQ6IHN0cmluZykge1xuICBjb25zb2xlLmxvZyhcIvCflI0gQnVzY2FuZG8gbGFyZ3VyYXMgcGFyYSBhbHR1cmFJZDpcIiwgYWx0dXJhSWQpO1xuXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJsYXJndXJhc1wiKVxuICAgIC5zZWxlY3QoXCJpZCwgdmFsb3JcIilcbiAgICAuZXEoXCJhbHR1cmFfaWRcIiwgYWx0dXJhSWQpXG4gICAgLm9yZGVyKFwidmFsb3JcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG5cbiAgLy8gUmVtb3ZlciBkdXBsaWNhdGFzIGJhc2VhZG8gbm8gdmFsb3JcbiAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgdW5pcXVlTGFyZ3VyYXMgPSBkYXRhLnJlZHVjZSgoYWNjOiBhbnlbXSwgY3VycmVudCkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RzID0gYWNjLmZpbmQoKGl0ZW0pID0+IGl0ZW0udmFsb3IgPT09IGN1cnJlbnQudmFsb3IpO1xuICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgYWNjLnB1c2goY3VycmVudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnNvbGUubG9nKFwi8J+TjyBMYXJndXJhcyDDum5pY2FzIGVuY29udHJhZGFzOlwiLCB7XG4gICAgICBkYXRhOiB1bmlxdWVMYXJndXJhcyxcbiAgICAgIGVycm9yLFxuICAgIH0pO1xuICAgIHJldHVybiB7IGRhdGE6IHVuaXF1ZUxhcmd1cmFzLCBlcnJvciB9O1xuICB9XG5cbiAgY29uc29sZS5sb2coXCLwn5OPIExhcmd1cmFzIGVuY29udHJhZGFzOlwiLCB7IGRhdGEsIGVycm9yIH0pO1xuICByZXR1cm4geyBkYXRhLCBlcnJvciB9O1xufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIGJ1c2NhciBwYWNrYWdlIGRldGFpbHMgYnkgbGFyZ3VyYV9pZFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhY290ZUJ5TGFyZ3VyYUlkKGxhcmd1cmFJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCLwn5SNIEJ1c2NhbmRvIHBhY290ZSBwYXJhIGxhcmd1cmFJZDpcIiwgbGFyZ3VyYUlkKTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInBhY290ZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAuZXEoXCJsYXJndXJhX2lkXCIsIGxhcmd1cmFJZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGNvbnNvbGUubG9nKFwi8J+TpiBSZXN1bHRhZG8gZGEgYnVzY2E6XCIsIHsgZGF0YSwgZXJyb3IgfSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJybyBhbyBidXNjYXIgcGFjb3RlIHBvciBsYXJndXJhX2lkOlwiLCBlcnJvcik7XG4gICAgICAvLyBGYWxsYmFjazogcmV0b3JuYXIgdW0gcGFjb3RlIHBhZHLDo29cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogMSxcbiAgICAgICAgICBub21lOiBcIkxUUDYwXCIsXG4gICAgICAgICAgY29yOiBcIiM0QTQ5NTNcIixcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICghZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coXCJOZW5odW0gcGFjb3RlIGVuY29udHJhZG8gcGFyYSBsYXJndXJhX2lkOlwiLCBsYXJndXJhSWQpO1xuICAgICAgLy8gRmFsbGJhY2s6IHJldG9ybmFyIHVtIHBhY290ZSBwYWRyw6NvXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgbm9tZTogXCJMVFA2MFwiLFxuICAgICAgICAgIGNvcjogXCIjNEE0OTUzXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBBanVzdGFyIGRhZG9zIHNlIG5vbWUgZXN0aXZlciBudWxsXG4gICAgY29uc3QgcGFjb3RlQWp1c3RhZG8gPSB7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIG5vbWU6IGRhdGEubm9tZSB8fCBkYXRhLmRlc2NyaWNhbyB8fCBcIkxUUDYwXCIsXG4gICAgICBjb3I6IGRhdGEuY29yIHx8IFwiIzk0OTY5OFwiLCAvLyBDb3IgcGFkcsOjbyBiYXNlYWRhIG5vcyBkYWRvcyBleGlzdGVudGVzXG4gICAgfTtcblxuICAgIHJldHVybiB7IGRhdGE6IHBhY290ZUFqdXN0YWRvLCBlcnJvcjogbnVsbCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGJ1c2NhciBwYWNvdGU6XCIsIGVycm9yKTtcbiAgICAvLyBGYWxsYmFjazogcmV0b3JuYXIgdW0gcGFjb3RlIHBhZHLDo29cbiAgICByZXR1cm4ge1xuICAgICAgZGF0YToge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgbm9tZTogXCJMVFA2MFwiLFxuICAgICAgICBjb3I6IFwiIzRBNDk1M1wiLFxuICAgICAgfSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH07XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT0gRlVOw4fDlUVTIERPIENBUlJJTkhPID09PT09PT09PT09PT09PT09PT09XG5cbi8vIEJ1c2NhciBjYXJyaW5obyBkbyB1c3XDoXJpb1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhcnJpbmhvVXN1YXJpbyh1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwiY2FycmluaG9fdXN1YXJpb3NcIilcbiAgICAuc2VsZWN0KFwiKlwiKVxuICAgIC5lcShcInVzZXJfaWRcIiwgdXNlcklkKVxuICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH07XG59XG5cbi8vIEFkaWNpb25hciBpdGVtIGFvIGNhcnJpbmhvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRpY2lvbmFySXRlbUNhcnJpbmhvKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgcHJvZHV0b05vbWU6IHN0cmluZyxcbiAgcXVhbnRpZGFkZSA9IDUsXG4gIGltYWdlbT86IHN0cmluZ1xuKSB7XG4gIC8vIEVuc3VyZSBxdWFudGl0eSBpcyBhIG11bHRpcGxlIG9mIDUgYW5kIGF0IGxlYXN0IDVcbiAgY29uc3QgYWRqdXN0ZWRRdWFudGl0eSA9IE1hdGgubWF4KE1hdGgucm91bmQocXVhbnRpZGFkZSAvIDUpICogNSwgNSk7XG5cbiAgLy8gVmVyaWZpY2FyIHNlIG8gaXRlbSBqw6EgZXhpc3RlIG5vIGNhcnJpbmhvXG4gIGNvbnN0IHsgZGF0YTogaXRlbUV4aXN0ZW50ZSwgZXJyb3I6IGVycm9yQnVzY2EgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJjYXJyaW5ob191c3Vhcmlvc1wiKVxuICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgLmVxKFwidXNlcl9pZFwiLCB1c2VySWQpXG4gICAgLmVxKFwicHJvZHV0b19ub21lXCIsIHByb2R1dG9Ob21lKVxuICAgIC5zaW5nbGUoKTtcblxuICBpZiAoZXJyb3JCdXNjYSAmJiBlcnJvckJ1c2NhLmNvZGUgIT09IFwiUEdSU1QxMTZcIikge1xuICAgIC8vIFBHUlNUMTE2ID0gTm8gcm93cyBmb3VuZCAoZXNwZXJhZG8gc2UgaXRlbSBuw6NvIGV4aXN0ZSlcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogZXJyb3JCdXNjYSB9O1xuICB9XG5cbiAgaWYgKGl0ZW1FeGlzdGVudGUpIHtcbiAgICAvLyBJdGVtIGrDoSBleGlzdGUsIGFkaWNpb25hciA1IHVuaWRhZGVzXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiY2FycmluaG9fdXN1YXJpb3NcIilcbiAgICAgIC51cGRhdGUoe1xuICAgICAgICBxdWFudGlkYWRlOiBpdGVtRXhpc3RlbnRlLnF1YW50aWRhZGUgKyA1LFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9KVxuICAgICAgLmVxKFwiaWRcIiwgaXRlbUV4aXN0ZW50ZS5pZClcbiAgICAgIC5zZWxlY3QoKTtcblxuICAgIHJldHVybiB7IGRhdGEsIGVycm9yIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlbSBuw6NvIGV4aXN0ZSwgY3JpYXIgbm92byBjb20gcXVhbnRpZGFkZSBhanVzdGFkYVxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNhcnJpbmhvX3VzdWFyaW9zXCIpXG4gICAgICAuaW5zZXJ0KFtcbiAgICAgICAge1xuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICBwcm9kdXRvX25vbWU6IHByb2R1dG9Ob21lLFxuICAgICAgICAgIHF1YW50aWRhZGU6IGFkanVzdGVkUXVhbnRpdHksXG4gICAgICAgICAgaW1hZ2VtOiBpbWFnZW0sXG4gICAgICAgIH0sXG4gICAgICBdKVxuICAgICAgLnNlbGVjdCgpO1xuXG4gICAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBBdHVhbGl6YXIgcXVhbnRpZGFkZSBkZSBpdGVtIG5vIGNhcnJpbmhvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXR1YWxpemFyUXVhbnRpZGFkZUNhcnJpbmhvKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgcHJvZHV0b05vbWU6IHN0cmluZyxcbiAgcXVhbnRpZGFkZTogbnVtYmVyXG4pIHtcbiAgLy8gRW5zdXJlIHF1YW50aXR5IGlzIGEgbXVsdGlwbGUgb2YgNSBhbmQgYXQgbGVhc3QgNVxuICBjb25zdCBhZGp1c3RlZFF1YW50aXR5ID0gTWF0aC5tYXgoTWF0aC5yb3VuZChxdWFudGlkYWRlIC8gNSkgKiA1LCA1KTtcblxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwiY2FycmluaG9fdXN1YXJpb3NcIilcbiAgICAudXBkYXRlKHtcbiAgICAgIHF1YW50aWRhZGU6IGFkanVzdGVkUXVhbnRpdHksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSlcbiAgICAuZXEoXCJ1c2VyX2lkXCIsIHVzZXJJZClcbiAgICAuZXEoXCJwcm9kdXRvX25vbWVcIiwgcHJvZHV0b05vbWUpXG4gICAgLnNlbGVjdCgpO1xuXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH07XG59XG5cbi8vIFJlbW92ZXIgaXRlbSBkbyBjYXJyaW5ob1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZXJJdGVtQ2FycmluaG8odXNlcklkOiBzdHJpbmcsIHByb2R1dG9Ob21lOiBzdHJpbmcpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcImNhcnJpbmhvX3VzdWFyaW9zXCIpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmVxKFwidXNlcl9pZFwiLCB1c2VySWQpXG4gICAgLmVxKFwicHJvZHV0b19ub21lXCIsIHByb2R1dG9Ob21lKTtcblxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9O1xufVxuXG4vLyBMaW1wYXIgY2FycmluaG8gZG8gdXN1w6FyaW9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaW1wYXJDYXJyaW5ob1VzdWFyaW8odXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcImNhcnJpbmhvX3VzdWFyaW9zXCIpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmVxKFwidXNlcl9pZFwiLCB1c2VySWQpO1xuXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH07XG59XG5cbi8vIEF0dWFsaXphciBjYXJyaW5obyBjb21wbGV0byBkbyB1c3XDoXJpb1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF0dWFsaXphckNhcnJpbmhvVXN1YXJpbyh1c2VySWQ6IHN0cmluZywgaXRlbXM6IGFueVtdKSB7XG4gIHRyeSB7XG4gICAgLy8gUHJpbWVpcm8sIGxpbXBhciBvIGNhcnJpbmhvIGF0dWFsXG4gICAgYXdhaXQgbGltcGFyQ2FycmluaG9Vc3VhcmlvKHVzZXJJZCk7XG5cbiAgICAvLyBTZSBuw6NvIGjDoSBpdGVucywgYXBlbmFzIHJldG9ybmFyIHN1Y2Vzc29cbiAgICBpZiAoIWl0ZW1zIHx8IGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfTtcbiAgICB9XG5cbiAgICAvLyBJbnNlcmlyIHRvZG9zIG9zIG5vdm9zIGl0ZW5zXG4gICAgY29uc3QgaXRlbnNQYXJhSW5zZXJpciA9IGl0ZW1zLm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgIHByb2R1dG9fbm9tZTogaXRlbS5ub21lLFxuICAgICAgcXVhbnRpZGFkZTogaXRlbS5xdWFudGlkYWRlLFxuICAgICAgaW1hZ2VtOiBpdGVtLmltYWdlbSxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KSk7XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjYXJyaW5ob191c3Vhcmlvc1wiKVxuICAgICAgLmluc2VydChpdGVuc1BhcmFJbnNlcmlyKVxuICAgICAgLnNlbGVjdCgpO1xuXG4gICAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBhdHVhbGl6YXIgY2FycmluaG86XCIsIGVycm9yKTtcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09IEZVTsOHw5VFUyBERSBSRVZFTkRFRE9SRVMgRSBFU1RPUVVFID09PT09PT09PT09PT09PT09PT09XG5cbi8vIEJ1c2NhciByZXZlbmRlZG9yZXMgcXVlIHBvc3N1ZW0gdW0gcHJvZHV0byBlc3BlY8OtZmljbyBlbSBlc3RvcXVlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmV2ZW5kZWRvcmVzQ29tUHJvZHV0byhwcm9kdXRvTm9tZTogc3RyaW5nKSB7XG4gIC8vIFVzYW5kbyBKT0lOIG1hbnVhbCBlbSB2ZXogZGUgcmVsYWNpb25hbWVudG9cbiAgY29uc3QgeyBkYXRhOiBlc3RvcXVlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcInJldmVuZGVkb3JfZXN0b3F1ZVwiKVxuICAgIC5zZWxlY3QoXG4gICAgICBgXG4gICAgICBpZCxcbiAgICAgIHJldmVuZGVkb3JfaWQsXG4gICAgICBwcm9kdXRvLFxuICAgICAgcXVhbnRpZGFkZSxcbiAgICAgIHByZWNvLFxuICAgICAgc3RhdHVzXG4gICAgYFxuICAgIClcbiAgICAuZXEoXCJwcm9kdXRvXCIsIHByb2R1dG9Ob21lKVxuICAgIC5ndChcInF1YW50aWRhZGVcIiwgMCk7IC8vIEFwZW5hcyBjb20gZXN0b3F1ZSBkaXNwb27DrXZlbFxuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gIH1cblxuICAvLyBCdXNjYXIgaW5mb3JtYcOnw7VlcyBkb3MgcmV2ZW5kZWRvcmVzXG4gIGNvbnN0IHJldmVuZGVkb3JJZHMgPSBlc3RvcXVlPy5tYXAoKGl0ZW0pID0+IGl0ZW0ucmV2ZW5kZWRvcl9pZCkgfHwgW107XG5cbiAgaWYgKHJldmVuZGVkb3JJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgZGF0YTogW10sIGVycm9yOiBudWxsIH07XG4gIH1cblxuICBjb25zdCB7IGRhdGE6IHJldmVuZGVkb3JlcywgZXJyb3I6IHJldmVuZGVkb3Jlc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwicmV2ZW5kZWRvcmVzXCIpXG4gICAgLnNlbGVjdChcbiAgICAgIGBcbiAgICAgIGlkLFxuICAgICAgdXN1YXJpb19pZCxcbiAgICAgIGxvamEsXG4gICAgICBjaWRhZGUsXG4gICAgICB1ZixcbiAgICAgIGZyZXRlLFxuICAgICAgdmVuZGFzLFxuICAgICAgc3RhdHVzXG4gICAgYFxuICAgIClcbiAgICAuaW4oXCJpZFwiLCByZXZlbmRlZG9ySWRzKTtcblxuICBpZiAocmV2ZW5kZWRvcmVzRXJyb3IpIHtcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogcmV2ZW5kZWRvcmVzRXJyb3IgfTtcbiAgfVxuXG4gIC8vIENvbWJpbmFyIG9zIGRhZG9zXG4gIGNvbnN0IHJlc3VsdGFkbyA9XG4gICAgZXN0b3F1ZVxuICAgICAgPy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgcmV2ZW5kZWRvciA9IHJldmVuZGVkb3Jlcz8uZmluZChcbiAgICAgICAgICAocikgPT4gci5pZCA9PT0gaXRlbS5yZXZlbmRlZG9yX2lkXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICByZXZlbmRlZG9yOiByZXZlbmRlZG9yIHx8IG51bGwsXG4gICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5yZXZlbmRlZG9yICE9PSBudWxsKSB8fCBbXTtcblxuICAvLyBPcmRlbmFyIHBvciBwcmXDp29cbiAgcmVzdWx0YWRvLnNvcnQoKGEsIGIpID0+IGEucHJlY28gLSBiLnByZWNvKTtcblxuICByZXR1cm4geyBkYXRhOiByZXN1bHRhZG8sIGVycm9yOiBudWxsIH07XG59XG5cbi8vIEJ1c2NhciByZXZlbmRlZG9yZXMgcGFyYSBtw7psdGlwbG9zIHByb2R1dG9zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmV2ZW5kZWRvcmVzUGFyYVByb2R1dG9zKHByb2R1dG9Ob21lczogc3RyaW5nW10pIHtcbiAgaWYgKCFwcm9kdXRvTm9tZXMubGVuZ3RoKSByZXR1cm4geyBkYXRhOiB7fSwgZXJyb3I6IG51bGwgfTtcblxuICAvLyBCdXNjYXIgdG9kb3Mgb3MgcHJvZHV0b3MgZGUgdW1hIHZlelxuICBjb25zdCB7IGRhdGE6IGVzdG9xdWUsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKFwicmV2ZW5kZWRvcl9lc3RvcXVlXCIpXG4gICAgLnNlbGVjdChcbiAgICAgIGBcbiAgICAgIGlkLFxuICAgICAgcmV2ZW5kZWRvcl9pZCxcbiAgICAgIHByb2R1dG8sXG4gICAgICBxdWFudGlkYWRlLFxuICAgICAgcHJlY28sXG4gICAgICBzdGF0dXNcbiAgICBgXG4gICAgKVxuICAgIC5pbihcInByb2R1dG9cIiwgcHJvZHV0b05vbWVzKVxuICAgIC5ndChcInF1YW50aWRhZGVcIiwgMCk7IC8vIEFwZW5hcyBjb20gZXN0b3F1ZSBkaXNwb27DrXZlbFxuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGRhdGE6IHt9LCBlcnJvciB9O1xuICB9XG5cbiAgaWYgKCFlc3RvcXVlIHx8IGVzdG9xdWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgZGF0YToge30sIGVycm9yOiBudWxsIH07XG4gIH1cblxuICAvLyBCdXNjYXIgaW5mb3JtYcOnw7VlcyBkb3MgcmV2ZW5kZWRvcmVzXG4gIGNvbnN0IHJldmVuZGVkb3JJZHMgPSBbLi4ubmV3IFNldChlc3RvcXVlLm1hcCgoaXRlbSkgPT4gaXRlbS5yZXZlbmRlZG9yX2lkKSldO1xuXG4gIGNvbnN0IHsgZGF0YTogcmV2ZW5kZWRvcmVzLCBlcnJvcjogcmV2ZW5kZWRvcmVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJyZXZlbmRlZG9yZXNcIilcbiAgICAuc2VsZWN0KFxuICAgICAgYFxuICAgICAgaWQsXG4gICAgICB1c3VhcmlvX2lkLFxuICAgICAgbG9qYSxcbiAgICAgIGNpZGFkZSxcbiAgICAgIHVmLFxuICAgICAgZnJldGUsXG4gICAgICB2ZW5kYXMsXG4gICAgICBzdGF0dXNcbiAgICBgXG4gICAgKVxuICAgIC5pbihcImlkXCIsIHJldmVuZGVkb3JJZHMpO1xuXG4gIGlmIChyZXZlbmRlZG9yZXNFcnJvcikge1xuICAgIHJldHVybiB7IGRhdGE6IHt9LCBlcnJvcjogcmV2ZW5kZWRvcmVzRXJyb3IgfTtcbiAgfVxuXG4gIC8vIENvbWJpbmFyIG9zIGRhZG9zIGUgYWdydXBhciBwb3IgcHJvZHV0b1xuICBjb25zdCBwcm9kdXRvc0FncnVwYWRvczogUmVjb3JkPHN0cmluZywgYW55W10+ID0ge307XG5cbiAgcHJvZHV0b05vbWVzLmZvckVhY2goKHByb2R1dG9Ob21lKSA9PiB7XG4gICAgY29uc3QgcHJvZHV0b0VzdG9xdWUgPSBlc3RvcXVlXG4gICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnByb2R1dG8gPT09IHByb2R1dG9Ob21lKVxuICAgICAgLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCByZXZlbmRlZG9yID0gcmV2ZW5kZWRvcmVzPy5maW5kKFxuICAgICAgICAgIChyKSA9PiByLmlkID09PSBpdGVtLnJldmVuZGVkb3JfaWRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJldmVuZGVkb3IgPyB7IC4uLml0ZW0sIHJldmVuZGVkb3IgfSA6IG51bGw7XG4gICAgICB9KVxuICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbSAhPT0gbnVsbCk7XG5cbiAgICAvLyBPcmRlbmFyIHBvciBwcmXDp29cbiAgICBwcm9kdXRvRXN0b3F1ZS5zb3J0KChhLCBiKSA9PiBhLnByZWNvIC0gYi5wcmVjbyk7XG5cbiAgICBwcm9kdXRvc0FncnVwYWRvc1twcm9kdXRvTm9tZV0gPSBwcm9kdXRvRXN0b3F1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIHsgZGF0YTogcHJvZHV0b3NBZ3J1cGFkb3MsIGVycm9yOiBudWxsIH07XG59XG5cbi8vIEJ1c2NhciBpbmZvcm1hw6fDtWVzIGRvIHVzdcOhcmlvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8odXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcInVzdWFyaW9zXCIpXG4gICAgLnNlbGVjdChcbiAgICAgIFwiaWQsIG5vbWUsIHNvYnJlbm9tZSwgZW1haWwsIGNwZiwgdGVsZWZvbmUsIGNpZGFkZSwgdWYsIGNlcCwgcnVhLCBiYWlycm8sIGNvbXBsZW1lbnRvLCBudW1lcm9cIlxuICAgIClcbiAgICAuZXEoXCJpZFwiLCB1c2VySWQpXG4gICAgLnNpbmdsZSgpO1xuXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH07XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgYnVzY2FyIHVzdWFyaW9faWQgZG8gcmV2ZW5kZWRvciBiYXNlYWRvIG5vIHJldmVuZGVkb3JfaWRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc3VhcmlvSWRSZXZlbmRlZG9yKHJldmVuZGVkb3JJZDogbnVtYmVyKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicmV2ZW5kZWRvcmVzXCIpXG4gICAgICAuc2VsZWN0KFwidXN1YXJpb19pZFwiKVxuICAgICAgLmVxKFwiaWRcIiwgcmV2ZW5kZWRvcklkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgdXN1YXJpb19pZCBkbyByZXZlbmRlZG9yOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IGRhdGE6IGRhdGEudXN1YXJpb19pZCwgZXJyb3I6IG51bGwgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBidXNjYXIgdXN1YXJpb19pZCBkbyByZXZlbmRlZG9yOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgfVxufVxuXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1N0YXR1c1BlZGlkbyhcbiAgaWQ6IHN0cmluZ1xuKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJJbmljaWFuZG8gY3JpYcOnw6NvIGRvIHBlZGlkbyBwYXJhIHVzdcOhcmlvOlwiLCBpZCk7ICAgIFxuXG4gICAgaWYgKCFpZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSUQgZG8gcGFnYW1lbnRvIG7Do28gZW5jb250cmFkb1wiKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCBjaGVja1BheW1lbnRTdGF0dXMoaWQpO1xuXG4gICAgY29uc29sZS5sb2coXCJTdGF0dXMgZG8gcGFnYW1lbnRvOlwiLCBzdGF0dXMpO1xuXG4gICAgcmV0dXJuIHsgZGF0YTogc3RhdHVzLCBlcnJvcjogbnVsbCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIHZlcmlmaWNhciBzdGF0dXMgZG8gcGFnYW1lbnRvOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgfVxufSJdLCJuYW1lcyI6WyJzdXBhYmFzZSIsImNyZWF0ZVBheW1lbnQiLCJjcmVhdGVPclVwZGF0ZUN1c3RvbWVyIiwiZ2V0UGl4UXJDb2RlIiwiY2hlY2tQYXltZW50U3RhdHVzIiwiZ2V0UHJvZHV0b3MiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJnZXRQcm9kdXRvIiwiaWQiLCJlcSIsInNpbmdsZSIsInNhbHZhckNhbGN1bG8iLCJ0YW1hbmhvUm9kYSIsImFsdHVyYSIsImxhcmd1cmEiLCJyZXN1bHRhZG8iLCJjb3IiLCJpbnNlcnQiLCJ0YW1hbmhvX3JvZGEiLCJzYWx2YXJDYWxjdWxvVXN1YXJpbyIsInVzZXJJZCIsInRhbWFuaG8iLCJwYWNvdGUiLCJjYWxjdWxvcyIsImNvbnRhckVycm9yIiwiY29uc29sZSIsImxlbmd0aCIsImNhbGN1bG9NYWlzQW50aWdvIiwiZGVsZXRlRXJyb3IiLCJkZWxldGUiLCJ1c2VyaWQiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsImdldENhbGN1bG9zVXN1YXJpbyIsImdldENhbGN1bG9zIiwiY3JpYXJQZWRpZG8iLCJpdGVtcyIsInRvdGFsIiwidGlwb0VudHJlZ2EiLCJtZXRvZG9QYWdhbWVudG8iLCJkYWRvc0FkaWNpb25haXMiLCJwZWRpZG8iLCJwZWRpZG9FcnJvciIsInVzZXJfaWQiLCJ0aXBvX2VudHJlZ2EiLCJwYWdhbWVudG9fdGlwbyIsInN0YXR1cyIsImRhZG9zX2FkaWNpb25haXMiLCJpdGVucyIsIm1hcCIsIml0ZW0iLCJwZWRpZG9faWQiLCJwcm9kdXRvX25vbWUiLCJub21lIiwicXVhbnRpZGFkZSIsInByZWNvX3VuaXRhcmlvIiwicHJlY28iLCJyZXZlbmRlZG9yX2lkIiwiaXRlbnNFcnJvciIsImdldFBhY290ZUJ5UHJvZHV0b05vbWUiLCJwcm9kdXRvTm9tZSIsIm1hcGVhbWVudG9Qcm9kdXRvcyIsInBhY290ZXMiLCJpbGlrZSIsImxpbWl0IiwiY29yZXMiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwicGFjb3RlUG9yQ29yIiwiZXJyb3JDb3IiLCJnZXRQYWNvdGVWYWxpZG8iLCJyZWdpc3RyYXJNdWRhbmNhU3RhdHVzIiwicGVkaWRvSWQiLCJzdGF0dXNBbnRlcmlvciIsInN0YXR1c05vdm8iLCJvYnNlcnZhY2FvIiwidXBkYXRlZEJ5Iiwic3RhdHVzX2FudGVyaW9yIiwic3RhdHVzX25vdm8iLCJ1cGRhdGVkX2J5IiwiY3JpYXJQZWRpZG9Ob3ZvIiwicmV2ZW5kZWRvcklkIiwidmFsb3JUb3RhbCIsImZyZXRlIiwibG9nIiwiY2xpZW50ZUlkIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJyZXZlbmRlZG9yVXN1YXJpb0lkIiwicmV2ZW5kZWRvckVycm9yIiwiZ2V0VXN1YXJpb0lkUmV2ZW5kZWRvciIsIkVycm9yIiwibWVzc2FnZSIsIm51bWVyb1BlZGlkbyIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInRvVXBwZXJDYXNlIiwic3RhdHVzSW5pY2lhbCIsImNsaWVudGVfaWQiLCJudW1lcm8iLCJ2YWxvcl90b3RhbCIsInN0YXR1c19kZXRhbGhhZG8iLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRfYXQiLCJ1c2VyIiwiZ2V0VXNlckluZm8iLCJlbWFpbCIsInRlbGVmb25lIiwiY3BmIiwiY2xpZW50ZSIsIm5hbWUiLCJzb2JyZW5vbWUiLCJwaG9uZSIsIm1vYmlsZVBob25lIiwiY3BmQ25waiIsInBvc3RhbENvZGUiLCJjZXAiLCJhZGRyZXNzIiwicnVhIiwiYWRkcmVzc051bWJlciIsImNvbXBsZW1lbnQiLCJjb21wbGVtZW50byIsInByb3ZpbmNlIiwiYmFpcnJvIiwiY2l0eSIsImNpZGFkZSIsInN0YXRlIiwidWYiLCJleHRlcm5hbFJlZmVyZW5jZSIsInBhZ2FtZW50b0RhdGEiLCJiaWxsaW5nVHlwZSIsImN1c3RvbWVyIiwidmFsdWUiLCJkdWVEYXRlIiwiZGVzY3JpcHRpb24iLCJjcmVkaXRDYXJkIiwiaG9sZGVyTmFtZSIsIm51bWJlciIsImV4cGlyeU1vbnRoIiwiZXhwaXJ5WWVhciIsImNjdiIsImluc3RhbGxtZW50Q291bnQiLCJ0b3RhbFZhbHVlIiwiaW5zdGFsbG1lbnRWYWx1ZSIsImRpc2NvdW50IiwiZHVlRGF0ZUxpbWl0RGF5cyIsInR5cGUiLCJpbnRlcmVzdCIsImZpbmUiLCJjcmVkaXRDYXJkSG9sZGVySW5mbyIsImFkZHJlc3NDb21wbGVtZW50IiwicmVtb3RlSXAiLCJwYWdhbWVudG8iLCJkYWRvc1BhZ2FtZW50byIsInBpeCIsImJvbGV0byIsImJhbmtTbGlwIiwiaXRlbnNQYXJhSW5zZXJpciIsIlByb21pc2UiLCJhbGwiLCJpbmRleCIsInBhY290ZUlkIiwiaXRlbVBhcmFJbnNlcmlyIiwicGFjb3RlX2lkIiwicXRkIiwidmFsb3JfdW5pdGFyaW8iLCJpdGVuc0luc2VyaWRvcyIsInBhZ2FtZW50b0lkIiwiYXR1YWxpemFyU3RhdHVzUGVkaWRvIiwibm92b1N0YXR1cyIsImRhdGFFc3RpbWFkYSIsIm9ic2VydmFjb2VzIiwicGVkaWRvQXR1YWwiLCJlcnJvckJ1c2NhIiwiZGFkb3NBdHVhbGl6YWNhbyIsImRhdGFfZXN0aW1hZGFfZW50cmVnYSIsIm9ic2VydmFjb2VzX3JldmVuZGVkb3IiLCJkYXRhX2VudHJlZ2FfcmVhbCIsInVwZGF0ZSIsImdldFBlZGlkb3MiLCJnZXRQZWRpZG9zQ2xpZW50ZSIsInBlZGlkb3MiLCJwZWRpZG9zRXJyb3IiLCJnZXRUYW1hbmhvcyIsImdldEFsdHVyYXNCeVRhbWFuaG9JZCIsInRhbWFuaG9JZCIsInVuaXF1ZUFsdHVyYXMiLCJyZWR1Y2UiLCJhY2MiLCJjdXJyZW50IiwiZXhpc3RzIiwiZmluZCIsInZhbG9yIiwicHVzaCIsImdldExhcmd1cmFzQnlBbHR1cmFJZCIsImFsdHVyYUlkIiwidW5pcXVlTGFyZ3VyYXMiLCJnZXRQYWNvdGVCeUxhcmd1cmFJZCIsImxhcmd1cmFJZCIsInBhY290ZUFqdXN0YWRvIiwiZGVzY3JpY2FvIiwiZ2V0Q2FycmluaG9Vc3VhcmlvIiwiYWRpY2lvbmFySXRlbUNhcnJpbmhvIiwiaW1hZ2VtIiwiYWRqdXN0ZWRRdWFudGl0eSIsIm1heCIsInJvdW5kIiwiaXRlbUV4aXN0ZW50ZSIsImNvZGUiLCJhdHVhbGl6YXJRdWFudGlkYWRlQ2FycmluaG8iLCJyZW1vdmVySXRlbUNhcnJpbmhvIiwibGltcGFyQ2FycmluaG9Vc3VhcmlvIiwiYXR1YWxpemFyQ2FycmluaG9Vc3VhcmlvIiwiZ2V0UmV2ZW5kZWRvcmVzQ29tUHJvZHV0byIsImVzdG9xdWUiLCJndCIsInJldmVuZGVkb3JJZHMiLCJyZXZlbmRlZG9yZXMiLCJyZXZlbmRlZG9yZXNFcnJvciIsImluIiwicmV2ZW5kZWRvciIsInIiLCJmaWx0ZXIiLCJzb3J0IiwiYSIsImIiLCJnZXRSZXZlbmRlZG9yZXNQYXJhUHJvZHV0b3MiLCJwcm9kdXRvTm9tZXMiLCJTZXQiLCJwcm9kdXRvc0FncnVwYWRvcyIsImZvckVhY2giLCJwcm9kdXRvRXN0b3F1ZSIsInByb2R1dG8iLCJ1c3VhcmlvX2lkIiwiY2hlY2tTdGF0dXNQZWRpZG8iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./lib/database.ts\n");

/***/ }),

/***/ "(ssr)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(ssr)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://djqueobbsqebtfnqysmt.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqcXVlb2Jic3FlYnRmbnF5c210Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MjIyNzQsImV4cCI6MjA2OTE5ODI3NH0.8bUtQl__vruvkxUFcMEWB9IGNU8eZmDQEnDOs9J8i30\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error('Missing Supabase credentials. Please check your .env.local file.');\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBRWpFLElBQUksQ0FBQ0QsZUFBZSxDQUFDSSxpQkFBaUI7SUFDcEMsTUFBTSxJQUFJRSxNQUFNO0FBQ2xCO0FBRU8sTUFBTUMsV0FBV1IsbUVBQVlBLENBQUNDLGFBQWFJLGlCQUFnQiIsInNvdXJjZXMiOlsiL1VzZXJzL2d1aWJhZGVybWFubi9Eb2N1bWVudHMvR2l0SHViL2NhcnBsdXMvbGliL3N1cGFiYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3VwYWJhc2UtanNcIlxuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTFxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVlcblxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBjcmVkZW50aWFscy4gUGxlYXNlIGNoZWNrIHlvdXIgLmVudi5sb2NhbCBmaWxlLicpXG59XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxuXG4vLyBUaXBvcyBwYXJhIG9zIGRhZG9zIGRvIFN1cGFiYXNlXG5leHBvcnQgdHlwZSBVc2VyID0ge1xuICBpZDogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgbm9tZTogc3RyaW5nXG4gIHNvYnJlbm9tZTogc3RyaW5nXG4gIHRlbGVmb25lOiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIFByb2R1dG8gPSB7XG4gIGlkOiBzdHJpbmdcbiAgbm9tZTogc3RyaW5nXG4gIGNhdGVnb3JpYTogc3RyaW5nXG4gIHByZWNvOiBudW1iZXJcbiAgZGVzY3JpY2FvOiBzdHJpbmdcbiAgaW1hZ2VtX3ByaW5jaXBhbDogc3RyaW5nXG4gIGltYWdlbnM6IHN0cmluZ1tdXG4gIGVzdG9xdWU6IG51bWJlclxuICBjcmVhdGVkX2F0OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgUGVkaWRvID0ge1xuICBpZDogc3RyaW5nXG4gIHVzZXJfaWQ6IHN0cmluZ1xuICBzdGF0dXM6IHN0cmluZ1xuICB0b3RhbDogbnVtYmVyXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBJdGVtUGVkaWRvID0ge1xuICBpZDogc3RyaW5nXG4gIHBlZGlkb19pZDogc3RyaW5nXG4gIHByb2R1dG9faWQ6IHN0cmluZ1xuICBxdWFudGlkYWRlOiBudW1iZXJcbiAgcHJlY29fdW5pdGFyaW86IG51bWJlclxuICBjcmVhdGVkX2F0OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgQ2FsY3Vsb1Jlc3VsdGFkbyA9IHtcbiAgaWQ6IHN0cmluZ1xuICB0YW1hbmhvX3JvZGE6IHN0cmluZ1xuICBhbHR1cmE6IHN0cmluZ1xuICBsYXJndXJhOiBzdHJpbmdcbiAgcmVzdWx0YWRvOiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJFcnJvciIsInN1cGFiYXNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./lib/supabase.ts\n");

/***/ })

};
;